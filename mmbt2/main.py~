class MarketEvent:
    def __init__(self, bar):
        self.type = "MARKET"
        self.bar = bar  # Dict or custom object with OHLCV etc.

class Strategy:
    def __init__(self):
        self.signals = []

    def on_bar(self, event):
        # Basic example: signal when price > 100
        bar = event.bar
        if bar['close'] > 100:
            self.signals.append({'type': 'BUY', 'timestamp': bar['timestamp'], 'price': bar['close']})

class Backtester:
    def __init__(self, data, strategy):
        self.data = data  # List of bar dictionaries
        self.strategy = strategy
        self.events = []

    def run(self):
        for bar in self.data:
            event = MarketEvent(bar)
            self.events.append(event)
            self.strategy.on_bar(event)

        return self.strategy.signals
