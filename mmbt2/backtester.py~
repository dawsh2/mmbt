from event import MarketEvent

class Backtester:
    def __init__(self, data_handler, strategy):
        self.data_handler = data_handler
        self.strategy = strategy
        self.events = []

    def run(self):
        bars = self.data_handler.load_data()

        for bar in bars:
            event = MarketEvent(bar)
            self.events.append(event)
            self.strategy.on_bar(event)

        return self.strategy.signals
