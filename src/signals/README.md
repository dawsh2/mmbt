# Signals Module

No module overview available.

## Contents

- [signal_processing](#signal_processing)
- [signal_router](#signal_router)

## signal_processing

Signal Processing Module for Trading System

This module provides signal filtering, transformation, and confidence scoring
capabilities to enhance the quality of trading signals.

### Classes

#### `SignalType`

Enumeration of different signal types.

#### `Signal`

Class representing a trading signal.

This class provides a standardized structure for trading signals
generated by rules and strategies in the trading system.

##### Methods

###### `__init__(timestamp, signal_type, price, rule_id=None, confidence=1.0, metadata=None, symbol='default')`

Initialize a trading signal.

Args:
    timestamp: Signal timestamp
    signal_type: Type of signal (BUY, SELL, NEUTRAL)
    price: Price at signal generation
    rule_id: Identifier of the rule that generated the signal
    confidence: Confidence score (0-1)
    metadata: Additional signal metadata
    symbol: Instrument symbol

###### `copy()`

Create a copy of the signal.

###### `from_numeric(cls, timestamp, signal_value, price, rule_id=None, metadata=None, symbol='default')`

Create a Signal object from a numeric signal value (-1, 0, 1).

Args:
    timestamp: Signal timestamp
    signal_value: Numeric signal value (-1, 0, 1)
    price: Price at signal generation
    rule_id: Optional rule identifier
    metadata: Additional signal data
    symbol: Instrument symbol
    
Returns:
    Signal: A new Signal object

*Returns:* Signal: A new Signal object

###### `direction()`

Get the numeric direction of this signal (1, -1, or 0).

###### `is_active()`

Determine if this signal is actionable (not neutral).

###### `__str__()`

String representation of the signal.

#### `SignalFilter`

Base class for signal filters.

##### Methods

###### `filter(signal, history=None)`

*Returns:* `Signal`

Filter a signal, potentially using history.

Args:
    signal: Input signal to filter
    history: Optional list of historical signals
    
Returns:
    Signal: Filtered signal

###### `reset()`

Reset filter state.

#### `MovingAverageFilter`

Filter signals using a moving average.

##### Methods

###### `__init__(window_size=5)`

Initialize with window size.

Args:
    window_size: Size of moving average window

###### `filter(signal, history=None)`

*Returns:* `Signal`

Apply moving average filter to signal.

###### `reset()`

Reset filter state.

#### `ExponentialFilter`

Filter signals using exponential smoothing.

##### Methods

###### `__init__(alpha=0.2)`

Initialize with smoothing factor.

Args:
    alpha: Smoothing factor (0-1)
        Higher alpha gives more weight to recent signals

###### `filter(signal, history=None)`

*Returns:* `Signal`

Apply exponential filter to signal.

###### `reset()`

Reset filter state.

#### `KalmanFilter`

Apply Kalman filtering to signals.

##### Methods

###### `__init__(process_variance=1e-05, measurement_variance=0.01)`

Initialize Kalman filter parameters.

Args:
    process_variance: Process noise variance (Q)
    measurement_variance: Measurement noise variance (R)

###### `filter(signal, history=None)`

*Returns:* `Signal`

Apply Kalman filter to signal.

###### `reset()`

Reset filter state.

#### `SignalTransform`

Base class for signal transformations.

##### Methods

###### `transform(data)`

Apply transformation to data.

Args:
    data: Input data to transform
    
Returns:
    Any: Transformed data

*Returns:* Any: Transformed data

#### `WaveletTransform`

Apply wavelet transform to price data for multi-scale analysis.

##### Methods

###### `__init__(wavelet='db1', level=3)`

Initialize with wavelet type and decomposition level.

Args:
    wavelet: Wavelet type ('db1', 'haar', etc.)
    level: Decomposition level

###### `add_price(price)`

Add price to history.

Args:
    price: Price to add

###### `transform(data=None)`

Apply wavelet transform to price history or provided data.

Args:
    data: Optional data to transform (uses price history if None)
    
Returns:
    list: Wavelet coefficients at different scales

*Returns:* list: Wavelet coefficients at different scales

###### `analyze_trend(coeffs=None)`

Analyze trend at different scales.

Args:
    coeffs: Optional pre-computed wavelet coefficients
    
Returns:
    dict: Trend strength at different scales

*Returns:* dict: Trend strength at different scales

###### `denoise(coeffs=None, threshold=0.1)`

Denoise data using wavelet thresholding.

Args:
    coeffs: Optional pre-computed wavelet coefficients
    threshold: Threshold for coefficient removal
    
Returns:
    list: Denoised data

*Returns:* list: Denoised data

#### `BayesianConfidenceScorer`

Calculate confidence scores for signals using Bayesian methods.

##### Methods

###### `__init__(prior_accuracy=0.5, smoothing=10)`

Initialize with prior accuracy belief and smoothing factor.

Args:
    prior_accuracy: Initial belief about signal accuracy (0-1)
    smoothing: Controls how quickly scores adapt to new data

###### `record_signal_result(signal, was_correct)`

Record whether a signal led to a profitable trade.

Args:
    signal: The original signal
    was_correct: Whether the signal led to a profitable trade

###### `calculate_confidence(signal, context=None)`

Calculate confidence score for a signal.

Args:
    signal: The signal to score
    context: Optional context dict (regime, market conditions, etc.)
    
Returns:
    float: Confidence score between 0-1

*Returns:* float: Confidence score between 0-1

###### `_calculate_similarity(signal1, signal2, context=None)`

Calculate similarity between two signals.

Args:
    signal1: First signal
    signal2: Second signal
    context: Optional context information
    
Returns:
    float: Similarity score (0-1)

*Returns:* float: Similarity score (0-1)

#### `SignalProcessor`

Coordinates signal processing operations including filtering, 
transformation, and confidence scoring.

##### Methods

###### `__init__(config=None)`

Initialize with configuration.

Args:
    config: Configuration dictionary or object

###### `_initialize_components()`

Initialize signal processing components from configuration.

###### `process_signal(signal, context=None)`

Process a signal through filtering, transformation, and confidence scoring.

Args:
    signal: The signal to process
    context: Optional context information
    
Returns:
    Signal: Processed signal

*Returns:* Signal: Processed signal

###### `process_price_data(prices, symbol='default')`

Process price data for additional insights.

Args:
    prices: List or array of price data
    symbol: Instrument symbol
    
Returns:
    dict: Analysis results

*Returns:* dict: Analysis results

###### `record_trade_result(signal, was_profitable)`

Record trade result for confidence model learning.

Args:
    signal: The signal that led to the trade
    was_profitable: Whether the trade was profitable

###### `reset()`

Reset all signal processing components.

## signal_router

Signal Router Module

This module provides the SignalRouter class that collects and manages signals
from multiple rules. It was created to support backward compatibility for 
migrated code from the legacy architecture.

### Classes

#### `SignalCollection`

A collection of signals that provides consensus methods.

##### Methods

###### `__init__()`

Initialize an empty signal collection.

###### `add(signal)`

Add a signal to the collection.

###### `get_weighted_consensus()`

*Returns:* `SignalType`

Get the weighted consensus signal type from all signals.

#### `SignalRouter`

Routes signals from multiple rules and provides consensus methods.

This class is provided for backward compatibility with legacy strategies.

##### Methods

###### `__init__(rule_objects)`

Initialize the signal router with rule objects.

Args:
    rule_objects: List of rule objects that generate signals

###### `on_bar(event)`

*Returns:* `Dict[str, Any]`

Process a bar event through all rules and collect signals.

Args:
    event: Bar event containing market data
    
Returns:
    dict: Contains the collected signals and bar metadata

###### `reset()`

Reset all rules.
