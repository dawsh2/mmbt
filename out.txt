2025-04-17 20:30:14,858 - src.features.feature_registry - DEBUG - Registered feature 'ReturnFeature' in category 'price'
2025-04-17 20:30:14,858 - src.features.feature_registry - DEBUG - Registered feature 'NormalizedPriceFeature' in category 'price'
2025-04-17 20:30:14,858 - src.features.feature_registry - DEBUG - Registered feature 'PricePatternFeature' in category 'price'
2025-04-17 20:30:14,858 - src.features.feature_registry - DEBUG - Registered feature 'VolumeProfileFeature' in category 'price'
2025-04-17 20:30:14,858 - src.features.feature_registry - DEBUG - Registered feature 'PriceDistanceFeature' in category 'price'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'VolatilityFeature' in category 'technical'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'SupportResistanceFeature' in category 'technical'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'SignalAgreementFeature' in category 'technical'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'DivergenceFeature' in category 'technical'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'OscillatorStateFeature' in category 'technical'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'TrendStrengthFeature' in category 'technical'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'SMA_Crossover' in category 'general'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'TimeOfDayFeature' in category 'time'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'DayOfWeekFeature' in category 'time'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'MonthFeature' in category 'time'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'SeasonalityFeature' in category 'time'
2025-04-17 20:30:14,859 - src.features.feature_registry - DEBUG - Registered feature 'EventFeature' in category 'time'
2025-04-17 20:30:14,867 - src.rules.rule_registry - DEBUG - Registered rule 'FixedSMACrossoverRule' in category 'crossover'
2025-04-17 20:30:14,867 - src.rules.rule_registry - DEBUG - Registered rule 'SMACrossoverRule' in category 'crossover'
2025-04-17 20:30:14,867 - src.rules.rule_registry - DEBUG - Registered rule 'ExponentialMACrossoverRule' in category 'crossover'
2025-04-17 20:30:14,867 - src.rules.rule_registry - DEBUG - Registered rule 'MACDCrossoverRule' in category 'crossover'
2025-04-17 20:30:14,867 - src.rules.rule_registry - DEBUG - Registered rule 'PriceMACrossoverRule' in category 'crossover'
2025-04-17 20:30:14,867 - src.rules.rule_registry - DEBUG - Registered rule 'BollingerBandsCrossoverRule' in category 'crossover'
2025-04-17 20:30:14,867 - src.rules.rule_registry - DEBUG - Registered rule 'StochasticCrossoverRule' in category 'crossover'
2025-04-17 20:30:14,868 - src.rules.rule_registry - DEBUG - Registered rule 'RSIRule' in category 'oscillator'
2025-04-17 20:30:14,868 - src.rules.rule_registry - DEBUG - Registered rule 'StochasticRule' in category 'oscillator'
2025-04-17 20:30:14,868 - src.rules.rule_registry - DEBUG - Registered rule 'CCIRule' in category 'oscillator'
2025-04-17 20:30:14,868 - src.rules.rule_registry - DEBUG - Registered rule 'MACDHistogramRule' in category 'oscillator'
2025-04-17 20:30:14,868 - src.rules.rule_registry - DEBUG - Registered rule 'ADXRule' in category 'trend'
2025-04-17 20:30:14,868 - src.rules.rule_registry - DEBUG - Registered rule 'IchimokuRule' in category 'trend'
2025-04-17 20:30:14,868 - src.rules.rule_registry - DEBUG - Registered rule 'VortexRule' in category 'trend'
2025-04-17 20:30:14,869 - src.rules.rule_registry - DEBUG - Registered rule 'BollingerBandRule' in category 'volatility'
2025-04-17 20:30:14,869 - src.rules.rule_registry - DEBUG - Registered rule 'ATRTrailingStopRule' in category 'volatility'
2025-04-17 20:30:14,869 - src.rules.rule_registry - DEBUG - Registered rule 'VolatilityBreakoutRule' in category 'volatility'
2025-04-17 20:30:14,869 - src.rules.rule_registry - DEBUG - Registered rule 'KeltnerChannelRule' in category 'volatility'
2025-04-17 20:30:14,946 - __main__ - INFO - Created event bus with event counting
2025-04-17 20:30:14,946 - __main__ - INFO - Loading data for ['SPY'] from 2024-03-26 00:00:00 to 2024-03-27 00:00:00
2025-04-17 20:30:15,280 - src.data.data_handler - INFO - Loaded 391 bars from 2024-03-26 00:00:00 to 2024-03-27 00:00:00
2025-04-17 20:30:15,280 - src.data.data_handler - INFO - Training data: 312 bars
2025-04-17 20:30:15,280 - src.data.data_handler - INFO - Testing data: 79 bars
2025-04-17 20:30:15,280 - src.events.event_bus - ERROR - Cannot register non-callable handler: EventPortfolio(event_types=['POSITION_ACTION', 'FILL'])
2025-04-17 20:30:15,280 - src.events.event_bus - ERROR - Cannot register non-callable handler: EventPortfolio(event_types=['POSITION_ACTION', 'FILL'])
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,280 - src.position_management.portfolio - INFO - Portfolio initialized: Portfolio_3fa434a6 with 100000 USD
2025-04-17 20:30:15,280 - __main__ - INFO - Created portfolio with initial capital: $100000
2025-04-17 20:30:15,280 - src.position_management.position_manager - INFO - Position manager initialized with portfolio 3fa434a6-499d-49b8-a07a-508fc30906c0
2025-04-17 20:30:15,280 - __main__ - INFO - Created position manager
2025-04-17 20:30:15,280 - __main__ - INFO - Created market simulator
2025-04-17 20:30:15,280 - __main__ - INFO - Created strategy
2025-04-17 20:30:15,280 - src.engine.execution_engine - INFO - Execution engine initialized
2025-04-17 20:30:15,280 - __main__ - INFO - Created and configured execution engine
2025-04-17 20:30:15,280 - src.engine.execution_engine - INFO - Execution engine initialized
2025-04-17 20:30:15,280 - src.engine.backtester - INFO - Set execution engine portfolio reference from position manager
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for BAR
2025-04-17 20:30:15,280 - src.engine.backtester - INFO - Setting up event handlers
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for BAR
2025-04-17 20:30:15,280 - src.engine.backtester - INFO - Registered strategy.on_bar for BAR events
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for SIGNAL
2025-04-17 20:30:15,280 - src.engine.backtester - INFO - Registered position_manager.on_signal for SIGNAL events
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_ACTION
2025-04-17 20:30:15,280 - src.engine.backtester - INFO - Registered execution_engine.on_position_action for POSITION_ACTION events
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for ORDER
2025-04-17 20:30:15,280 - src.engine.backtester - INFO - Registered execution_engine.on_order for ORDER events
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for FILL
2025-04-17 20:30:15,280 - src.engine.backtester - INFO - Registered portfolio.handle_fill for FILL events
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_ACTION
2025-04-17 20:30:15,280 - src.engine.backtester - INFO - Registered portfolio._handle_position_action for POSITION_ACTION events
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for BAR
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for TICK
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for MARKET_OPEN
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for MARKET_CLOSE
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for SIGNAL
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for ORDER
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for CANCEL
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for MODIFY
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for FILL
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for PARTIAL_FILL
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for REJECT
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_ACTION
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_OPENED
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_CLOSED
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_MODIFIED
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_STOPPED
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for PORTFOLIO_UPDATE
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for EQUITY_UPDATE
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for MARGIN_UPDATE
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for START
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for STOP
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for PAUSE
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for RESUME
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for ERROR
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for METRIC_CALCULATED
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for ANALYSIS_COMPLETE
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for CUSTOM
2025-04-17 20:30:15,280 - src.engine.backtester - INFO - Event handlers setup complete
2025-04-17 20:30:15,280 - src.engine.backtester - INFO - Backtester initialized with initial capital: 100000
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for SIGNAL
2025-04-17 20:30:15,280 - __main__ - INFO - Registered position manager for SIGNAL events
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_ACTION
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for FILL
2025-04-17 20:30:15,280 - __main__ - INFO - Registered handler for POSITION_ACTION events
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for ORDER
2025-04-17 20:30:15,280 - __main__ - INFO - Registered execution engine for ORDER events
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for BAR
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for TICK
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for MARKET_OPEN
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for MARKET_CLOSE
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for SIGNAL
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for ORDER
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for CANCEL
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for MODIFY
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for FILL
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for PARTIAL_FILL
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for REJECT
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_ACTION
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_OPENED
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_CLOSED
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_MODIFIED
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for POSITION_STOPPED
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for PORTFOLIO_UPDATE
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for EQUITY_UPDATE
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for MARGIN_UPDATE
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for START
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for STOP
2025-04-17 20:30:15,280 - src.events.event_bus - DEBUG - Registered handler for PAUSE
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for RESUME
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for ERROR
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for METRIC_CALCULATED
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for ANALYSIS_COMPLETE
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for CUSTOM
2025-04-17 20:30:15,281 - __main__ - INFO - Starting backtest
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,281 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,281 - src.position_management.portfolio - INFO - Portfolio reset to initial capital: 100000
2025-04-17 20:30:15,281 - src.engine.execution_engine - INFO - Execution engine reset with 100000.00 capital
2025-04-17 20:30:15,281 - src.position_management.position_manager - INFO - Position manager reset
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for BAR
2025-04-17 20:30:15,281 - src.engine.backtester - INFO - Set event_bus reference on strategy
2025-04-17 20:30:15,281 - src.engine.backtester - INFO - Setting up event handlers
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for BAR
2025-04-17 20:30:15,281 - src.engine.backtester - INFO - Registered strategy.on_bar for BAR events
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for SIGNAL
2025-04-17 20:30:15,281 - src.engine.backtester - INFO - Registered position_manager.on_signal for SIGNAL events
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for POSITION_ACTION
2025-04-17 20:30:15,281 - src.engine.backtester - INFO - Registered execution_engine.on_position_action for POSITION_ACTION events
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for ORDER
2025-04-17 20:30:15,281 - src.engine.backtester - INFO - Registered execution_engine.on_order for ORDER events
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for FILL
2025-04-17 20:30:15,281 - src.engine.backtester - INFO - Registered portfolio.handle_fill for FILL events
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for POSITION_ACTION
2025-04-17 20:30:15,281 - src.engine.backtester - INFO - Registered portfolio._handle_position_action for POSITION_ACTION events
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for BAR
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for TICK
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for MARKET_OPEN
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for MARKET_CLOSE
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for SIGNAL
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for ORDER
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for CANCEL
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for MODIFY
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for FILL
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for PARTIAL_FILL
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for REJECT
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for POSITION_ACTION
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for POSITION_OPENED
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for POSITION_CLOSED
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for POSITION_MODIFIED
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for POSITION_STOPPED
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for PORTFOLIO_UPDATE
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for EQUITY_UPDATE
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for MARGIN_UPDATE
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for START
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for STOP
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for PAUSE
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for RESUME
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for ERROR
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for METRIC_CALCULATED
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for ANALYSIS_COMPLETE
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Registered handler for CUSTOM
2025-04-17 20:30:15,281 - src.engine.backtester - INFO - Event handlers setup complete
2025-04-17 20:30:15,281 - src.engine.backtester - INFO - Starting backtest...
2025-04-17 20:30:15,281 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:30:00
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,281 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:30:00, Close: 521.01
2025-04-17 20:30:15,281 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:30:00, Close: 521.01
2025-04-17 20:30:15,281 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,281 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:30:00, Close: 521.01
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,281 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,281 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:31:00
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,281 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:31:00, Close: 521.07
2025-04-17 20:30:15,281 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:31:00, Close: 521.07
2025-04-17 20:30:15,281 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,281 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:31:00, Close: 521.07
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,281 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,281 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:32:00
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,281 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:32:00, Close: 521.22
2025-04-17 20:30:15,281 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:32:00, Close: 521.22
2025-04-17 20:30:15,281 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,281 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:32:00, Close: 521.22
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,281 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,281 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:33:00
2025-04-17 20:30:15,281 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,281 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:33:00, Close: 521.2896
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:33:00, Close: 521.2896
2025-04-17 20:30:15,282 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:33:00, Close: 521.2896
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,282 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,282 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:34:00
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:34:00, Close: 521.36
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:34:00, Close: 521.36
2025-04-17 20:30:15,282 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:34:00, Close: 521.36
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3318, Slow SMA = 521.1899
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,282 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,282 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:35:00
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:35:00, Close: 521.1297
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2999, Slow SMA = 521.1979
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.141920, Curr diff: 0.101960
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:35:00, Close: 521.1297
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2679, Slow SMA = 521.2059
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.101960, Curr diff: 0.062000
2025-04-17 20:30:15,282 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:35:00, Close: 521.1297
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2218, Slow SMA = 521.2139
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.062000, Curr diff: 0.007960
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,282 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,282 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:36:00
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:36:00, Close: 521.12
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1738, Slow SMA = 521.2172
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.007960, Curr diff: -0.043373
2025-04-17 20:30:15,282 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 13:36:00
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,282 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.12
2025-04-17 20:30:15,282 - src.position_management.position_manager - INFO - Current positions for SPY: 0 total, 0 in same direction, 0 in opposite direction
2025-04-17 20:30:15,282 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,282 - src.position_management.position_manager - INFO - Created SHORT position entry action for SPY size 10
2025-04-17 20:30:15,282 - src.position_management.position_manager - INFO - Created 1 position actions: ['entry']
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,282 - src.engine.execution_engine - INFO - Created order from position action: SPY SELL 10 @ 521.12
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,282 - src.engine.execution_engine - INFO - Order received: OrderEvent(SELL 10 SPY @ 521.12, MARKET, ID: b7044b7c-23af-41a4-94bd-f36a593f2894)
2025-04-17 20:30:15,282 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(SELL 10 SPY @ 521.12, MARKET, ID: b7044b7c-23af-41a4-94bd-f36a593f2894)
2025-04-17 20:30:15,282 - src.engine.execution_engine - WARNING - No price available for SPY, order will be executed on next bar
2025-04-17 20:30:15,282 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(SELL 10 SPY @ 521.12, MARKET, ID: b7044b7c-23af-41a4-94bd-f36a593f2894)
2025-04-17 20:30:15,282 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,282 - __main__ - DEBUG - Order details: SELL 10 SPY @ 521.12
2025-04-17 20:30:15,282 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(SELL 10 SPY @ 521.12, MARKET, ID: b7044b7c-23af-41a4-94bd-f36a593f2894)
2025-04-17 20:30:15,282 - src.position_management.position - INFO - Position opened: da84f789-3c84-4939-817f-50839657807f SPY SHORT 10 @ 521.12
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,282 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,282 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,282 - src.position_management.portfolio - INFO - Position opened: da84f789-3c84-4939-817f-50839657807f SPY SHORT 10 @ 521.12
2025-04-17 20:30:15,282 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,282 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,282 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,282 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,282 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.12
2025-04-17 20:30:15,282 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.12
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:36:00, Close: 521.12
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1258, Slow SMA = 521.2205
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.043373, Curr diff: -0.094707
2025-04-17 20:30:15,282 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:36:00, Close: 521.12
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1239, Slow SMA = 521.2239
2025-04-17 20:30:15,282 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.094707, Curr diff: -0.099980
2025-04-17 20:30:15,282 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,282 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,282 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,283 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.12
2025-04-17 20:30:15,283 - src.position_management.position - INFO - Position closed: da84f789-3c84-4939-817f-50839657807f SPY SHORT 10 @ 521.12 P&L: 0.00
2025-04-17 20:30:15,283 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,283 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,283 - src.position_management.portfolio - INFO - Position closed: da84f789-3c84-4939-817f-50839657807f SPY PnL: 0.00
2025-04-17 20:30:15,283 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,283 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,283 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,283 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.12
2025-04-17 20:30:15,283 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,283 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,283 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,283 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,283 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.12
2025-04-17 20:30:15,283 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,283 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,283 - src.engine.backtester - DEBUG - Executed 1 fills
2025-04-17 20:30:15,283 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:37:00
2025-04-17 20:30:15,283 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:37:00, Close: 521.25
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1479, Slow SMA = 521.2259
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.099980, Curr diff: -0.077920
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:37:00, Close: 521.25
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1720, Slow SMA = 521.2279
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.077920, Curr diff: -0.055860
2025-04-17 20:30:15,283 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:37:00, Close: 521.25
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1980, Slow SMA = 521.2299
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.055860, Curr diff: -0.031860
2025-04-17 20:30:15,283 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,283 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,283 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,283 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.25
2025-04-17 20:30:15,283 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,283 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,283 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:38:00
2025-04-17 20:30:15,283 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:38:00, Close: 521.02
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1780, Slow SMA = 521.2119
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.031860, Curr diff: -0.033887
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:38:00, Close: 521.02
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1580, Slow SMA = 521.1939
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.033887, Curr diff: -0.035913
2025-04-17 20:30:15,283 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:38:00, Close: 521.02
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1120, Slow SMA = 521.1759
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.035913, Curr diff: -0.063940
2025-04-17 20:30:15,283 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,283 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,283 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,283 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.02
2025-04-17 20:30:15,283 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,283 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,283 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:39:00
2025-04-17 20:30:15,283 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:39:00, Close: 521.09
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0800, Slow SMA = 521.1579
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.063940, Curr diff: -0.077940
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:39:00, Close: 521.09
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0480, Slow SMA = 521.1399
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.077940, Curr diff: -0.091940
2025-04-17 20:30:15,283 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:39:00, Close: 521.09
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0620, Slow SMA = 521.1219
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.091940, Curr diff: -0.059940
2025-04-17 20:30:15,283 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,283 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,283 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,283 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.09
2025-04-17 20:30:15,283 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,283 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,283 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:40:00
2025-04-17 20:30:15,283 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,283 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:40:00, Close: 521.02
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0620, Slow SMA = 521.1146
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.059940, Curr diff: -0.052627
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:40:00, Close: 521.02
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0620, Slow SMA = 521.1073
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.052627, Curr diff: -0.045313
2025-04-17 20:30:15,284 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:40:00, Close: 521.02
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0480, Slow SMA = 521.1000
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.045313, Curr diff: -0.052000
2025-04-17 20:30:15,284 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,284 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,284 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,284 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.02
2025-04-17 20:30:15,284 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,284 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,284 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:41:00
2025-04-17 20:30:15,284 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:41:00, Close: 520.8522
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0004, Slow SMA = 521.0821
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.052000, Curr diff: -0.081707
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:41:00, Close: 520.8522
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9529, Slow SMA = 521.0643
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.081707, Curr diff: -0.111413
2025-04-17 20:30:15,284 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:41:00, Close: 520.8522
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9193, Slow SMA = 521.0464
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.111413, Curr diff: -0.127120
2025-04-17 20:30:15,284 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,284 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,284 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,284 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 520.8522
2025-04-17 20:30:15,284 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,284 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,284 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:42:00
2025-04-17 20:30:15,284 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:42:00, Close: 520.895
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8943, Slow SMA = 521.0228
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.127120, Curr diff: -0.128453
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:42:00, Close: 520.895
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8693, Slow SMA = 520.9991
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.128453, Curr diff: -0.129787
2025-04-17 20:30:15,284 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:42:00, Close: 520.895
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8779, Slow SMA = 520.9754
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.129787, Curr diff: -0.097560
2025-04-17 20:30:15,284 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,284 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,284 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,284 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 520.895
2025-04-17 20:30:15,284 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,284 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,284 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:43:00
2025-04-17 20:30:15,284 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:43:00, Close: 521.085
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9244, Slow SMA = 520.9798
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.097560, Curr diff: -0.055333
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:43:00, Close: 521.085
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9710, Slow SMA = 520.9841
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.055333, Curr diff: -0.013107
2025-04-17 20:30:15,284 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:43:00, Close: 521.085
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0090, Slow SMA = 520.9884
2025-04-17 20:30:15,284 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.013107, Curr diff: 0.020560
2025-04-17 20:30:15,284 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 13:43:00
2025-04-17 20:30:15,284 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,284 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.085
2025-04-17 20:30:15,284 - src.position_management.position_manager - INFO - Current positions for SPY: 0 total, 0 in same direction, 0 in opposite direction
2025-04-17 20:30:15,284 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,284 - src.position_management.position_manager - INFO - Created LONG position entry action for SPY size 10
2025-04-17 20:30:15,284 - src.position_management.position_manager - INFO - Created 1 position actions: ['entry']
2025-04-17 20:30:15,284 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,284 - src.engine.execution_engine - INFO - Created order from position action: SPY BUY 10 @ 521.085
2025-04-17 20:30:15,284 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,284 - src.engine.execution_engine - INFO - Order received: OrderEvent(BUY 10 SPY @ 521.085, MARKET, ID: c46914eb-739d-4839-9b92-93f409c2eecb)
2025-04-17 20:30:15,284 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(BUY 10 SPY @ 521.085, MARKET, ID: c46914eb-739d-4839-9b92-93f409c2eecb)
2025-04-17 20:30:15,284 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,284 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(BUY 10 SPY @ 521.085, MARKET, ID: c46914eb-739d-4839-9b92-93f409c2eecb)
2025-04-17 20:30:15,284 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,284 - __main__ - DEBUG - Order details: BUY 10 SPY @ 521.085
2025-04-17 20:30:15,284 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(BUY 10 SPY @ 521.085, MARKET, ID: c46914eb-739d-4839-9b92-93f409c2eecb)
2025-04-17 20:30:15,284 - src.position_management.position - INFO - Position opened: 27d2f222-50e4-4300-9a31-b18448275586 SPY LONG 10 @ 521.085
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,285 - src.position_management.portfolio - INFO - Position opened: 27d2f222-50e4-4300-9a31-b18448275586 SPY LONG 10 @ 521.085
2025-04-17 20:30:15,285 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,285 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,285 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,285 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,285 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.085
2025-04-17 20:30:15,285 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.085
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,285 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,285 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.085
2025-04-17 20:30:15,285 - src.position_management.position - INFO - Position closed: 27d2f222-50e4-4300-9a31-b18448275586 SPY LONG 10 @ 521.085 P&L: 0.00
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,285 - src.position_management.portfolio - INFO - Position closed: 27d2f222-50e4-4300-9a31-b18448275586 SPY PnL: 0.00
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,285 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.085
2025-04-17 20:30:15,285 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,285 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,285 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,285 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.085
2025-04-17 20:30:15,285 - src.position_management.position - INFO - Position opened: fd00e020-e169-4c43-bc68-8ed4b56ada31 SPY LONG 10 @ 521.085
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,285 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.085
2025-04-17 20:30:15,285 - src.position_management.position - INFO - Position increased: fd00e020-e169-4c43-bc68-8ed4b56ada31 SPY LONG +10 @ 521.085 New size: 20, Avg price: 521.0850
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,285 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,285 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,285 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.085
2025-04-17 20:30:15,285 - src.position_management.position - INFO - Position increased: fd00e020-e169-4c43-bc68-8ed4b56ada31 SPY LONG +10 @ 521.085 New size: 30, Avg price: 521.0850
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,285 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.085
2025-04-17 20:30:15,285 - src.position_management.position - INFO - Position increased: fd00e020-e169-4c43-bc68-8ed4b56ada31 SPY LONG +10 @ 521.085 New size: 40, Avg price: 521.0850
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,285 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,285 - src.engine.backtester - DEBUG - Executed 3 fills
2025-04-17 20:30:15,285 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:44:00
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:44:00, Close: 521.155
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0610, Slow SMA = 520.9928
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.020560, Curr diff: 0.068227
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:44:00, Close: 521.155
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1130, Slow SMA = 520.9971
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.068227, Curr diff: 0.115893
2025-04-17 20:30:15,285 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:44:00, Close: 521.155
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1270, Slow SMA = 521.0014
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.115893, Curr diff: 0.125560
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,285 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:45:00
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:45:00, Close: 521.066
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1232, Slow SMA = 521.0045
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.125560, Curr diff: 0.118693
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:45:00, Close: 521.066
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1194, Slow SMA = 521.0076
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.118693, Curr diff: 0.111827
2025-04-17 20:30:15,285 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:45:00, Close: 521.066
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1016, Slow SMA = 521.0106
2025-04-17 20:30:15,285 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.111827, Curr diff: 0.090960
2025-04-17 20:30:15,285 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,285 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,286 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:46:00
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:46:00, Close: 521.11
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0926, Slow SMA = 521.0278
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.090960, Curr diff: 0.064773
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:46:00, Close: 521.11
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0836, Slow SMA = 521.0450
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.064773, Curr diff: 0.038587
2025-04-17 20:30:15,286 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:46:00, Close: 521.11
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0924, Slow SMA = 521.0622
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.038587, Curr diff: 0.030200
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,286 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,286 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:47:00
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:47:00, Close: 521.09
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0972, Slow SMA = 521.0752
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.030200, Curr diff: 0.022000
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:47:00, Close: 521.09
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1020, Slow SMA = 521.0882
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.022000, Curr diff: 0.013800
2025-04-17 20:30:15,286 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:47:00, Close: 521.09
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0980, Slow SMA = 521.1012
2025-04-17 20:30:15,286 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.013800, Curr diff: -0.003200
2025-04-17 20:30:15,286 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 13:47:00
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,286 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.09
2025-04-17 20:30:15,286 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,286 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,286 - src.position_management.position_manager - INFO - Created exit action for position fd00e020-e169-4c43-bc68-8ed4b56ada31 due to signal direction change
2025-04-17 20:30:15,286 - src.position_management.position_manager - INFO - Created SHORT position entry action for SPY size 10
2025-04-17 20:30:15,286 - src.position_management.position_manager - INFO - Created 2 position actions: ['exit', 'entry']
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,286 - src.position_management.position - INFO - Position closed: fd00e020-e169-4c43-bc68-8ed4b56ada31 SPY LONG 40 @ 521.09 P&L: 0.20
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,286 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,286 - src.position_management.portfolio - INFO - Position closed: fd00e020-e169-4c43-bc68-8ed4b56ada31 SPY PnL: 0.20
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting POSITION_CLOSED event
2025-04-17 20:30:15,286 - __main__ - DEBUG - Event trace: POSITION_CLOSED received
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,286 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,286 - src.position_management.portfolio - INFO - Position closed: fd00e020-e169-4c43-bc68-8ed4b56ada31 PnL: 0.20
2025-04-17 20:30:15,286 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,286 - src.engine.backtester - DEBUG - Position action details: exit for SPY
2025-04-17 20:30:15,286 - src.position_management.position_manager - INFO - Emitted position action: exit for SPY
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,286 - src.engine.execution_engine - INFO - Created order from position action: SPY SELL 10 @ 521.09
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,286 - src.engine.execution_engine - INFO - Order received: OrderEvent(SELL 10 SPY @ 521.09, MARKET, ID: 696b38fb-ccd3-4e67-b838-b1de182581fc)
2025-04-17 20:30:15,286 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(SELL 10 SPY @ 521.09, MARKET, ID: 696b38fb-ccd3-4e67-b838-b1de182581fc)
2025-04-17 20:30:15,286 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,286 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(SELL 10 SPY @ 521.09, MARKET, ID: 696b38fb-ccd3-4e67-b838-b1de182581fc)
2025-04-17 20:30:15,286 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,286 - __main__ - DEBUG - Order details: SELL 10 SPY @ 521.09
2025-04-17 20:30:15,286 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(SELL 10 SPY @ 521.09, MARKET, ID: 696b38fb-ccd3-4e67-b838-b1de182581fc)
2025-04-17 20:30:15,286 - src.position_management.position - INFO - Position opened: 713e0a7a-8352-460a-8070-78f01140fac8 SPY SHORT 10 @ 521.09
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,286 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,286 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,286 - src.position_management.portfolio - INFO - Position opened: 713e0a7a-8352-460a-8070-78f01140fac8 SPY SHORT 10 @ 521.09
2025-04-17 20:30:15,286 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,286 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,286 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,286 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,286 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.09
2025-04-17 20:30:15,286 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.09
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,286 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,286 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,286 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.09
2025-04-17 20:30:15,286 - src.position_management.position - INFO - Position closed: 713e0a7a-8352-460a-8070-78f01140fac8 SPY SHORT 10 @ 521.09 P&L: 0.00
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,286 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,286 - src.position_management.portfolio - INFO - Position closed: 713e0a7a-8352-460a-8070-78f01140fac8 SPY PnL: 0.00
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,286 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,286 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,286 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.09
2025-04-17 20:30:15,286 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,286 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,286 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,286 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,286 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.09
2025-04-17 20:30:15,286 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,287 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,287 - src.engine.backtester - DEBUG - Executed 1 fills
2025-04-17 20:30:15,287 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:48:00
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,287 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:48:00, Close: 521.17
2025-04-17 20:30:15,287 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1100, Slow SMA = 521.1069
2025-04-17 20:30:15,287 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.003200, Curr diff: 0.003133
2025-04-17 20:30:15,287 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 13:48:00
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,287 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.17
2025-04-17 20:30:15,287 - src.position_management.position_manager - INFO - Current positions for SPY: 0 total, 0 in same direction, 0 in opposite direction
2025-04-17 20:30:15,287 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,287 - src.position_management.position_manager - INFO - Created LONG position entry action for SPY size 10
2025-04-17 20:30:15,287 - src.position_management.position_manager - INFO - Created 1 position actions: ['entry']
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,287 - src.engine.execution_engine - INFO - Created order from position action: SPY BUY 10 @ 521.17
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,287 - src.engine.execution_engine - INFO - Order received: OrderEvent(BUY 10 SPY @ 521.17, MARKET, ID: 0998452e-d70b-466c-b495-306d2045c680)
2025-04-17 20:30:15,287 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(BUY 10 SPY @ 521.17, MARKET, ID: 0998452e-d70b-466c-b495-306d2045c680)
2025-04-17 20:30:15,287 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,287 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(BUY 10 SPY @ 521.17, MARKET, ID: 0998452e-d70b-466c-b495-306d2045c680)
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,287 - __main__ - DEBUG - Order details: BUY 10 SPY @ 521.17
2025-04-17 20:30:15,287 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(BUY 10 SPY @ 521.17, MARKET, ID: 0998452e-d70b-466c-b495-306d2045c680)
2025-04-17 20:30:15,287 - src.position_management.position - INFO - Position opened: efab957c-9b6b-4245-bf20-b169f5910489 SPY LONG 10 @ 521.17
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,287 - src.position_management.portfolio - INFO - Position opened: efab957c-9b6b-4245-bf20-b169f5910489 SPY LONG 10 @ 521.17
2025-04-17 20:30:15,287 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,287 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,287 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,287 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,287 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.17
2025-04-17 20:30:15,287 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.17
2025-04-17 20:30:15,287 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:48:00, Close: 521.17
2025-04-17 20:30:15,287 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1220, Slow SMA = 521.1125
2025-04-17 20:30:15,287 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.003133, Curr diff: 0.009467
2025-04-17 20:30:15,287 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,287 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:48:00, Close: 521.17
2025-04-17 20:30:15,287 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1380, Slow SMA = 521.1182
2025-04-17 20:30:15,287 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.009467, Curr diff: 0.019800
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,287 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,287 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.17
2025-04-17 20:30:15,287 - src.position_management.position - INFO - Position closed: efab957c-9b6b-4245-bf20-b169f5910489 SPY LONG 10 @ 521.17 P&L: 0.00
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,287 - src.position_management.portfolio - INFO - Position closed: efab957c-9b6b-4245-bf20-b169f5910489 SPY PnL: 0.00
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,287 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.17
2025-04-17 20:30:15,287 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,287 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,287 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,287 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.17
2025-04-17 20:30:15,287 - src.position_management.position - INFO - Position opened: 631d0e69-f1c9-4218-b823-8e81da564b20 SPY LONG 10 @ 521.17
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,287 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.17
2025-04-17 20:30:15,287 - src.position_management.position - INFO - Position increased: 631d0e69-f1c9-4218-b823-8e81da564b20 SPY LONG +10 @ 521.17 New size: 20, Avg price: 521.1700
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,287 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,287 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,287 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.17
2025-04-17 20:30:15,287 - src.position_management.position - INFO - Position increased: 631d0e69-f1c9-4218-b823-8e81da564b20 SPY LONG +10 @ 521.17 New size: 30, Avg price: 521.1700
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,287 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.17
2025-04-17 20:30:15,287 - src.position_management.position - INFO - Position increased: 631d0e69-f1c9-4218-b823-8e81da564b20 SPY LONG +10 @ 521.17 New size: 40, Avg price: 521.1700
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,287 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,287 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,287 - src.engine.backtester - DEBUG - Executed 3 fills
2025-04-17 20:30:15,287 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:49:00
2025-04-17 20:30:15,287 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,287 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:49:00, Close: 521.19
2025-04-17 20:30:15,287 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1580, Slow SMA = 521.1205
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.019800, Curr diff: 0.037467
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:49:00, Close: 521.19
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1780, Slow SMA = 521.1229
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.037467, Curr diff: 0.055133
2025-04-17 20:30:15,288 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:49:00, Close: 521.19
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1820, Slow SMA = 521.1252
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.055133, Curr diff: 0.056800
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,288 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,288 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:50:00
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:50:00, Close: 521.215
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1910, Slow SMA = 521.1351
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.056800, Curr diff: 0.055867
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:50:00, Close: 521.215
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2000, Slow SMA = 521.1451
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.055867, Curr diff: 0.054933
2025-04-17 20:30:15,288 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:50:00, Close: 521.215
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2050, Slow SMA = 521.1550
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.054933, Curr diff: 0.050000
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,288 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,288 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:51:00
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:51:00, Close: 521.08
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1830, Slow SMA = 521.1530
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.050000, Curr diff: 0.030000
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:51:00, Close: 521.08
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1610, Slow SMA = 521.1510
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.030000, Curr diff: 0.010000
2025-04-17 20:30:15,288 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:51:00, Close: 521.08
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1340, Slow SMA = 521.1490
2025-04-17 20:30:15,288 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.010000, Curr diff: -0.015000
2025-04-17 20:30:15,288 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 13:51:00
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,288 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.08
2025-04-17 20:30:15,288 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,288 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,288 - src.position_management.position_manager - INFO - Created exit action for position 631d0e69-f1c9-4218-b823-8e81da564b20 due to signal direction change
2025-04-17 20:30:15,288 - src.position_management.position_manager - INFO - Created SHORT position entry action for SPY size 10
2025-04-17 20:30:15,288 - src.position_management.position_manager - INFO - Created 2 position actions: ['exit', 'entry']
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,288 - src.position_management.position - INFO - Position closed: 631d0e69-f1c9-4218-b823-8e81da564b20 SPY LONG 40 @ 521.08 P&L: -3.60
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,288 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,288 - src.position_management.portfolio - INFO - Position closed: 631d0e69-f1c9-4218-b823-8e81da564b20 SPY PnL: -3.60
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting POSITION_CLOSED event
2025-04-17 20:30:15,288 - __main__ - DEBUG - Event trace: POSITION_CLOSED received
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,288 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,288 - src.position_management.portfolio - INFO - Position closed: 631d0e69-f1c9-4218-b823-8e81da564b20 PnL: -3.60
2025-04-17 20:30:15,288 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,288 - src.engine.backtester - DEBUG - Position action details: exit for SPY
2025-04-17 20:30:15,288 - src.position_management.position_manager - INFO - Emitted position action: exit for SPY
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,288 - src.engine.execution_engine - INFO - Created order from position action: SPY SELL 10 @ 521.08
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,288 - src.engine.execution_engine - INFO - Order received: OrderEvent(SELL 10 SPY @ 521.08, MARKET, ID: 7d04f7c3-8576-4581-b684-a7ede5481b54)
2025-04-17 20:30:15,288 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(SELL 10 SPY @ 521.08, MARKET, ID: 7d04f7c3-8576-4581-b684-a7ede5481b54)
2025-04-17 20:30:15,288 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,288 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(SELL 10 SPY @ 521.08, MARKET, ID: 7d04f7c3-8576-4581-b684-a7ede5481b54)
2025-04-17 20:30:15,288 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,288 - __main__ - DEBUG - Order details: SELL 10 SPY @ 521.08
2025-04-17 20:30:15,288 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(SELL 10 SPY @ 521.08, MARKET, ID: 7d04f7c3-8576-4581-b684-a7ede5481b54)
2025-04-17 20:30:15,288 - src.position_management.position - INFO - Position opened: 11af17cc-f1d2-4eff-9e58-b856b19758de SPY SHORT 10 @ 521.08
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,288 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,288 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,288 - src.position_management.portfolio - INFO - Position opened: 11af17cc-f1d2-4eff-9e58-b856b19758de SPY SHORT 10 @ 521.08
2025-04-17 20:30:15,288 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,288 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,288 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,288 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,288 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.08
2025-04-17 20:30:15,288 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.08
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,288 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,288 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,288 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.08
2025-04-17 20:30:15,288 - src.position_management.position - INFO - Position closed: 11af17cc-f1d2-4eff-9e58-b856b19758de SPY SHORT 10 @ 521.08 P&L: 0.00
2025-04-17 20:30:15,288 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,289 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,289 - src.position_management.portfolio - INFO - Position closed: 11af17cc-f1d2-4eff-9e58-b856b19758de SPY PnL: 0.00
2025-04-17 20:30:15,289 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,289 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,289 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,289 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.08
2025-04-17 20:30:15,289 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,289 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,289 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,289 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,289 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.08
2025-04-17 20:30:15,289 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,289 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,289 - src.engine.backtester - DEBUG - Executed 1 fills
2025-04-17 20:30:15,289 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:52:00
2025-04-17 20:30:15,289 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:52:00, Close: 521.12
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1150, Slow SMA = 521.1510
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015000, Curr diff: -0.036000
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:52:00, Close: 521.12
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0960, Slow SMA = 521.1530
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.036000, Curr diff: -0.057000
2025-04-17 20:30:15,289 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:52:00, Close: 521.12
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1040, Slow SMA = 521.1550
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.057000, Curr diff: -0.051000
2025-04-17 20:30:15,289 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,289 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,289 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,289 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.12
2025-04-17 20:30:15,289 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,289 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,289 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:53:00
2025-04-17 20:30:15,289 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:53:00, Close: 521.0069
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0894, Slow SMA = 521.1441
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.051000, Curr diff: -0.054747
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:53:00, Close: 521.0069
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0748, Slow SMA = 521.1333
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.054747, Curr diff: -0.058493
2025-04-17 20:30:15,289 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:53:00, Close: 521.0069
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0521, Slow SMA = 521.1224
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.058493, Curr diff: -0.070240
2025-04-17 20:30:15,289 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,289 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,289 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,289 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.0069
2025-04-17 20:30:15,289 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,289 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,289 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:54:00
2025-04-17 20:30:15,289 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:54:00, Close: 520.955
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0191, Slow SMA = 521.1067
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.070240, Curr diff: -0.087573
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:54:00, Close: 520.955
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9861, Slow SMA = 521.0910
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.087573, Curr diff: -0.104907
2025-04-17 20:30:15,289 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:54:00, Close: 520.955
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9758, Slow SMA = 521.0754
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.104907, Curr diff: -0.099620
2025-04-17 20:30:15,289 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,289 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,289 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,289 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 520.955
2025-04-17 20:30:15,289 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,289 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,289 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:55:00
2025-04-17 20:30:15,289 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:55:00, Close: 521.04
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9824, Slow SMA = 521.0637
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.099620, Curr diff: -0.081333
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:55:00, Close: 521.04
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9890, Slow SMA = 521.0520
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.081333, Curr diff: -0.063047
2025-04-17 20:30:15,289 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:55:00, Close: 521.04
2025-04-17 20:30:15,289 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0060, Slow SMA = 521.0404
2025-04-17 20:30:15,290 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.063047, Curr diff: -0.034380
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,290 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,290 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.04
2025-04-17 20:30:15,290 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,290 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,290 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:56:00
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,290 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:56:00, Close: 521.145
2025-04-17 20:30:15,290 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0440, Slow SMA = 521.0447
2025-04-17 20:30:15,290 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.034380, Curr diff: -0.000713
2025-04-17 20:30:15,290 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:56:00, Close: 521.145
2025-04-17 20:30:15,290 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0820, Slow SMA = 521.0490
2025-04-17 20:30:15,290 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.000713, Curr diff: 0.032953
2025-04-17 20:30:15,290 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 13:56:00
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,290 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.145
2025-04-17 20:30:15,290 - src.position_management.position_manager - INFO - Current positions for SPY: 0 total, 0 in same direction, 0 in opposite direction
2025-04-17 20:30:15,290 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,290 - src.position_management.position_manager - INFO - Created LONG position entry action for SPY size 10
2025-04-17 20:30:15,290 - src.position_management.position_manager - INFO - Created 1 position actions: ['entry']
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,290 - src.engine.execution_engine - INFO - Created order from position action: SPY BUY 10 @ 521.145
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,290 - src.engine.execution_engine - INFO - Order received: OrderEvent(BUY 10 SPY @ 521.145, MARKET, ID: bba8f326-d1f8-4bca-9b48-0a18fd73f47d)
2025-04-17 20:30:15,290 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(BUY 10 SPY @ 521.145, MARKET, ID: bba8f326-d1f8-4bca-9b48-0a18fd73f47d)
2025-04-17 20:30:15,290 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,290 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(BUY 10 SPY @ 521.145, MARKET, ID: bba8f326-d1f8-4bca-9b48-0a18fd73f47d)
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,290 - __main__ - DEBUG - Order details: BUY 10 SPY @ 521.145
2025-04-17 20:30:15,290 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(BUY 10 SPY @ 521.145, MARKET, ID: bba8f326-d1f8-4bca-9b48-0a18fd73f47d)
2025-04-17 20:30:15,290 - src.position_management.position - INFO - Position opened: 03721338-a7d5-42c1-95f3-a9cdc0d48ad8 SPY LONG 10 @ 521.145
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,290 - src.position_management.portfolio - INFO - Position opened: 03721338-a7d5-42c1-95f3-a9cdc0d48ad8 SPY LONG 10 @ 521.145
2025-04-17 20:30:15,290 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,290 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,290 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,290 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,290 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.145
2025-04-17 20:30:15,290 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.145
2025-04-17 20:30:15,290 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,290 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:56:00, Close: 521.145
2025-04-17 20:30:15,290 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1030, Slow SMA = 521.0534
2025-04-17 20:30:15,290 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.032953, Curr diff: 0.049620
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,290 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,290 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.145
2025-04-17 20:30:15,290 - src.position_management.position - INFO - Position closed: 03721338-a7d5-42c1-95f3-a9cdc0d48ad8 SPY LONG 10 @ 521.145 P&L: 0.00
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,290 - src.position_management.portfolio - INFO - Position closed: 03721338-a7d5-42c1-95f3-a9cdc0d48ad8 SPY PnL: 0.00
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,290 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.145
2025-04-17 20:30:15,290 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,290 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,290 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,290 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.145
2025-04-17 20:30:15,290 - src.position_management.position - INFO - Position opened: bfb11ed6-2304-4223-b3a2-0d56a054320e SPY LONG 10 @ 521.145
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,290 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.145
2025-04-17 20:30:15,290 - src.position_management.position - INFO - Position increased: bfb11ed6-2304-4223-b3a2-0d56a054320e SPY LONG +10 @ 521.145 New size: 20, Avg price: 521.1450
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,290 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,290 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,290 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.145
2025-04-17 20:30:15,290 - src.position_management.position - INFO - Position increased: bfb11ed6-2304-4223-b3a2-0d56a054320e SPY LONG +10 @ 521.145 New size: 30, Avg price: 521.1450
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,290 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.145
2025-04-17 20:30:15,290 - src.position_management.position - INFO - Position increased: bfb11ed6-2304-4223-b3a2-0d56a054320e SPY LONG +10 @ 521.145 New size: 40, Avg price: 521.1450
2025-04-17 20:30:15,290 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,290 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,290 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,290 - src.engine.backtester - DEBUG - Executed 3 fills
2025-04-17 20:30:15,290 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:57:00
2025-04-17 20:30:15,291 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:57:00, Close: 521.125
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1200, Slow SMA = 521.0537
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.049620, Curr diff: 0.066287
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:57:00, Close: 521.125
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1370, Slow SMA = 521.0540
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.066287, Curr diff: 0.082953
2025-04-17 20:30:15,291 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:57:00, Close: 521.125
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1330, Slow SMA = 521.0544
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.082953, Curr diff: 0.078620
2025-04-17 20:30:15,291 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,291 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,291 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:58:00
2025-04-17 20:30:15,291 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:58:00, Close: 521.14
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1320, Slow SMA = 521.0633
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.078620, Curr diff: 0.068747
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:58:00, Close: 521.14
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1310, Slow SMA = 521.0721
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.068747, Curr diff: 0.058873
2025-04-17 20:30:15,291 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:58:00, Close: 521.14
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1340, Slow SMA = 521.0810
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.058873, Curr diff: 0.053000
2025-04-17 20:30:15,291 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,291 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,291 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 13:59:00
2025-04-17 20:30:15,291 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:59:00, Close: 521.25
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1590, Slow SMA = 521.1007
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.053000, Curr diff: 0.058333
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:59:00, Close: 521.25
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1840, Slow SMA = 521.1203
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.058333, Curr diff: 0.063667
2025-04-17 20:30:15,291 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 13:59:00, Close: 521.25
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2060, Slow SMA = 521.1400
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.063667, Curr diff: 0.066000
2025-04-17 20:30:15,291 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,291 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,291 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:00:00
2025-04-17 20:30:15,291 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:00:00, Close: 521.35
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2480, Slow SMA = 521.1607
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.066000, Curr diff: 0.087333
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:00:00, Close: 521.35
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2900, Slow SMA = 521.1813
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.087333, Curr diff: 0.108667
2025-04-17 20:30:15,291 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:00:00, Close: 521.35
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3100, Slow SMA = 521.2020
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.108667, Curr diff: 0.108000
2025-04-17 20:30:15,291 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,291 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,291 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:01:00
2025-04-17 20:30:15,291 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:01:00, Close: 521.2801
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3160, Slow SMA = 521.2110
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.108000, Curr diff: 0.105013
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:01:00, Close: 521.2801
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3220, Slow SMA = 521.2200
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.105013, Curr diff: 0.102027
2025-04-17 20:30:15,291 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:01:00, Close: 521.2801
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3081, Slow SMA = 521.2290
2025-04-17 20:30:15,291 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.102027, Curr diff: 0.079040
2025-04-17 20:30:15,291 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,291 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,291 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:02:00
2025-04-17 20:30:15,291 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:02:00, Close: 521.29
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2961, Slow SMA = 521.2400
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.079040, Curr diff: 0.056040
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:02:00, Close: 521.29
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2841, Slow SMA = 521.2510
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.056040, Curr diff: 0.033040
2025-04-17 20:30:15,292 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:02:00, Close: 521.29
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2860, Slow SMA = 521.2620
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.033040, Curr diff: 0.024020
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,292 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,292 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:03:00
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:03:00, Close: 521.25
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2800, Slow SMA = 521.2694
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.024020, Curr diff: 0.010667
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:03:00, Close: 521.25
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2740, Slow SMA = 521.2767
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.010667, Curr diff: -0.002687
2025-04-17 20:30:15,292 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 14:03:00
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,292 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.25
2025-04-17 20:30:15,292 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,292 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,292 - src.position_management.position_manager - INFO - Created exit action for position bfb11ed6-2304-4223-b3a2-0d56a054320e due to signal direction change
2025-04-17 20:30:15,292 - src.position_management.position_manager - INFO - Created SHORT position entry action for SPY size 10
2025-04-17 20:30:15,292 - src.position_management.position_manager - INFO - Created 2 position actions: ['exit', 'entry']
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,292 - src.position_management.position - INFO - Position closed: bfb11ed6-2304-4223-b3a2-0d56a054320e SPY LONG 40 @ 521.25 P&L: 4.20
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,292 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,292 - src.position_management.portfolio - INFO - Position closed: bfb11ed6-2304-4223-b3a2-0d56a054320e SPY PnL: 4.20
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting POSITION_CLOSED event
2025-04-17 20:30:15,292 - __main__ - DEBUG - Event trace: POSITION_CLOSED received
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,292 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,292 - src.position_management.portfolio - INFO - Position closed: bfb11ed6-2304-4223-b3a2-0d56a054320e PnL: 4.20
2025-04-17 20:30:15,292 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,292 - src.engine.backtester - DEBUG - Position action details: exit for SPY
2025-04-17 20:30:15,292 - src.position_management.position_manager - INFO - Emitted position action: exit for SPY
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,292 - src.engine.execution_engine - INFO - Created order from position action: SPY SELL 10 @ 521.25
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,292 - src.engine.execution_engine - INFO - Order received: OrderEvent(SELL 10 SPY @ 521.25, MARKET, ID: cf076dc7-d517-4c11-9421-cca7bb201baf)
2025-04-17 20:30:15,292 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(SELL 10 SPY @ 521.25, MARKET, ID: cf076dc7-d517-4c11-9421-cca7bb201baf)
2025-04-17 20:30:15,292 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,292 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(SELL 10 SPY @ 521.25, MARKET, ID: cf076dc7-d517-4c11-9421-cca7bb201baf)
2025-04-17 20:30:15,292 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,292 - __main__ - DEBUG - Order details: SELL 10 SPY @ 521.25
2025-04-17 20:30:15,292 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(SELL 10 SPY @ 521.25, MARKET, ID: cf076dc7-d517-4c11-9421-cca7bb201baf)
2025-04-17 20:30:15,292 - src.position_management.position - INFO - Position opened: 2c771647-4cc1-4e16-a574-79365d2c3c79 SPY SHORT 10 @ 521.25
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,292 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,292 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,292 - src.position_management.portfolio - INFO - Position opened: 2c771647-4cc1-4e16-a574-79365d2c3c79 SPY SHORT 10 @ 521.25
2025-04-17 20:30:15,292 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,292 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,292 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,292 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,292 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.25
2025-04-17 20:30:15,292 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.25
2025-04-17 20:30:15,292 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:03:00, Close: 521.25
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2660, Slow SMA = 521.2840
2025-04-17 20:30:15,292 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.002687, Curr diff: -0.018020
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,292 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,292 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,292 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.25
2025-04-17 20:30:15,292 - src.position_management.position - INFO - Position closed: 2c771647-4cc1-4e16-a574-79365d2c3c79 SPY SHORT 10 @ 521.25 P&L: 0.00
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,292 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,292 - src.position_management.portfolio - INFO - Position closed: 2c771647-4cc1-4e16-a574-79365d2c3c79 SPY PnL: 0.00
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,292 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,292 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,292 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.25
2025-04-17 20:30:15,292 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,292 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,292 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,292 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,292 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.25
2025-04-17 20:30:15,292 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,292 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,292 - src.engine.backtester - DEBUG - Executed 1 fills
2025-04-17 20:30:15,293 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:04:00
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:04:00, Close: 521.33
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2740, Slow SMA = 521.2894
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.018020, Curr diff: -0.015353
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:04:00, Close: 521.33
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2820, Slow SMA = 521.2947
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015353, Curr diff: -0.012687
2025-04-17 20:30:15,293 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:04:00, Close: 521.33
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2980, Slow SMA = 521.3000
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.012687, Curr diff: -0.002020
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,293 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,293 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.33
2025-04-17 20:30:15,293 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,293 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,293 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:05:00
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:05:00, Close: 521.31
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3100, Slow SMA = 521.2974
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.002020, Curr diff: 0.012647
2025-04-17 20:30:15,293 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 14:05:00
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,293 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.31
2025-04-17 20:30:15,293 - src.position_management.position_manager - INFO - Current positions for SPY: 0 total, 0 in same direction, 0 in opposite direction
2025-04-17 20:30:15,293 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,293 - src.position_management.position_manager - INFO - Created LONG position entry action for SPY size 10
2025-04-17 20:30:15,293 - src.position_management.position_manager - INFO - Created 1 position actions: ['entry']
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,293 - src.engine.execution_engine - INFO - Created order from position action: SPY BUY 10 @ 521.31
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,293 - src.engine.execution_engine - INFO - Order received: OrderEvent(BUY 10 SPY @ 521.31, MARKET, ID: 9a89b730-e367-4201-bc50-1c72d64c201f)
2025-04-17 20:30:15,293 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(BUY 10 SPY @ 521.31, MARKET, ID: 9a89b730-e367-4201-bc50-1c72d64c201f)
2025-04-17 20:30:15,293 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,293 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(BUY 10 SPY @ 521.31, MARKET, ID: 9a89b730-e367-4201-bc50-1c72d64c201f)
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,293 - __main__ - DEBUG - Order details: BUY 10 SPY @ 521.31
2025-04-17 20:30:15,293 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(BUY 10 SPY @ 521.31, MARKET, ID: 9a89b730-e367-4201-bc50-1c72d64c201f)
2025-04-17 20:30:15,293 - src.position_management.position - INFO - Position opened: 3244413d-28c3-44cd-ae04-b03c94baab1b SPY LONG 10 @ 521.31
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,293 - src.position_management.portfolio - INFO - Position opened: 3244413d-28c3-44cd-ae04-b03c94baab1b SPY LONG 10 @ 521.31
2025-04-17 20:30:15,293 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,293 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,293 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,293 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,293 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.31
2025-04-17 20:30:15,293 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.31
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:05:00, Close: 521.31
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3220, Slow SMA = 521.2947
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.012647, Curr diff: 0.027313
2025-04-17 20:30:15,293 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:05:00, Close: 521.31
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3180, Slow SMA = 521.2920
2025-04-17 20:30:15,293 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.027313, Curr diff: 0.025980
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,293 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,293 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.31
2025-04-17 20:30:15,293 - src.position_management.position - INFO - Position closed: 3244413d-28c3-44cd-ae04-b03c94baab1b SPY LONG 10 @ 521.31 P&L: 0.00
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,293 - src.position_management.portfolio - INFO - Position closed: 3244413d-28c3-44cd-ae04-b03c94baab1b SPY PnL: 0.00
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,293 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.31
2025-04-17 20:30:15,293 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,293 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,293 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,293 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.31
2025-04-17 20:30:15,293 - src.position_management.position - INFO - Position opened: 6b73b2ad-71e3-412e-be17-b1ba70a68ac3 SPY LONG 10 @ 521.31
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,293 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.31
2025-04-17 20:30:15,293 - src.position_management.position - INFO - Position increased: 6b73b2ad-71e3-412e-be17-b1ba70a68ac3 SPY LONG +10 @ 521.31 New size: 20, Avg price: 521.3100
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,293 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,293 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,293 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.31
2025-04-17 20:30:15,293 - src.position_management.position - INFO - Position increased: 6b73b2ad-71e3-412e-be17-b1ba70a68ac3 SPY LONG +10 @ 521.31 New size: 30, Avg price: 521.3100
2025-04-17 20:30:15,293 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,293 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,294 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.31
2025-04-17 20:30:15,294 - src.position_management.position - INFO - Position increased: 6b73b2ad-71e3-412e-be17-b1ba70a68ac3 SPY LONG +10 @ 521.31 New size: 40, Avg price: 521.3100
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,294 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,294 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,294 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,294 - src.engine.backtester - DEBUG - Executed 3 fills
2025-04-17 20:30:15,294 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:06:00
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:06:00, Close: 521.3
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3120, Slow SMA = 521.2933
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.025980, Curr diff: 0.018653
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:06:00, Close: 521.3
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3060, Slow SMA = 521.2947
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.018653, Curr diff: 0.011327
2025-04-17 20:30:15,294 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:06:00, Close: 521.3
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3040, Slow SMA = 521.2960
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.011327, Curr diff: 0.008000
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,294 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,294 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:07:00
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:07:00, Close: 521.43
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3280, Slow SMA = 521.3053
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.008000, Curr diff: 0.022667
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:07:00, Close: 521.43
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3520, Slow SMA = 521.3147
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.022667, Curr diff: 0.037333
2025-04-17 20:30:15,294 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:07:00, Close: 521.43
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3780, Slow SMA = 521.3240
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.037333, Curr diff: 0.054000
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,294 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,294 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:08:00
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:08:00, Close: 521.38
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3940, Slow SMA = 521.3327
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.054000, Curr diff: 0.061333
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:08:00, Close: 521.38
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4100, Slow SMA = 521.3413
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.061333, Curr diff: 0.068667
2025-04-17 20:30:15,294 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:08:00, Close: 521.38
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4000, Slow SMA = 521.3500
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.068667, Curr diff: 0.050000
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,294 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,294 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:09:00
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:09:00, Close: 521.3
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3740, Slow SMA = 521.3480
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.050000, Curr diff: 0.026000
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:09:00, Close: 521.3
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3480, Slow SMA = 521.3460
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.026000, Curr diff: 0.002000
2025-04-17 20:30:15,294 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:09:00, Close: 521.3
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3320, Slow SMA = 521.3440
2025-04-17 20:30:15,294 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.002000, Curr diff: -0.012000
2025-04-17 20:30:15,294 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 14:09:00
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,294 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.3
2025-04-17 20:30:15,294 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,294 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,294 - src.position_management.position_manager - INFO - Created exit action for position 6b73b2ad-71e3-412e-be17-b1ba70a68ac3 due to signal direction change
2025-04-17 20:30:15,294 - src.position_management.position_manager - INFO - Created SHORT position entry action for SPY size 10
2025-04-17 20:30:15,294 - src.position_management.position_manager - INFO - Created 2 position actions: ['exit', 'entry']
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,294 - src.position_management.position - INFO - Position closed: 6b73b2ad-71e3-412e-be17-b1ba70a68ac3 SPY LONG 40 @ 521.3 P&L: -0.40
2025-04-17 20:30:15,294 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,294 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,294 - src.position_management.portfolio - INFO - Position closed: 6b73b2ad-71e3-412e-be17-b1ba70a68ac3 SPY PnL: -0.40
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting POSITION_CLOSED event
2025-04-17 20:30:15,295 - __main__ - DEBUG - Event trace: POSITION_CLOSED received
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,295 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,295 - src.position_management.portfolio - INFO - Position closed: 6b73b2ad-71e3-412e-be17-b1ba70a68ac3 PnL: -0.40
2025-04-17 20:30:15,295 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,295 - src.engine.backtester - DEBUG - Position action details: exit for SPY
2025-04-17 20:30:15,295 - src.position_management.position_manager - INFO - Emitted position action: exit for SPY
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,295 - src.engine.execution_engine - INFO - Created order from position action: SPY SELL 10 @ 521.3
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,295 - src.engine.execution_engine - INFO - Order received: OrderEvent(SELL 10 SPY @ 521.3, MARKET, ID: 483e5dd5-2d8f-435d-ba60-fe88c329641c)
2025-04-17 20:30:15,295 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(SELL 10 SPY @ 521.3, MARKET, ID: 483e5dd5-2d8f-435d-ba60-fe88c329641c)
2025-04-17 20:30:15,295 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,295 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(SELL 10 SPY @ 521.3, MARKET, ID: 483e5dd5-2d8f-435d-ba60-fe88c329641c)
2025-04-17 20:30:15,295 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,295 - __main__ - DEBUG - Order details: SELL 10 SPY @ 521.3
2025-04-17 20:30:15,295 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(SELL 10 SPY @ 521.3, MARKET, ID: 483e5dd5-2d8f-435d-ba60-fe88c329641c)
2025-04-17 20:30:15,295 - src.position_management.position - INFO - Position opened: 7747bd0c-cb06-4f8e-84df-6f496ff7467c SPY SHORT 10 @ 521.3
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,295 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,295 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,295 - src.position_management.portfolio - INFO - Position opened: 7747bd0c-cb06-4f8e-84df-6f496ff7467c SPY SHORT 10 @ 521.3
2025-04-17 20:30:15,295 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,295 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,295 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,295 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,295 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.3
2025-04-17 20:30:15,295 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.3
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,295 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,295 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,295 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.3
2025-04-17 20:30:15,295 - src.position_management.position - INFO - Position closed: 7747bd0c-cb06-4f8e-84df-6f496ff7467c SPY SHORT 10 @ 521.3 P&L: 0.00
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,295 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,295 - src.position_management.portfolio - INFO - Position closed: 7747bd0c-cb06-4f8e-84df-6f496ff7467c SPY PnL: 0.00
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,295 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,295 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.3
2025-04-17 20:30:15,295 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,295 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,295 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,295 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,295 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.3
2025-04-17 20:30:15,295 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,295 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,295 - src.engine.backtester - DEBUG - Executed 1 fills
2025-04-17 20:30:15,295 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:10:00
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:10:00, Close: 521.14
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2840, Slow SMA = 521.3327
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.012000, Curr diff: -0.048667
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:10:00, Close: 521.14
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2360, Slow SMA = 521.3213
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.048667, Curr diff: -0.085333
2025-04-17 20:30:15,295 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:10:00, Close: 521.14
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2040, Slow SMA = 521.3100
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.085333, Curr diff: -0.106000
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,295 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,295 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,295 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.14
2025-04-17 20:30:15,295 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,295 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,295 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:11:00
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:11:00, Close: 521.175
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1790, Slow SMA = 521.3017
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.106000, Curr diff: -0.122667
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:11:00, Close: 521.175
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1540, Slow SMA = 521.2933
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.122667, Curr diff: -0.139333
2025-04-17 20:30:15,295 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:11:00, Close: 521.175
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1610, Slow SMA = 521.2850
2025-04-17 20:30:15,295 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.139333, Curr diff: -0.124000
2025-04-17 20:30:15,295 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,295 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,295 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,295 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.175
2025-04-17 20:30:15,295 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,295 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,296 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:12:00
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:12:00, Close: 521.29
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1910, Slow SMA = 521.2757
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.124000, Curr diff: -0.084667
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:12:00, Close: 521.29
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2210, Slow SMA = 521.2663
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.084667, Curr diff: -0.045333
2025-04-17 20:30:15,296 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:12:00, Close: 521.29
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2440, Slow SMA = 521.2570
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.045333, Curr diff: -0.013000
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,296 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,296 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,296 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.29
2025-04-17 20:30:15,296 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,296 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,296 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:13:00
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:13:00, Close: 521.3001
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2690, Slow SMA = 521.2517
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.013000, Curr diff: 0.017347
2025-04-17 20:30:15,296 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 14:13:00
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,296 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.3001
2025-04-17 20:30:15,296 - src.position_management.position_manager - INFO - Current positions for SPY: 0 total, 0 in same direction, 0 in opposite direction
2025-04-17 20:30:15,296 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,296 - src.position_management.position_manager - INFO - Created LONG position entry action for SPY size 10
2025-04-17 20:30:15,296 - src.position_management.position_manager - INFO - Created 1 position actions: ['entry']
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,296 - src.engine.execution_engine - INFO - Created order from position action: SPY BUY 10 @ 521.3001
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,296 - src.engine.execution_engine - INFO - Order received: OrderEvent(BUY 10 SPY @ 521.3001, MARKET, ID: c674ed01-8078-46ff-a4db-e6ca9f777127)
2025-04-17 20:30:15,296 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(BUY 10 SPY @ 521.3001, MARKET, ID: c674ed01-8078-46ff-a4db-e6ca9f777127)
2025-04-17 20:30:15,296 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,296 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(BUY 10 SPY @ 521.3001, MARKET, ID: c674ed01-8078-46ff-a4db-e6ca9f777127)
2025-04-17 20:30:15,296 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,296 - __main__ - DEBUG - Order details: BUY 10 SPY @ 521.3001
2025-04-17 20:30:15,296 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(BUY 10 SPY @ 521.3001, MARKET, ID: c674ed01-8078-46ff-a4db-e6ca9f777127)
2025-04-17 20:30:15,296 - src.position_management.position - INFO - Position opened: 0c474c2c-6107-4f7b-9b2d-18e710ca29bf SPY LONG 10 @ 521.3001
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,296 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,296 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,296 - src.position_management.portfolio - INFO - Position opened: 0c474c2c-6107-4f7b-9b2d-18e710ca29bf SPY LONG 10 @ 521.3001
2025-04-17 20:30:15,296 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,296 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,296 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,296 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,296 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.3001
2025-04-17 20:30:15,296 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.3001
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:13:00, Close: 521.3001
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2940, Slow SMA = 521.2463
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.017347, Curr diff: 0.047693
2025-04-17 20:30:15,296 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:13:00, Close: 521.3001
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2961, Slow SMA = 521.2410
2025-04-17 20:30:15,296 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.047693, Curr diff: 0.055040
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,296 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,296 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,296 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.3001
2025-04-17 20:30:15,296 - src.position_management.position - INFO - Position closed: 0c474c2c-6107-4f7b-9b2d-18e710ca29bf SPY LONG 10 @ 521.3001 P&L: 0.00
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,296 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,296 - src.position_management.portfolio - INFO - Position closed: 0c474c2c-6107-4f7b-9b2d-18e710ca29bf SPY PnL: 0.00
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,296 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,296 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,296 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.3001
2025-04-17 20:30:15,296 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,297 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,297 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,297 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,297 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.3001
2025-04-17 20:30:15,297 - src.position_management.position - INFO - Position opened: cf200b4a-8980-4df1-b55f-ebb57f30f55d SPY LONG 10 @ 521.3001
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,297 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,297 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.3001
2025-04-17 20:30:15,297 - src.position_management.position - INFO - Position increased: cf200b4a-8980-4df1-b55f-ebb57f30f55d SPY LONG +10 @ 521.3001 New size: 20, Avg price: 521.3001
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,297 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,297 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,297 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,297 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,297 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.3001
2025-04-17 20:30:15,297 - src.position_management.position - INFO - Position increased: cf200b4a-8980-4df1-b55f-ebb57f30f55d SPY LONG +10 @ 521.3001 New size: 30, Avg price: 521.3001
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,297 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,297 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.3001
2025-04-17 20:30:15,297 - src.position_management.position - INFO - Position increased: cf200b4a-8980-4df1-b55f-ebb57f30f55d SPY LONG +10 @ 521.3001 New size: 40, Avg price: 521.3001
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,297 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,297 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,297 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,297 - src.engine.backtester - DEBUG - Executed 3 fills
2025-04-17 20:30:15,297 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:14:00
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:14:00, Close: 521.33
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3041, Slow SMA = 521.2430
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.055040, Curr diff: 0.061040
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:14:00, Close: 521.33
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3121, Slow SMA = 521.2450
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.061040, Curr diff: 0.067040
2025-04-17 20:30:15,297 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:14:00, Close: 521.33
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3180, Slow SMA = 521.2470
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.067040, Curr diff: 0.071020
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,297 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,297 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:15:00
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:15:00, Close: 521.275
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3130, Slow SMA = 521.2560
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.071020, Curr diff: 0.057000
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:15:00, Close: 521.275
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3080, Slow SMA = 521.2650
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.057000, Curr diff: 0.042980
2025-04-17 20:30:15,297 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:15:00, Close: 521.275
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2970, Slow SMA = 521.2740
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.042980, Curr diff: 0.022980
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,297 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,297 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:16:00
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:16:00, Close: 521.32
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2950, Slow SMA = 521.2837
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.022980, Curr diff: 0.011313
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:16:00, Close: 521.32
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2930, Slow SMA = 521.2934
2025-04-17 20:30:15,297 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.011313, Curr diff: -0.000353
2025-04-17 20:30:15,297 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 14:16:00
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,297 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.32
2025-04-17 20:30:15,297 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,297 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,297 - src.position_management.position_manager - INFO - Created exit action for position cf200b4a-8980-4df1-b55f-ebb57f30f55d due to signal direction change
2025-04-17 20:30:15,297 - src.position_management.position_manager - INFO - Created SHORT position entry action for SPY size 10
2025-04-17 20:30:15,297 - src.position_management.position_manager - INFO - Created 2 position actions: ['exit', 'entry']
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,297 - src.position_management.position - INFO - Position closed: cf200b4a-8980-4df1-b55f-ebb57f30f55d SPY LONG 40 @ 521.32 P&L: 0.80
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,297 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,297 - src.position_management.portfolio - INFO - Position closed: cf200b4a-8980-4df1-b55f-ebb57f30f55d SPY PnL: 0.80
2025-04-17 20:30:15,297 - src.events.event_bus - DEBUG - Emitting POSITION_CLOSED event
2025-04-17 20:30:15,297 - __main__ - DEBUG - Event trace: POSITION_CLOSED received
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,298 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,298 - src.position_management.portfolio - INFO - Position closed: cf200b4a-8980-4df1-b55f-ebb57f30f55d PnL: 0.80
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Position action details: exit for SPY
2025-04-17 20:30:15,298 - src.position_management.position_manager - INFO - Emitted position action: exit for SPY
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Created order from position action: SPY SELL 10 @ 521.32
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Order received: OrderEvent(SELL 10 SPY @ 521.32, MARKET, ID: 66aab7be-c4cb-4c0d-99ed-8884aa33c75b)
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(SELL 10 SPY @ 521.32, MARKET, ID: 66aab7be-c4cb-4c0d-99ed-8884aa33c75b)
2025-04-17 20:30:15,298 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(SELL 10 SPY @ 521.32, MARKET, ID: 66aab7be-c4cb-4c0d-99ed-8884aa33c75b)
2025-04-17 20:30:15,298 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,298 - __main__ - DEBUG - Order details: SELL 10 SPY @ 521.32
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(SELL 10 SPY @ 521.32, MARKET, ID: 66aab7be-c4cb-4c0d-99ed-8884aa33c75b)
2025-04-17 20:30:15,298 - src.position_management.position - INFO - Position opened: 4c87b125-60c8-4241-aada-175011536511 SPY SHORT 10 @ 521.32
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,298 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,298 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,298 - src.position_management.portfolio - INFO - Position opened: 4c87b125-60c8-4241-aada-175011536511 SPY SHORT 10 @ 521.32
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,298 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.32
2025-04-17 20:30:15,298 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.32
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:16:00, Close: 521.32
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3020, Slow SMA = 521.3030
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.000353, Curr diff: -0.001020
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,298 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,298 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.32
2025-04-17 20:30:15,298 - src.position_management.position - INFO - Position closed: 4c87b125-60c8-4241-aada-175011536511 SPY SHORT 10 @ 521.32 P&L: 0.00
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,298 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,298 - src.position_management.portfolio - INFO - Position closed: 4c87b125-60c8-4241-aada-175011536511 SPY PnL: 0.00
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,298 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,298 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.32
2025-04-17 20:30:15,298 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,298 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,298 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,298 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.32
2025-04-17 20:30:15,298 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,298 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Executed 1 fills
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:17:00
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:17:00, Close: 521.38
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3230, Slow SMA = 521.3090
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.001020, Curr diff: 0.013980
2025-04-17 20:30:15,298 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 14:17:00
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,298 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.38
2025-04-17 20:30:15,298 - src.position_management.position_manager - INFO - Current positions for SPY: 0 total, 0 in same direction, 0 in opposite direction
2025-04-17 20:30:15,298 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,298 - src.position_management.position_manager - INFO - Created LONG position entry action for SPY size 10
2025-04-17 20:30:15,298 - src.position_management.position_manager - INFO - Created 1 position actions: ['entry']
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Created order from position action: SPY BUY 10 @ 521.38
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Order received: OrderEvent(BUY 10 SPY @ 521.38, MARKET, ID: 8d1b2396-d725-40de-8563-e9c608cce635)
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(BUY 10 SPY @ 521.38, MARKET, ID: 8d1b2396-d725-40de-8563-e9c608cce635)
2025-04-17 20:30:15,298 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(BUY 10 SPY @ 521.38, MARKET, ID: 8d1b2396-d725-40de-8563-e9c608cce635)
2025-04-17 20:30:15,298 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,298 - __main__ - DEBUG - Order details: BUY 10 SPY @ 521.38
2025-04-17 20:30:15,298 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(BUY 10 SPY @ 521.38, MARKET, ID: 8d1b2396-d725-40de-8563-e9c608cce635)
2025-04-17 20:30:15,298 - src.position_management.position - INFO - Position opened: 00669f38-0ca3-4f01-91cb-cf142e67f9c9 SPY LONG 10 @ 521.38
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,298 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,298 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,298 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,298 - src.position_management.portfolio - INFO - Position opened: 00669f38-0ca3-4f01-91cb-cf142e67f9c9 SPY LONG 10 @ 521.38
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,298 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.38
2025-04-17 20:30:15,298 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.38
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:17:00, Close: 521.38
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3440, Slow SMA = 521.3150
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.013980, Curr diff: 0.028980
2025-04-17 20:30:15,298 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:17:00, Close: 521.38
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3560, Slow SMA = 521.3210
2025-04-17 20:30:15,298 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.028980, Curr diff: 0.034980
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,299 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,299 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.38
2025-04-17 20:30:15,299 - src.position_management.position - INFO - Position closed: 00669f38-0ca3-4f01-91cb-cf142e67f9c9 SPY LONG 10 @ 521.38 P&L: 0.00
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,299 - src.position_management.portfolio - INFO - Position closed: 00669f38-0ca3-4f01-91cb-cf142e67f9c9 SPY PnL: 0.00
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,299 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.38
2025-04-17 20:30:15,299 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,299 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,299 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,299 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.38
2025-04-17 20:30:15,299 - src.position_management.position - INFO - Position opened: 894df525-ed07-45d3-aa63-13cb1652f41f SPY LONG 10 @ 521.38
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,299 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.38
2025-04-17 20:30:15,299 - src.position_management.position - INFO - Position increased: 894df525-ed07-45d3-aa63-13cb1652f41f SPY LONG +10 @ 521.38 New size: 20, Avg price: 521.3800
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,299 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,299 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,299 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.38
2025-04-17 20:30:15,299 - src.position_management.position - INFO - Position increased: 894df525-ed07-45d3-aa63-13cb1652f41f SPY LONG +10 @ 521.38 New size: 30, Avg price: 521.3800
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,299 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.38
2025-04-17 20:30:15,299 - src.position_management.position - INFO - Position increased: 894df525-ed07-45d3-aa63-13cb1652f41f SPY LONG +10 @ 521.38 New size: 40, Avg price: 521.3800
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,299 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,299 - src.engine.backtester - DEBUG - Executed 3 fills
2025-04-17 20:30:15,299 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:18:00
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:18:00, Close: 521.48
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3880, Slow SMA = 521.3330
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.034980, Curr diff: 0.054987
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:18:00, Close: 521.48
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4200, Slow SMA = 521.3450
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.054987, Curr diff: 0.074993
2025-04-17 20:30:15,299 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:18:00, Close: 521.48
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4400, Slow SMA = 521.3570
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.074993, Curr diff: 0.083000
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,299 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:19:00
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:19:00, Close: 521.425
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4490, Slow SMA = 521.3633
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.083000, Curr diff: 0.085667
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:19:00, Close: 521.425
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4580, Slow SMA = 521.3697
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.085667, Curr diff: 0.088333
2025-04-17 20:30:15,299 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:19:00, Close: 521.425
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4470, Slow SMA = 521.3760
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.088333, Curr diff: 0.071000
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,299 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:20:00
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:20:00, Close: 521.415
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4340, Slow SMA = 521.3853
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.071000, Curr diff: 0.048667
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:20:00, Close: 521.415
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4210, Slow SMA = 521.3947
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.048667, Curr diff: 0.026333
2025-04-17 20:30:15,299 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:20:00, Close: 521.415
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4190, Slow SMA = 521.4040
2025-04-17 20:30:15,299 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.026333, Curr diff: 0.015000
2025-04-17 20:30:15,299 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,299 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,300 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:21:00
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:21:00, Close: 521.36
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4060, Slow SMA = 521.4067
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.015000, Curr diff: -0.000667
2025-04-17 20:30:15,300 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 14:21:00
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,300 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.36
2025-04-17 20:30:15,300 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,300 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,300 - src.position_management.position_manager - INFO - Created exit action for position 894df525-ed07-45d3-aa63-13cb1652f41f due to signal direction change
2025-04-17 20:30:15,300 - src.position_management.position_manager - INFO - Created SHORT position entry action for SPY size 10
2025-04-17 20:30:15,300 - src.position_management.position_manager - INFO - Created 2 position actions: ['exit', 'entry']
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,300 - src.position_management.position - INFO - Position closed: 894df525-ed07-45d3-aa63-13cb1652f41f SPY LONG 40 @ 521.36 P&L: -0.80
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,300 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,300 - src.position_management.portfolio - INFO - Position closed: 894df525-ed07-45d3-aa63-13cb1652f41f SPY PnL: -0.80
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting POSITION_CLOSED event
2025-04-17 20:30:15,300 - __main__ - DEBUG - Event trace: POSITION_CLOSED received
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,300 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,300 - src.position_management.portfolio - INFO - Position closed: 894df525-ed07-45d3-aa63-13cb1652f41f PnL: -0.80
2025-04-17 20:30:15,300 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,300 - src.engine.backtester - DEBUG - Position action details: exit for SPY
2025-04-17 20:30:15,300 - src.position_management.position_manager - INFO - Emitted position action: exit for SPY
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,300 - src.engine.execution_engine - INFO - Created order from position action: SPY SELL 10 @ 521.36
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,300 - src.engine.execution_engine - INFO - Order received: OrderEvent(SELL 10 SPY @ 521.36, MARKET, ID: 50f7afc3-a57c-4650-af31-2b2d85545f62)
2025-04-17 20:30:15,300 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(SELL 10 SPY @ 521.36, MARKET, ID: 50f7afc3-a57c-4650-af31-2b2d85545f62)
2025-04-17 20:30:15,300 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,300 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(SELL 10 SPY @ 521.36, MARKET, ID: 50f7afc3-a57c-4650-af31-2b2d85545f62)
2025-04-17 20:30:15,300 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,300 - __main__ - DEBUG - Order details: SELL 10 SPY @ 521.36
2025-04-17 20:30:15,300 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(SELL 10 SPY @ 521.36, MARKET, ID: 50f7afc3-a57c-4650-af31-2b2d85545f62)
2025-04-17 20:30:15,300 - src.position_management.position - INFO - Position opened: e6561dbb-fa92-4a96-9734-223befa05fdb SPY SHORT 10 @ 521.36
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,300 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,300 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,300 - src.position_management.portfolio - INFO - Position opened: e6561dbb-fa92-4a96-9734-223befa05fdb SPY SHORT 10 @ 521.36
2025-04-17 20:30:15,300 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,300 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,300 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,300 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,300 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.36
2025-04-17 20:30:15,300 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.36
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:21:00, Close: 521.36
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3930, Slow SMA = 521.4093
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.000667, Curr diff: -0.016333
2025-04-17 20:30:15,300 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:21:00, Close: 521.36
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3820, Slow SMA = 521.4120
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.016333, Curr diff: -0.030000
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,300 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,300 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,300 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.36
2025-04-17 20:30:15,300 - src.position_management.position - INFO - Position closed: e6561dbb-fa92-4a96-9734-223befa05fdb SPY SHORT 10 @ 521.36 P&L: 0.00
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,300 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,300 - src.position_management.portfolio - INFO - Position closed: e6561dbb-fa92-4a96-9734-223befa05fdb SPY PnL: 0.00
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,300 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,300 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.36
2025-04-17 20:30:15,300 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,300 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,300 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,300 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,300 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.36
2025-04-17 20:30:15,300 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,300 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,300 - src.engine.backtester - DEBUG - Executed 1 fills
2025-04-17 20:30:15,300 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:22:00
2025-04-17 20:30:15,300 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:22:00, Close: 521.35
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3690, Slow SMA = 521.4100
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.030000, Curr diff: -0.041000
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:22:00, Close: 521.35
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3560, Slow SMA = 521.4080
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.041000, Curr diff: -0.052000
2025-04-17 20:30:15,300 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:22:00, Close: 521.35
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3540, Slow SMA = 521.4060
2025-04-17 20:30:15,300 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.052000, Curr diff: -0.052000
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,301 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,301 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,301 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.35
2025-04-17 20:30:15,301 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,301 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,301 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:23:00
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:23:00, Close: 521.375
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3570, Slow SMA = 521.3990
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.052000, Curr diff: -0.042000
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:23:00, Close: 521.375
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3600, Slow SMA = 521.3920
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.042000, Curr diff: -0.032000
2025-04-17 20:30:15,301 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:23:00, Close: 521.375
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3650, Slow SMA = 521.3850
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.032000, Curr diff: -0.020000
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,301 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,301 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,301 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.375
2025-04-17 20:30:15,301 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,301 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,301 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:24:00
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:24:00, Close: 521.43
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3810, Slow SMA = 521.3853
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.020000, Curr diff: -0.004333
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:24:00, Close: 521.43
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3970, Slow SMA = 521.3857
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.004333, Curr diff: 0.011333
2025-04-17 20:30:15,301 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 14:24:00
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,301 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.43
2025-04-17 20:30:15,301 - src.position_management.position_manager - INFO - Current positions for SPY: 0 total, 0 in same direction, 0 in opposite direction
2025-04-17 20:30:15,301 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,301 - src.position_management.position_manager - INFO - Created LONG position entry action for SPY size 10
2025-04-17 20:30:15,301 - src.position_management.position_manager - INFO - Created 1 position actions: ['entry']
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,301 - src.engine.execution_engine - INFO - Created order from position action: SPY BUY 10 @ 521.43
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,301 - src.engine.execution_engine - INFO - Order received: OrderEvent(BUY 10 SPY @ 521.43, MARKET, ID: fa1d7571-7201-41fa-bb3e-becabe1e19af)
2025-04-17 20:30:15,301 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(BUY 10 SPY @ 521.43, MARKET, ID: fa1d7571-7201-41fa-bb3e-becabe1e19af)
2025-04-17 20:30:15,301 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,301 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(BUY 10 SPY @ 521.43, MARKET, ID: fa1d7571-7201-41fa-bb3e-becabe1e19af)
2025-04-17 20:30:15,301 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,301 - __main__ - DEBUG - Order details: BUY 10 SPY @ 521.43
2025-04-17 20:30:15,301 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(BUY 10 SPY @ 521.43, MARKET, ID: fa1d7571-7201-41fa-bb3e-becabe1e19af)
2025-04-17 20:30:15,301 - src.position_management.position - INFO - Position opened: 956ca7c9-4663-49cd-80b5-beb4afc63e2d SPY LONG 10 @ 521.43
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,301 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,301 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,301 - src.position_management.portfolio - INFO - Position opened: 956ca7c9-4663-49cd-80b5-beb4afc63e2d SPY LONG 10 @ 521.43
2025-04-17 20:30:15,301 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,301 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,301 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,301 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,301 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.43
2025-04-17 20:30:15,301 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.43
2025-04-17 20:30:15,301 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:24:00, Close: 521.43
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4080, Slow SMA = 521.3860
2025-04-17 20:30:15,301 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.011333, Curr diff: 0.022000
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,301 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,301 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,301 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.43
2025-04-17 20:30:15,301 - src.position_management.position - INFO - Position closed: 956ca7c9-4663-49cd-80b5-beb4afc63e2d SPY LONG 10 @ 521.43 P&L: 0.00
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,301 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,301 - src.position_management.portfolio - INFO - Position closed: 956ca7c9-4663-49cd-80b5-beb4afc63e2d SPY PnL: 0.00
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,301 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,301 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.43
2025-04-17 20:30:15,301 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,301 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,301 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,301 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,301 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.43
2025-04-17 20:30:15,301 - src.position_management.position - INFO - Position opened: fe59f0f1-737e-4a40-a679-09f443f170b0 SPY LONG 10 @ 521.43
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,301 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,301 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,301 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.43
2025-04-17 20:30:15,301 - src.position_management.position - INFO - Position increased: fe59f0f1-737e-4a40-a679-09f443f170b0 SPY LONG +10 @ 521.43 New size: 20, Avg price: 521.4300
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,302 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,302 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,302 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.43
2025-04-17 20:30:15,302 - src.position_management.position - INFO - Position increased: fe59f0f1-737e-4a40-a679-09f443f170b0 SPY LONG +10 @ 521.43 New size: 30, Avg price: 521.4300
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,302 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.43
2025-04-17 20:30:15,302 - src.position_management.position - INFO - Position increased: fe59f0f1-737e-4a40-a679-09f443f170b0 SPY LONG +10 @ 521.43 New size: 40, Avg price: 521.4300
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,302 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,302 - src.engine.backtester - DEBUG - Executed 3 fills
2025-04-17 20:30:15,302 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:25:00
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,302 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:25:00, Close: 521.3
2025-04-17 20:30:15,302 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3930, Slow SMA = 521.3783
2025-04-17 20:30:15,302 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.022000, Curr diff: 0.014667
2025-04-17 20:30:15,302 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:25:00, Close: 521.3
2025-04-17 20:30:15,302 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3780, Slow SMA = 521.3707
2025-04-17 20:30:15,302 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.014667, Curr diff: 0.007333
2025-04-17 20:30:15,302 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,302 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:25:00, Close: 521.3
2025-04-17 20:30:15,302 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3520, Slow SMA = 521.3630
2025-04-17 20:30:15,302 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.007333, Curr diff: -0.011000
2025-04-17 20:30:15,302 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 14:25:00
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,302 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.3
2025-04-17 20:30:15,302 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,302 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,302 - src.position_management.position_manager - INFO - Created exit action for position fe59f0f1-737e-4a40-a679-09f443f170b0 due to signal direction change
2025-04-17 20:30:15,302 - src.position_management.position_manager - INFO - Created SHORT position entry action for SPY size 10
2025-04-17 20:30:15,302 - src.position_management.position_manager - INFO - Created 2 position actions: ['exit', 'entry']
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,302 - src.position_management.position - INFO - Position closed: fe59f0f1-737e-4a40-a679-09f443f170b0 SPY LONG 40 @ 521.3 P&L: -5.20
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,302 - src.position_management.portfolio - INFO - Position closed: fe59f0f1-737e-4a40-a679-09f443f170b0 SPY PnL: -5.20
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting POSITION_CLOSED event
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: POSITION_CLOSED received
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,302 - src.position_management.portfolio - INFO - Position closed: fe59f0f1-737e-4a40-a679-09f443f170b0 PnL: -5.20
2025-04-17 20:30:15,302 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,302 - src.engine.backtester - DEBUG - Position action details: exit for SPY
2025-04-17 20:30:15,302 - src.position_management.position_manager - INFO - Emitted position action: exit for SPY
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,302 - src.engine.execution_engine - INFO - Created order from position action: SPY SELL 10 @ 521.3
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,302 - src.engine.execution_engine - INFO - Order received: OrderEvent(SELL 10 SPY @ 521.3, MARKET, ID: ed8aeef1-f4f0-4691-af39-9d889144c487)
2025-04-17 20:30:15,302 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(SELL 10 SPY @ 521.3, MARKET, ID: ed8aeef1-f4f0-4691-af39-9d889144c487)
2025-04-17 20:30:15,302 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,302 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(SELL 10 SPY @ 521.3, MARKET, ID: ed8aeef1-f4f0-4691-af39-9d889144c487)
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,302 - __main__ - DEBUG - Order details: SELL 10 SPY @ 521.3
2025-04-17 20:30:15,302 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(SELL 10 SPY @ 521.3, MARKET, ID: ed8aeef1-f4f0-4691-af39-9d889144c487)
2025-04-17 20:30:15,302 - src.position_management.position - INFO - Position opened: 2aebfaa6-5583-4fe6-ad30-55d78f3829e1 SPY SHORT 10 @ 521.3
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,302 - src.position_management.portfolio - INFO - Position opened: 2aebfaa6-5583-4fe6-ad30-55d78f3829e1 SPY SHORT 10 @ 521.3
2025-04-17 20:30:15,302 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,302 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,302 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,302 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,302 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.3
2025-04-17 20:30:15,302 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.3
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,302 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,302 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.3
2025-04-17 20:30:15,302 - src.position_management.position - INFO - Position closed: 2aebfaa6-5583-4fe6-ad30-55d78f3829e1 SPY SHORT 10 @ 521.3 P&L: 0.00
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,302 - src.position_management.portfolio - INFO - Position closed: 2aebfaa6-5583-4fe6-ad30-55d78f3829e1 SPY PnL: 0.00
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,302 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,302 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.3
2025-04-17 20:30:15,302 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,302 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,302 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,302 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,302 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.3
2025-04-17 20:30:15,302 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,302 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,302 - src.engine.backtester - DEBUG - Executed 1 fills
2025-04-17 20:30:15,303 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:26:00
2025-04-17 20:30:15,303 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:26:00, Close: 521.34
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3340, Slow SMA = 521.3617
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.011000, Curr diff: -0.027667
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:26:00, Close: 521.34
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3160, Slow SMA = 521.3603
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.027667, Curr diff: -0.044333
2025-04-17 20:30:15,303 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:26:00, Close: 521.34
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3240, Slow SMA = 521.3590
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.044333, Curr diff: -0.035000
2025-04-17 20:30:15,303 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,303 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,303 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,303 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.34
2025-04-17 20:30:15,303 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,303 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,303 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:27:00
2025-04-17 20:30:15,303 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:27:00, Close: 521.2
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3040, Slow SMA = 521.3490
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.035000, Curr diff: -0.045000
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:27:00, Close: 521.2
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2840, Slow SMA = 521.3390
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.045000, Curr diff: -0.055000
2025-04-17 20:30:15,303 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:27:00, Close: 521.2
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2560, Slow SMA = 521.3290
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.055000, Curr diff: -0.073000
2025-04-17 20:30:15,303 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,303 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,303 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,303 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.2
2025-04-17 20:30:15,303 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,303 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,303 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:28:00
2025-04-17 20:30:15,303 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:28:00, Close: 521.19
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2260, Slow SMA = 521.3167
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.073000, Curr diff: -0.090667
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:28:00, Close: 521.19
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1960, Slow SMA = 521.3043
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.090667, Curr diff: -0.108333
2025-04-17 20:30:15,303 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:28:00, Close: 521.19
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1940, Slow SMA = 521.2920
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.108333, Curr diff: -0.098000
2025-04-17 20:30:15,303 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,303 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,303 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,303 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.19
2025-04-17 20:30:15,303 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,303 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,303 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:29:00
2025-04-17 20:30:15,303 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:29:00, Close: 521.07
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1680, Slow SMA = 521.2680
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.098000, Curr diff: -0.100000
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:29:00, Close: 521.07
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1420, Slow SMA = 521.2440
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.100000, Curr diff: -0.102000
2025-04-17 20:30:15,303 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:29:00, Close: 521.07
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1180, Slow SMA = 521.2200
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.102000, Curr diff: -0.102000
2025-04-17 20:30:15,303 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,303 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,303 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,303 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.07
2025-04-17 20:30:15,303 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,303 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,303 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:30:00
2025-04-17 20:30:15,303 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:30:00, Close: 520.99
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0780, Slow SMA = 521.1993
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.102000, Curr diff: -0.121333
2025-04-17 20:30:15,303 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:30:00, Close: 520.99
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0380, Slow SMA = 521.1787
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.121333, Curr diff: -0.140667
2025-04-17 20:30:15,304 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:30:00, Close: 520.99
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0220, Slow SMA = 521.1580
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.140667, Curr diff: -0.136000
2025-04-17 20:30:15,304 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,304 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,304 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,304 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 520.99
2025-04-17 20:30:15,304 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,304 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,304 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:31:00
2025-04-17 20:30:15,304 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:31:00, Close: 520.7824
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9645, Slow SMA = 521.1208
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.136000, Curr diff: -0.156347
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:31:00, Close: 520.7824
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9070, Slow SMA = 521.0837
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.156347, Curr diff: -0.176693
2025-04-17 20:30:15,304 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:31:00, Close: 520.7824
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8654, Slow SMA = 521.0465
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.176693, Curr diff: -0.181040
2025-04-17 20:30:15,304 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,304 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,304 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,304 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 520.7824
2025-04-17 20:30:15,304 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,304 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,304 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:32:00
2025-04-17 20:30:15,304 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:32:00, Close: 520.9
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8474, Slow SMA = 521.0265
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.181040, Curr diff: -0.179040
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:32:00, Close: 520.9
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8294, Slow SMA = 521.0065
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.179040, Curr diff: -0.177040
2025-04-17 20:30:15,304 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:32:00, Close: 520.9
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8530, Slow SMA = 520.9865
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.177040, Curr diff: -0.133520
2025-04-17 20:30:15,304 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,304 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,304 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,304 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 520.9
2025-04-17 20:30:15,304 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,304 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,304 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:33:00
2025-04-17 20:30:15,304 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:33:00, Close: 520.885
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8735, Slow SMA = 520.9661
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.133520, Curr diff: -0.092667
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:33:00, Close: 520.885
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8940, Slow SMA = 520.9458
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.092667, Curr diff: -0.051813
2025-04-17 20:30:15,304 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:33:00, Close: 520.885
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8910, Slow SMA = 520.9255
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.051813, Curr diff: -0.034480
2025-04-17 20:30:15,304 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,304 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,304 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,304 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 520.885
2025-04-17 20:30:15,304 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,304 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,304 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:34:00
2025-04-17 20:30:15,304 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:34:00, Close: 520.99
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9090, Slow SMA = 520.9201
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.034480, Curr diff: -0.011147
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:34:00, Close: 520.99
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9270, Slow SMA = 520.9148
2025-04-17 20:30:15,304 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.011147, Curr diff: 0.012187
2025-04-17 20:30:15,304 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 14:34:00
2025-04-17 20:30:15,304 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,304 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.99
2025-04-17 20:30:15,304 - src.position_management.position_manager - INFO - Current positions for SPY: 0 total, 0 in same direction, 0 in opposite direction
2025-04-17 20:30:15,304 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,304 - src.position_management.position_manager - INFO - Created LONG position entry action for SPY size 10
2025-04-17 20:30:15,305 - src.position_management.position_manager - INFO - Created 1 position actions: ['entry']
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,305 - src.engine.execution_engine - INFO - Created order from position action: SPY BUY 10 @ 520.99
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,305 - src.engine.execution_engine - INFO - Order received: OrderEvent(BUY 10 SPY @ 520.99, MARKET, ID: 1a476ab2-3e5e-486c-9def-678e91fd7b2e)
2025-04-17 20:30:15,305 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(BUY 10 SPY @ 520.99, MARKET, ID: 1a476ab2-3e5e-486c-9def-678e91fd7b2e)
2025-04-17 20:30:15,305 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,305 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(BUY 10 SPY @ 520.99, MARKET, ID: 1a476ab2-3e5e-486c-9def-678e91fd7b2e)
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,305 - __main__ - DEBUG - Order details: BUY 10 SPY @ 520.99
2025-04-17 20:30:15,305 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(BUY 10 SPY @ 520.99, MARKET, ID: 1a476ab2-3e5e-486c-9def-678e91fd7b2e)
2025-04-17 20:30:15,305 - src.position_management.position - INFO - Position opened: 221d5534-0f12-4932-827f-db22d5e03201 SPY LONG 10 @ 520.99
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,305 - src.position_management.portfolio - INFO - Position opened: 221d5534-0f12-4932-827f-db22d5e03201 SPY LONG 10 @ 520.99
2025-04-17 20:30:15,305 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,305 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,305 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,305 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,305 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.99
2025-04-17 20:30:15,305 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.99
2025-04-17 20:30:15,305 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:34:00, Close: 520.99
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9480, Slow SMA = 520.9095
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.012187, Curr diff: 0.038520
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,305 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,305 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 520.99
2025-04-17 20:30:15,305 - src.position_management.position - INFO - Position closed: 221d5534-0f12-4932-827f-db22d5e03201 SPY LONG 10 @ 520.99 P&L: 0.00
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,305 - src.position_management.portfolio - INFO - Position closed: 221d5534-0f12-4932-827f-db22d5e03201 SPY PnL: 0.00
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,305 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 520.99
2025-04-17 20:30:15,305 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,305 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,305 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,305 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 520.99
2025-04-17 20:30:15,305 - src.position_management.position - INFO - Position opened: 470b329e-002e-4e1d-8df4-5c4614ee1d89 SPY LONG 10 @ 520.99
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,305 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 520.99
2025-04-17 20:30:15,305 - src.position_management.position - INFO - Position increased: 470b329e-002e-4e1d-8df4-5c4614ee1d89 SPY LONG +10 @ 520.99 New size: 20, Avg price: 520.9900
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,305 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,305 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,305 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 520.99
2025-04-17 20:30:15,305 - src.position_management.position - INFO - Position increased: 470b329e-002e-4e1d-8df4-5c4614ee1d89 SPY LONG +10 @ 520.99 New size: 30, Avg price: 520.9900
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,305 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 520.99
2025-04-17 20:30:15,305 - src.position_management.position - INFO - Position increased: 470b329e-002e-4e1d-8df4-5c4614ee1d89 SPY LONG +10 @ 520.99 New size: 40, Avg price: 520.9900
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,305 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,305 - src.engine.backtester - DEBUG - Executed 3 fills
2025-04-17 20:30:15,305 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:35:00
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:35:00, Close: 520.98
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9670, Slow SMA = 520.9088
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.038520, Curr diff: 0.058187
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:35:00, Close: 520.98
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9860, Slow SMA = 520.9081
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.058187, Curr diff: 0.077853
2025-04-17 20:30:15,305 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:35:00, Close: 520.98
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9840, Slow SMA = 520.9075
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.077853, Curr diff: 0.076520
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,305 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,305 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:36:00
2025-04-17 20:30:15,305 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:36:00, Close: 520.8799
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9620, Slow SMA = 520.9140
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.076520, Curr diff: 0.048000
2025-04-17 20:30:15,305 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:36:00, Close: 520.8799
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9400, Slow SMA = 520.9205
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.048000, Curr diff: 0.019480
2025-04-17 20:30:15,306 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:36:00, Close: 520.8799
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9199, Slow SMA = 520.9270
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.019480, Curr diff: -0.007040
2025-04-17 20:30:15,306 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 14:36:00
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.8799
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Created exit action for position 470b329e-002e-4e1d-8df4-5c4614ee1d89 due to signal direction change
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Created SHORT position entry action for SPY size 10
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Created 2 position actions: ['exit', 'entry']
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,306 - src.position_management.position - INFO - Position closed: 470b329e-002e-4e1d-8df4-5c4614ee1d89 SPY LONG 40 @ 520.8799 P&L: -4.40
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,306 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,306 - src.position_management.portfolio - INFO - Position closed: 470b329e-002e-4e1d-8df4-5c4614ee1d89 SPY PnL: -4.40
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting POSITION_CLOSED event
2025-04-17 20:30:15,306 - __main__ - DEBUG - Event trace: POSITION_CLOSED received
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,306 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,306 - src.position_management.portfolio - INFO - Position closed: 470b329e-002e-4e1d-8df4-5c4614ee1d89 PnL: -4.40
2025-04-17 20:30:15,306 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,306 - src.engine.backtester - DEBUG - Position action details: exit for SPY
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Emitted position action: exit for SPY
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,306 - src.engine.execution_engine - INFO - Created order from position action: SPY SELL 10 @ 520.8799
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,306 - src.engine.execution_engine - INFO - Order received: OrderEvent(SELL 10 SPY @ 520.8799, MARKET, ID: f279f23c-faab-481d-a5d6-3d0a8bcf7922)
2025-04-17 20:30:15,306 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(SELL 10 SPY @ 520.8799, MARKET, ID: f279f23c-faab-481d-a5d6-3d0a8bcf7922)
2025-04-17 20:30:15,306 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,306 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(SELL 10 SPY @ 520.8799, MARKET, ID: f279f23c-faab-481d-a5d6-3d0a8bcf7922)
2025-04-17 20:30:15,306 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,306 - __main__ - DEBUG - Order details: SELL 10 SPY @ 520.8799
2025-04-17 20:30:15,306 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(SELL 10 SPY @ 520.8799, MARKET, ID: f279f23c-faab-481d-a5d6-3d0a8bcf7922)
2025-04-17 20:30:15,306 - src.position_management.position - INFO - Position opened: 7db5d774-53ac-4470-9953-9302b6b22392 SPY SHORT 10 @ 520.8799
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,306 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,306 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,306 - src.position_management.portfolio - INFO - Position opened: 7db5d774-53ac-4470-9953-9302b6b22392 SPY SHORT 10 @ 520.8799
2025-04-17 20:30:15,306 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,306 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,306 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,306 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.8799
2025-04-17 20:30:15,306 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.8799
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,306 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,306 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,306 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 520.8799
2025-04-17 20:30:15,306 - src.position_management.position - INFO - Position closed: 7db5d774-53ac-4470-9953-9302b6b22392 SPY SHORT 10 @ 520.8799 P&L: 0.00
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,306 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,306 - src.position_management.portfolio - INFO - Position closed: 7db5d774-53ac-4470-9953-9302b6b22392 SPY PnL: 0.00
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,306 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,306 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 520.8799
2025-04-17 20:30:15,306 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,306 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,306 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,306 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,306 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 520.8799
2025-04-17 20:30:15,306 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,306 - src.engine.execution_engine - ERROR - Failed to execute order: Quantity: -10
2025-04-17 20:30:15,306 - src.engine.backtester - DEBUG - Executed 1 fills
2025-04-17 20:30:15,306 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:37:00
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:37:00, Close: 521.03
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9299, Slow SMA = 520.9356
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.007040, Curr diff: -0.005707
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:37:00, Close: 521.03
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9399, Slow SMA = 520.9443
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005707, Curr diff: -0.004373
2025-04-17 20:30:15,306 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:37:00, Close: 521.03
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9700, Slow SMA = 520.9530
2025-04-17 20:30:15,306 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.004373, Curr diff: 0.016980
2025-04-17 20:30:15,306 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 14:37:00
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.03
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Current positions for SPY: 0 total, 0 in same direction, 0 in opposite direction
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Created LONG position entry action for SPY size 10
2025-04-17 20:30:15,306 - src.position_management.position_manager - INFO - Created 1 position actions: ['entry']
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting POSITION_ACTION event
2025-04-17 20:30:15,306 - src.engine.execution_engine - INFO - Created order from position action: SPY BUY 10 @ 521.03
2025-04-17 20:30:15,306 - src.events.event_bus - DEBUG - Emitting ORDER event
2025-04-17 20:30:15,306 - src.engine.execution_engine - INFO - Order received: OrderEvent(BUY 10 SPY @ 521.03, MARKET, ID: 734e3dad-4d25-4170-9ec5-3ca9e5dd64de)
2025-04-17 20:30:15,306 - src.engine.execution_engine - INFO - Executing market order immediately: OrderEvent(BUY 10 SPY @ 521.03, MARKET, ID: 734e3dad-4d25-4170-9ec5-3ca9e5dd64de)
2025-04-17 20:30:15,307 - src.engine.execution_engine - ERROR - Error executing market order immediately: 'list' object has no attribute 'get'
2025-04-17 20:30:15,307 - src.engine.execution_engine - INFO - Added order to pending list: OrderEvent(BUY 10 SPY @ 521.03, MARKET, ID: 734e3dad-4d25-4170-9ec5-3ca9e5dd64de)
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: ORDER received
2025-04-17 20:30:15,307 - __main__ - DEBUG - Order details: BUY 10 SPY @ 521.03
2025-04-17 20:30:15,307 - src.engine.execution_engine - INFO - Emitted ORDER event: OrderEvent(BUY 10 SPY @ 521.03, MARKET, ID: 734e3dad-4d25-4170-9ec5-3ca9e5dd64de)
2025-04-17 20:30:15,307 - src.position_management.position - INFO - Position opened: f16f83f7-8e72-458c-8ccf-e8cd2240b72d SPY LONG 10 @ 521.03
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting POSITION_OPENED event
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: POSITION_OPENED received
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,307 - src.position_management.portfolio - INFO - Position opened: f16f83f7-8e72-458c-8ccf-e8cd2240b72d SPY LONG 10 @ 521.03
2025-04-17 20:30:15,307 - src.engine.backtester - DEBUG - Event flow: POSITION_ACTION event received
2025-04-17 20:30:15,307 - src.engine.backtester - DEBUG - Position action details: entry for SPY
2025-04-17 20:30:15,307 - src.position_management.position_manager - INFO - Emitted position action: entry for SPY
2025-04-17 20:30:15,307 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,307 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.03
2025-04-17 20:30:15,307 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.03
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,307 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,307 - src.engine.execution_engine - INFO - Executing SELL order: 10 shares at 521.03
2025-04-17 20:30:15,307 - src.position_management.position - INFO - Position closed: f16f83f7-8e72-458c-8ccf-e8cd2240b72d SPY LONG 10 @ 521.03 P&L: 0.00
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,307 - src.position_management.portfolio - INFO - Position closed: f16f83f7-8e72-458c-8ccf-e8cd2240b72d SPY PnL: 0.00
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,307 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY SELL 10 @ 521.03
2025-04-17 20:30:15,307 - src.position_management.portfolio - WARNING - No positions found for SPY, cannot sell
2025-04-17 20:30:15,307 - src.position_management.portfolio - WARNING - Failed to update portfolio from fill
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,307 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,307 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.03
2025-04-17 20:30:15,307 - src.position_management.position - INFO - Position opened: 10f7f080-a84c-49f1-895d-45f07e8260a2 SPY LONG 10 @ 521.03
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,307 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.03
2025-04-17 20:30:15,307 - src.position_management.position - INFO - Position increased: 10f7f080-a84c-49f1-895d-45f07e8260a2 SPY LONG +10 @ 521.03 New size: 20, Avg price: 521.0300
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,307 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,307 - src.engine.execution_engine - ERROR - Error in market simulator: 'BarEvent' object is not subscriptable
2025-04-17 20:30:15,307 - src.engine.execution_engine - INFO - Executing BUY order: 10 shares at 521.03
2025-04-17 20:30:15,307 - src.position_management.position - INFO - Position increased: 10f7f080-a84c-49f1-895d-45f07e8260a2 SPY LONG +10 @ 521.03 New size: 30, Avg price: 521.0300
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting FILL event
2025-04-17 20:30:15,307 - src.position_management.portfolio - INFO - Updating portfolio from fill: SPY BUY 10 @ 521.03
2025-04-17 20:30:15,307 - src.position_management.position - INFO - Position increased: 10f7f080-a84c-49f1-895d-45f07e8260a2 SPY LONG +10 @ 521.03 New size: 40, Avg price: 521.0300
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,307 - src.position_management.portfolio - INFO - Successfully updated portfolio from fill
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: FILL received
2025-04-17 20:30:15,307 - src.engine.backtester - DEBUG - Executed 3 fills
2025-04-17 20:30:15,307 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:38:00
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:38:00, Close: 521.075
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0090, Slow SMA = 520.9656
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016980, Curr diff: 0.043333
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:38:00, Close: 521.075
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0480, Slow SMA = 520.9783
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.043333, Curr diff: 0.069687
2025-04-17 20:30:15,307 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:38:00, Close: 521.075
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0570, Slow SMA = 520.9910
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.069687, Curr diff: 0.066020
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,307 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:39:00
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:39:00, Close: 521.105
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0720, Slow SMA = 520.9986
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.066020, Curr diff: 0.073353
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:39:00, Close: 521.105
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0870, Slow SMA = 521.0063
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.073353, Curr diff: 0.080687
2025-04-17 20:30:15,307 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:39:00, Close: 521.105
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0930, Slow SMA = 521.0140
2025-04-17 20:30:15,307 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.080687, Curr diff: 0.079020
2025-04-17 20:30:15,307 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,307 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:40:00
2025-04-17 20:30:15,308 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:40:00, Close: 520.985
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0750, Slow SMA = 521.0143
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.079020, Curr diff: 0.060687
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:40:00, Close: 520.985
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0570, Slow SMA = 521.0146
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.060687, Curr diff: 0.042353
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:40:00, Close: 520.985
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0330, Slow SMA = 521.0150
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.042353, Curr diff: 0.018020
2025-04-17 20:30:15,308 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,308 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:41:00
2025-04-17 20:30:15,308 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:41:00, Close: 521.06
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0240, Slow SMA = 521.0270
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.018020, Curr diff: -0.002987
2025-04-17 20:30:15,308 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 14:41:00
2025-04-17 20:30:15,308 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,308 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.06
2025-04-17 20:30:15,308 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,308 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,308 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5210.60, Available: 962.29
2025-04-17 20:30:15,308 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.06
2025-04-17 20:30:15,308 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.06
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:41:00, Close: 521.06
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0150, Slow SMA = 521.0390
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.002987, Curr diff: -0.023993
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:41:00, Close: 521.06
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0300, Slow SMA = 521.0510
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.023993, Curr diff: -0.021000
2025-04-17 20:30:15,308 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,308 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:42:00
2025-04-17 20:30:15,308 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:42:00, Close: 521.06
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0450, Slow SMA = 521.0530
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.021000, Curr diff: -0.008000
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:42:00, Close: 521.06
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0600, Slow SMA = 521.0550
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008000, Curr diff: 0.005000
2025-04-17 20:30:15,308 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 14:42:00
2025-04-17 20:30:15,308 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,308 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.06
2025-04-17 20:30:15,308 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,308 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,308 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.06
2025-04-17 20:30:15,308 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.06
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:42:00, Close: 521.06
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0600, Slow SMA = 521.0570
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.005000, Curr diff: 0.003000
2025-04-17 20:30:15,308 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,308 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:43:00
2025-04-17 20:30:15,308 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:43:00, Close: 521.175
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0830, Slow SMA = 521.0637
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.003000, Curr diff: 0.019333
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:43:00, Close: 521.175
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1060, Slow SMA = 521.0703
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.019333, Curr diff: 0.035667
2025-04-17 20:30:15,308 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:43:00, Close: 521.175
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1290, Slow SMA = 521.0770
2025-04-17 20:30:15,308 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.035667, Curr diff: 0.052000
2025-04-17 20:30:15,308 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,308 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:44:00
2025-04-17 20:30:15,309 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:44:00, Close: 521.1
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1370, Slow SMA = 521.0767
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.052000, Curr diff: 0.060333
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:44:00, Close: 521.1
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1450, Slow SMA = 521.0763
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.060333, Curr diff: 0.068667
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:44:00, Close: 521.1
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1300, Slow SMA = 521.0760
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.068667, Curr diff: 0.054000
2025-04-17 20:30:15,309 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,309 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:45:00
2025-04-17 20:30:15,309 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:45:00, Close: 521.01
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0970, Slow SMA = 521.0777
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.054000, Curr diff: 0.019333
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:45:00, Close: 521.01
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0640, Slow SMA = 521.0793
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.019333, Curr diff: -0.015333
2025-04-17 20:30:15,309 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 14:45:00
2025-04-17 20:30:15,309 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,309 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.01
2025-04-17 20:30:15,309 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,309 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,309 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5210.10, Available: 962.29
2025-04-17 20:30:15,309 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.01
2025-04-17 20:30:15,309 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.01
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:45:00, Close: 521.01
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0460, Slow SMA = 521.0810
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015333, Curr diff: -0.035000
2025-04-17 20:30:15,309 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,309 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:46:00
2025-04-17 20:30:15,309 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:46:00, Close: 521.0593
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0379, Slow SMA = 521.0810
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.035000, Curr diff: -0.043093
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:46:00, Close: 521.0593
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0297, Slow SMA = 521.0809
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.043093, Curr diff: -0.051187
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:46:00, Close: 521.0593
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0396, Slow SMA = 521.0809
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.051187, Curr diff: -0.041280
2025-04-17 20:30:15,309 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,309 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:47:00
2025-04-17 20:30:15,309 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:47:00, Close: 521.14
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0656, Slow SMA = 521.0862
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.041280, Curr diff: -0.020613
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:47:00, Close: 521.14
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0916, Slow SMA = 521.0915
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.020613, Curr diff: 0.000053
2025-04-17 20:30:15,309 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 14:47:00
2025-04-17 20:30:15,309 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,309 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.14
2025-04-17 20:30:15,309 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,309 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,309 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.14
2025-04-17 20:30:15,309 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.14
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:47:00, Close: 521.14
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1077, Slow SMA = 521.0969
2025-04-17 20:30:15,309 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.000053, Curr diff: 0.010860
2025-04-17 20:30:15,309 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,309 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,309 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:48:00
2025-04-17 20:30:15,310 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:48:00, Close: 520.9599
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0878, Slow SMA = 521.0825
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.010860, Curr diff: 0.005320
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:48:00, Close: 520.9599
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0680, Slow SMA = 521.0682
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.005320, Curr diff: -0.000220
2025-04-17 20:30:15,310 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 14:48:00
2025-04-17 20:30:15,310 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,310 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.9599
2025-04-17 20:30:15,310 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,310 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,310 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5209.60, Available: 962.29
2025-04-17 20:30:15,310 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.9599
2025-04-17 20:30:15,310 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.9599
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:48:00, Close: 520.9599
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0319, Slow SMA = 521.0538
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.000220, Curr diff: -0.021900
2025-04-17 20:30:15,310 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,310 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:49:00
2025-04-17 20:30:15,310 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:49:00, Close: 520.955
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9949, Slow SMA = 521.0442
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.021900, Curr diff: -0.049233
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:49:00, Close: 520.955
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9579, Slow SMA = 521.0345
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.049233, Curr diff: -0.076567
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:49:00, Close: 520.955
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9570, Slow SMA = 521.0248
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.076567, Curr diff: -0.067880
2025-04-17 20:30:15,310 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,310 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:50:00
2025-04-17 20:30:15,310 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:50:00, Close: 521.01
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9670, Slow SMA = 521.0248
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.067880, Curr diff: -0.057860
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:50:00, Close: 521.01
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9770, Slow SMA = 521.0248
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.057860, Curr diff: -0.047840
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:50:00, Close: 521.01
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9880, Slow SMA = 521.0248
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.047840, Curr diff: -0.036840
2025-04-17 20:30:15,310 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,310 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:51:00
2025-04-17 20:30:15,310 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:51:00, Close: 521.09
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0150, Slow SMA = 521.0269
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.036840, Curr diff: -0.011887
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:51:00, Close: 521.09
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0420, Slow SMA = 521.0289
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.011887, Curr diff: 0.013067
2025-04-17 20:30:15,310 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 14:51:00
2025-04-17 20:30:15,310 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,310 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.09
2025-04-17 20:30:15,310 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,310 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,310 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.09
2025-04-17 20:30:15,310 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.09
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:51:00, Close: 521.09
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0580, Slow SMA = 521.0310
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.013067, Curr diff: 0.027020
2025-04-17 20:30:15,310 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,310 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,310 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:52:00
2025-04-17 20:30:15,310 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,310 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:52:00, Close: 521.08
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0720, Slow SMA = 521.0270
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.027020, Curr diff: 0.045020
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:52:00, Close: 521.08
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0860, Slow SMA = 521.0230
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.045020, Curr diff: 0.063020
2025-04-17 20:30:15,311 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:52:00, Close: 521.08
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0840, Slow SMA = 521.0190
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.063020, Curr diff: 0.065020
2025-04-17 20:30:15,311 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,311 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,311 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:53:00
2025-04-17 20:30:15,311 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:53:00, Close: 521.13
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0920, Slow SMA = 521.0303
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.065020, Curr diff: 0.061680
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:53:00, Close: 521.13
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1000, Slow SMA = 521.0417
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.061680, Curr diff: 0.058340
2025-04-17 20:30:15,311 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:53:00, Close: 521.13
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1100, Slow SMA = 521.0530
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.058340, Curr diff: 0.057000
2025-04-17 20:30:15,311 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,311 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,311 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:54:00
2025-04-17 20:30:15,311 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:54:00, Close: 521.17
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1280, Slow SMA = 521.0673
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.057000, Curr diff: 0.060667
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:54:00, Close: 521.17
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1460, Slow SMA = 521.0817
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.060667, Curr diff: 0.064333
2025-04-17 20:30:15,311 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:54:00, Close: 521.17
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1540, Slow SMA = 521.0960
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.064333, Curr diff: 0.058000
2025-04-17 20:30:15,311 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,311 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,311 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:55:00
2025-04-17 20:30:15,311 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:55:00, Close: 521.215
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1710, Slow SMA = 521.1097
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.058000, Curr diff: 0.061333
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:55:00, Close: 521.215
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1880, Slow SMA = 521.1233
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.061333, Curr diff: 0.064667
2025-04-17 20:30:15,311 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:55:00, Close: 521.215
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1970, Slow SMA = 521.1370
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.064667, Curr diff: 0.060000
2025-04-17 20:30:15,311 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,311 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,311 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:56:00
2025-04-17 20:30:15,311 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:56:00, Close: 521.1799
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1990, Slow SMA = 521.1430
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.060000, Curr diff: 0.055987
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:56:00, Close: 521.1799
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2010, Slow SMA = 521.1490
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.055987, Curr diff: 0.051973
2025-04-17 20:30:15,311 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:56:00, Close: 521.1799
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1939, Slow SMA = 521.1550
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.051973, Curr diff: 0.038960
2025-04-17 20:30:15,311 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,311 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,311 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:57:00
2025-04-17 20:30:15,311 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:57:00, Close: 521.24
2025-04-17 20:30:15,311 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1989, Slow SMA = 521.1656
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.038960, Curr diff: 0.033293
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:57:00, Close: 521.24
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2039, Slow SMA = 521.1763
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.033293, Curr diff: 0.027627
2025-04-17 20:30:15,312 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:57:00, Close: 521.24
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2160, Slow SMA = 521.1870
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.027627, Curr diff: 0.028980
2025-04-17 20:30:15,312 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,312 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,312 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:58:00
2025-04-17 20:30:15,312 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:58:00, Close: 521.28
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2360, Slow SMA = 521.1970
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.028980, Curr diff: 0.039000
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:58:00, Close: 521.28
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2560, Slow SMA = 521.2070
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.039000, Curr diff: 0.049020
2025-04-17 20:30:15,312 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:58:00, Close: 521.28
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2640, Slow SMA = 521.2170
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.049020, Curr diff: 0.047020
2025-04-17 20:30:15,312 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,312 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,312 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 14:59:00
2025-04-17 20:30:15,312 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:59:00, Close: 521.3
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2760, Slow SMA = 521.2256
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.047020, Curr diff: 0.050353
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:59:00, Close: 521.3
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2880, Slow SMA = 521.2343
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.050353, Curr diff: 0.053687
2025-04-17 20:30:15,312 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 14:59:00, Close: 521.3
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2920, Slow SMA = 521.2430
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.053687, Curr diff: 0.049020
2025-04-17 20:30:15,312 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,312 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,312 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:00:00
2025-04-17 20:30:15,312 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:00:00, Close: 521.34
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3040, Slow SMA = 521.2513
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.049020, Curr diff: 0.052687
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:00:00, Close: 521.34
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3160, Slow SMA = 521.2596
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.052687, Curr diff: 0.056353
2025-04-17 20:30:15,312 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:00:00, Close: 521.34
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3240, Slow SMA = 521.2680
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.056353, Curr diff: 0.056020
2025-04-17 20:30:15,312 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,312 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,312 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:01:00
2025-04-17 20:30:15,312 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:01:00, Close: 521.3136
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3267, Slow SMA = 521.2769
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.056020, Curr diff: 0.049827
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:01:00, Close: 521.3136
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3294, Slow SMA = 521.2858
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.049827, Curr diff: 0.043633
2025-04-17 20:30:15,312 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:01:00, Close: 521.3136
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3242, Slow SMA = 521.2947
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.043633, Curr diff: 0.029440
2025-04-17 20:30:15,312 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,312 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,312 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:02:00
2025-04-17 20:30:15,312 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:02:00, Close: 521.29
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3142, Slow SMA = 521.2981
2025-04-17 20:30:15,312 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.029440, Curr diff: 0.016107
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:02:00, Close: 521.29
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3042, Slow SMA = 521.3014
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016107, Curr diff: 0.002773
2025-04-17 20:30:15,313 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:02:00, Close: 521.29
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2994, Slow SMA = 521.3047
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.002773, Curr diff: -0.005280
2025-04-17 20:30:15,313 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 15:02:00
2025-04-17 20:30:15,313 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,313 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.29
2025-04-17 20:30:15,313 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,313 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,313 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5212.90, Available: 962.29
2025-04-17 20:30:15,313 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,313 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,313 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.29
2025-04-17 20:30:15,313 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.29
2025-04-17 20:30:15,313 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,313 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,313 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:03:00
2025-04-17 20:30:15,313 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:03:00, Close: 521.25
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2867, Slow SMA = 521.3027
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005280, Curr diff: -0.016000
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:03:00, Close: 521.25
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2740, Slow SMA = 521.3007
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.016000, Curr diff: -0.026720
2025-04-17 20:30:15,313 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:03:00, Close: 521.25
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2660, Slow SMA = 521.2987
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.026720, Curr diff: -0.032720
2025-04-17 20:30:15,313 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,313 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,313 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:04:00
2025-04-17 20:30:15,313 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:04:00, Close: 521.2
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2480, Slow SMA = 521.2921
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.032720, Curr diff: -0.044053
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:04:00, Close: 521.2
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2300, Slow SMA = 521.2854
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.044053, Curr diff: -0.055387
2025-04-17 20:30:15,313 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:04:00, Close: 521.2
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2200, Slow SMA = 521.2787
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.055387, Curr diff: -0.058720
2025-04-17 20:30:15,313 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,313 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,313 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:05:00
2025-04-17 20:30:15,313 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:05:00, Close: 521.2197
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2139, Slow SMA = 521.2707
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.058720, Curr diff: -0.056760
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:05:00, Close: 521.2197
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2079, Slow SMA = 521.2627
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.056760, Curr diff: -0.054800
2025-04-17 20:30:15,313 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:05:00, Close: 521.2197
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2118, Slow SMA = 521.2547
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.054800, Curr diff: -0.042840
2025-04-17 20:30:15,313 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,313 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,313 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:06:00
2025-04-17 20:30:15,313 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:06:00, Close: 521.23
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2178, Slow SMA = 521.2491
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.042840, Curr diff: -0.031267
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:06:00, Close: 521.23
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2238, Slow SMA = 521.2435
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.031267, Curr diff: -0.019693
2025-04-17 20:30:15,313 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:06:00, Close: 521.23
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2259, Slow SMA = 521.2379
2025-04-17 20:30:15,313 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.019693, Curr diff: -0.012060
2025-04-17 20:30:15,313 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,313 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,314 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:07:00
2025-04-17 20:30:15,314 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:07:00, Close: 521.1999
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2219, Slow SMA = 521.2319
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.012060, Curr diff: -0.010013
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:07:00, Close: 521.1999
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2180, Slow SMA = 521.2259
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.010013, Curr diff: -0.007967
2025-04-17 20:30:15,314 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:07:00, Close: 521.1999
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2119, Slow SMA = 521.2199
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.007967, Curr diff: -0.007980
2025-04-17 20:30:15,314 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,314 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,314 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:08:00
2025-04-17 20:30:15,314 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:08:00, Close: 521.21
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2079, Slow SMA = 521.2173
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.007980, Curr diff: -0.009313
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:08:00, Close: 521.21
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2039, Slow SMA = 521.2146
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.009313, Curr diff: -0.010647
2025-04-17 20:30:15,314 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:08:00, Close: 521.21
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2060, Slow SMA = 521.2119
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.010647, Curr diff: -0.005960
2025-04-17 20:30:15,314 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,314 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,314 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:09:00
2025-04-17 20:30:15,314 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:09:00, Close: 521.26
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2180, Slow SMA = 521.2159
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005960, Curr diff: 0.002060
2025-04-17 20:30:15,314 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 15:09:00
2025-04-17 20:30:15,314 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,314 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.26
2025-04-17 20:30:15,314 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,314 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,314 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,314 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,314 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.26
2025-04-17 20:30:15,314 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.26
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:09:00, Close: 521.26
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2300, Slow SMA = 521.2199
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.002060, Curr diff: 0.010080
2025-04-17 20:30:15,314 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:09:00, Close: 521.26
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2400, Slow SMA = 521.2239
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.010080, Curr diff: 0.016080
2025-04-17 20:30:15,314 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,314 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,314 - src.engine.backtester - INFO - Processed 100 bars, 0 signals, 0 orders, 36 fills
2025-04-17 20:30:15,314 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:10:00
2025-04-17 20:30:15,314 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:10:00, Close: 521.32
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2620, Slow SMA = 521.2306
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016080, Curr diff: 0.031393
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:10:00, Close: 521.32
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2840, Slow SMA = 521.2373
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.031393, Curr diff: 0.046707
2025-04-17 20:30:15,314 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:10:00, Close: 521.32
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2960, Slow SMA = 521.2440
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.046707, Curr diff: 0.052020
2025-04-17 20:30:15,314 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,314 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,314 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:11:00
2025-04-17 20:30:15,314 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:11:00, Close: 521.2701
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2980, Slow SMA = 521.2467
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.052020, Curr diff: 0.051367
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:11:00, Close: 521.2701
2025-04-17 20:30:15,314 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3000, Slow SMA = 521.2493
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.051367, Curr diff: 0.050713
2025-04-17 20:30:15,315 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:11:00, Close: 521.2701
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2901, Slow SMA = 521.2520
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.050713, Curr diff: 0.038060
2025-04-17 20:30:15,315 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,315 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,315 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:12:00
2025-04-17 20:30:15,315 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:12:00, Close: 521.19
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2641, Slow SMA = 521.2513
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.038060, Curr diff: 0.012720
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:12:00, Close: 521.19
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2381, Slow SMA = 521.2507
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.012720, Curr diff: -0.012620
2025-04-17 20:30:15,315 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 15:12:00
2025-04-17 20:30:15,315 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,315 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.19
2025-04-17 20:30:15,315 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,315 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,315 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5211.90, Available: 962.29
2025-04-17 20:30:15,315 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,315 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,315 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.19
2025-04-17 20:30:15,315 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.19
2025-04-17 20:30:15,315 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:12:00, Close: 521.19
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2220, Slow SMA = 521.2500
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.012620, Curr diff: -0.027980
2025-04-17 20:30:15,315 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,315 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,315 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:13:00
2025-04-17 20:30:15,315 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:13:00, Close: 521.2
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2080, Slow SMA = 521.2494
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.027980, Curr diff: -0.041333
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:13:00, Close: 521.2
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1940, Slow SMA = 521.2487
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.041333, Curr diff: -0.054687
2025-04-17 20:30:15,315 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:13:00, Close: 521.2
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1960, Slow SMA = 521.2480
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.054687, Curr diff: -0.052020
2025-04-17 20:30:15,315 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,315 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,315 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:14:00
2025-04-17 20:30:15,315 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:14:00, Close: 521.215
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2010, Slow SMA = 521.2450
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.052020, Curr diff: -0.044020
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:14:00, Close: 521.215
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2060, Slow SMA = 521.2420
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.044020, Curr diff: -0.036020
2025-04-17 20:30:15,315 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:14:00, Close: 521.215
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2090, Slow SMA = 521.2390
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.036020, Curr diff: -0.030020
2025-04-17 20:30:15,315 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,315 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,315 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:15:00
2025-04-17 20:30:15,315 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:15:00, Close: 521.19
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2070, Slow SMA = 521.2304
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.030020, Curr diff: -0.023353
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:15:00, Close: 521.19
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2050, Slow SMA = 521.2217
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.023353, Curr diff: -0.016687
2025-04-17 20:30:15,315 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:15:00, Close: 521.19
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2000, Slow SMA = 521.2130
2025-04-17 20:30:15,315 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.016687, Curr diff: -0.013020
2025-04-17 20:30:15,315 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,315 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,316 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:16:00
2025-04-17 20:30:15,316 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:16:00, Close: 521.18
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1930, Slow SMA = 521.2070
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.013020, Curr diff: -0.014013
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:16:00, Close: 521.18
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1860, Slow SMA = 521.2010
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.014013, Curr diff: -0.015007
2025-04-17 20:30:15,316 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:16:00, Close: 521.18
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1840, Slow SMA = 521.1950
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015007, Curr diff: -0.011000
2025-04-17 20:30:15,316 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,316 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,316 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:17:00
2025-04-17 20:30:15,316 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:17:00, Close: 521.21
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1880, Slow SMA = 521.1963
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.011000, Curr diff: -0.008333
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:17:00, Close: 521.21
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1920, Slow SMA = 521.1977
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008333, Curr diff: -0.005667
2025-04-17 20:30:15,316 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:17:00, Close: 521.21
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1980, Slow SMA = 521.1990
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005667, Curr diff: -0.001000
2025-04-17 20:30:15,316 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,316 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,316 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:18:00
2025-04-17 20:30:15,316 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:18:00, Close: 521.29
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2200, Slow SMA = 521.2050
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.001000, Curr diff: 0.015000
2025-04-17 20:30:15,316 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 15:18:00
2025-04-17 20:30:15,316 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,316 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.29
2025-04-17 20:30:15,316 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,316 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,316 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,316 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,316 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.29
2025-04-17 20:30:15,316 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.29
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:18:00, Close: 521.29
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2420, Slow SMA = 521.2110
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.015000, Curr diff: 0.031000
2025-04-17 20:30:15,316 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:18:00, Close: 521.29
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2580, Slow SMA = 521.2170
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.031000, Curr diff: 0.041000
2025-04-17 20:30:15,316 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,316 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,316 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:19:00
2025-04-17 20:30:15,316 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:19:00, Close: 521.21
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2580, Slow SMA = 521.2167
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.041000, Curr diff: 0.041333
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:19:00, Close: 521.21
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2580, Slow SMA = 521.2163
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.041333, Curr diff: 0.041667
2025-04-17 20:30:15,316 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:19:00, Close: 521.21
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2420, Slow SMA = 521.2160
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.041667, Curr diff: 0.026000
2025-04-17 20:30:15,316 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,316 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,316 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:20:00
2025-04-17 20:30:15,316 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:20:00, Close: 521.1801
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2200, Slow SMA = 521.2153
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.026000, Curr diff: 0.004680
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:20:00, Close: 521.1801
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1980, Slow SMA = 521.2147
2025-04-17 20:30:15,316 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004680, Curr diff: -0.016640
2025-04-17 20:30:15,316 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 15:20:00
2025-04-17 20:30:15,316 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,317 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.1801
2025-04-17 20:30:15,317 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,317 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,317 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5211.80, Available: 962.29
2025-04-17 20:30:15,317 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.1801
2025-04-17 20:30:15,317 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.1801
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:20:00, Close: 521.1801
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1921, Slow SMA = 521.2140
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.016640, Curr diff: -0.021960
2025-04-17 20:30:15,317 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,317 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:21:00
2025-04-17 20:30:15,317 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:21:00, Close: 521.285
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2071, Slow SMA = 521.2210
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.021960, Curr diff: -0.013960
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:21:00, Close: 521.285
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2221, Slow SMA = 521.2280
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.013960, Curr diff: -0.005960
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:21:00, Close: 521.285
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2430, Slow SMA = 521.2350
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005960, Curr diff: 0.008020
2025-04-17 20:30:15,317 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 15:21:00
2025-04-17 20:30:15,317 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,317 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.285
2025-04-17 20:30:15,317 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,317 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,317 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.285
2025-04-17 20:30:15,317 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.285
2025-04-17 20:30:15,317 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,317 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:22:00
2025-04-17 20:30:15,317 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:22:00, Close: 521.3
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2670, Slow SMA = 521.2410
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.008020, Curr diff: 0.026000
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:22:00, Close: 521.3
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2910, Slow SMA = 521.2470
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.026000, Curr diff: 0.043980
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:22:00, Close: 521.3
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2940, Slow SMA = 521.2530
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.043980, Curr diff: 0.040980
2025-04-17 20:30:15,317 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,317 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:23:00
2025-04-17 20:30:15,317 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:23:00, Close: 521.32
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3010, Slow SMA = 521.2550
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.040980, Curr diff: 0.045980
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:23:00, Close: 521.32
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3080, Slow SMA = 521.2570
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.045980, Curr diff: 0.050980
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:23:00, Close: 521.32
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3120, Slow SMA = 521.2590
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.050980, Curr diff: 0.052980
2025-04-17 20:30:15,317 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,317 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:24:00
2025-04-17 20:30:15,317 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:24:00, Close: 521.28
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3080, Slow SMA = 521.2637
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.052980, Curr diff: 0.044313
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:24:00, Close: 521.28
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3040, Slow SMA = 521.2684
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.044313, Curr diff: 0.035647
2025-04-17 20:30:15,317 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:24:00, Close: 521.28
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2960, Slow SMA = 521.2730
2025-04-17 20:30:15,317 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.035647, Curr diff: 0.022980
2025-04-17 20:30:15,318 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,318 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,318 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:25:00
2025-04-17 20:30:15,318 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:25:00, Close: 521.3775
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3075, Slow SMA = 521.2862
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.022980, Curr diff: 0.021320
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:25:00, Close: 521.3775
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3190, Slow SMA = 521.2993
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.021320, Curr diff: 0.019660
2025-04-17 20:30:15,318 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:25:00, Close: 521.3775
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3385, Slow SMA = 521.3125
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.019660, Curr diff: 0.026000
2025-04-17 20:30:15,318 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,318 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,318 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:26:00
2025-04-17 20:30:15,318 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:26:00, Close: 521.35
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3525, Slow SMA = 521.3168
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.026000, Curr diff: 0.035667
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:26:00, Close: 521.35
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3665, Slow SMA = 521.3212
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.035667, Curr diff: 0.045333
2025-04-17 20:30:15,318 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:26:00, Close: 521.35
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3610, Slow SMA = 521.3255
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.045333, Curr diff: 0.035500
2025-04-17 20:30:15,318 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,318 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,318 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:27:00
2025-04-17 20:30:15,318 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:27:00, Close: 521.33
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3515, Slow SMA = 521.3275
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.035500, Curr diff: 0.024000
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:27:00, Close: 521.33
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3420, Slow SMA = 521.3295
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.024000, Curr diff: 0.012500
2025-04-17 20:30:15,318 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:27:00, Close: 521.33
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3380, Slow SMA = 521.3315
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.012500, Curr diff: 0.006500
2025-04-17 20:30:15,318 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,318 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,318 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:28:00
2025-04-17 20:30:15,318 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:28:00, Close: 521.35
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3380, Slow SMA = 521.3335
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.006500, Curr diff: 0.004500
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:28:00, Close: 521.35
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3380, Slow SMA = 521.3355
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004500, Curr diff: 0.002500
2025-04-17 20:30:15,318 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:28:00, Close: 521.35
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3420, Slow SMA = 521.3375
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.002500, Curr diff: 0.004500
2025-04-17 20:30:15,318 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,318 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,318 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:29:00
2025-04-17 20:30:15,318 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:29:00, Close: 521.28
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3320, Slow SMA = 521.3375
2025-04-17 20:30:15,318 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004500, Curr diff: -0.005500
2025-04-17 20:30:15,318 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 15:29:00
2025-04-17 20:30:15,318 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,318 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.28
2025-04-17 20:30:15,318 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,318 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,318 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5212.80, Available: 962.29
2025-04-17 20:30:15,318 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,318 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,318 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.28
2025-04-17 20:30:15,318 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.28
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:29:00, Close: 521.28
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3220, Slow SMA = 521.3375
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005500, Curr diff: -0.015500
2025-04-17 20:30:15,319 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:29:00, Close: 521.28
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3080, Slow SMA = 521.3375
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015500, Curr diff: -0.029500
2025-04-17 20:30:15,319 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,319 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,319 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:30:00
2025-04-17 20:30:15,319 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:30:00, Close: 521.2999
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2980, Slow SMA = 521.3323
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.029500, Curr diff: -0.034347
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:30:00, Close: 521.2999
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2880, Slow SMA = 521.3272
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.034347, Curr diff: -0.039193
2025-04-17 20:30:15,319 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:30:00, Close: 521.2999
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2919, Slow SMA = 521.3220
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.039193, Curr diff: -0.030040
2025-04-17 20:30:15,319 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,319 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,319 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:31:00
2025-04-17 20:30:15,319 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:31:00, Close: 521.19
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2739, Slow SMA = 521.3113
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.030040, Curr diff: -0.037373
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:31:00, Close: 521.19
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2559, Slow SMA = 521.3006
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.037373, Curr diff: -0.044707
2025-04-17 20:30:15,319 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:31:00, Close: 521.19
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2340, Slow SMA = 521.2900
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.044707, Curr diff: -0.056020
2025-04-17 20:30:15,319 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,319 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,319 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:32:00
2025-04-17 20:30:15,319 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:32:00, Close: 521.24
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2220, Slow SMA = 521.2840
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.056020, Curr diff: -0.062000
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:32:00, Close: 521.24
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2100, Slow SMA = 521.2780
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.062000, Curr diff: -0.067980
2025-04-17 20:30:15,319 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:32:00, Close: 521.24
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2200, Slow SMA = 521.2720
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.067980, Curr diff: -0.051980
2025-04-17 20:30:15,319 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,319 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,319 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:33:00
2025-04-17 20:30:15,319 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:33:00, Close: 521.285
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2390, Slow SMA = 521.2676
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.051980, Curr diff: -0.028647
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:33:00, Close: 521.285
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2580, Slow SMA = 521.2633
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.028647, Curr diff: -0.005313
2025-04-17 20:30:15,319 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:33:00, Close: 521.285
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2670, Slow SMA = 521.2590
2025-04-17 20:30:15,319 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005313, Curr diff: 0.008020
2025-04-17 20:30:15,319 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 15:33:00
2025-04-17 20:30:15,319 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,319 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.285
2025-04-17 20:30:15,319 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,319 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,319 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,319 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,319 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.285
2025-04-17 20:30:15,319 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.285
2025-04-17 20:30:15,319 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,319 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,320 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:34:00
2025-04-17 20:30:15,320 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:34:00, Close: 521.25
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2690, Slow SMA = 521.2570
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.008020, Curr diff: 0.012020
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:34:00, Close: 521.25
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2710, Slow SMA = 521.2550
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.012020, Curr diff: 0.016020
2025-04-17 20:30:15,320 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:34:00, Close: 521.25
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2640, Slow SMA = 521.2530
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016020, Curr diff: 0.011020
2025-04-17 20:30:15,320 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,320 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,320 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:35:00
2025-04-17 20:30:15,320 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:35:00, Close: 521.26
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2590, Slow SMA = 521.2503
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.011020, Curr diff: 0.008680
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:35:00, Close: 521.26
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2540, Slow SMA = 521.2477
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.008680, Curr diff: 0.006340
2025-04-17 20:30:15,320 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:35:00, Close: 521.26
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2560, Slow SMA = 521.2450
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.006340, Curr diff: 0.011000
2025-04-17 20:30:15,320 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,320 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,320 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:36:00
2025-04-17 20:30:15,320 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:36:00, Close: 521.23
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2520, Slow SMA = 521.2477
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.011000, Curr diff: 0.004333
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:36:00, Close: 521.23
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2480, Slow SMA = 521.2503
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004333, Curr diff: -0.002333
2025-04-17 20:30:15,320 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 15:36:00
2025-04-17 20:30:15,320 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,320 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.23
2025-04-17 20:30:15,320 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,320 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,320 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5212.30, Available: 962.29
2025-04-17 20:30:15,320 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,320 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,320 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.23
2025-04-17 20:30:15,320 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.23
2025-04-17 20:30:15,320 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:36:00, Close: 521.23
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2420, Slow SMA = 521.2530
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.002333, Curr diff: -0.011000
2025-04-17 20:30:15,320 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,320 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,320 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:37:00
2025-04-17 20:30:15,320 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:37:00, Close: 521.22
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2340, Slow SMA = 521.2517
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.011000, Curr diff: -0.017667
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:37:00, Close: 521.22
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2260, Slow SMA = 521.2503
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.017667, Curr diff: -0.024333
2025-04-17 20:30:15,320 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:37:00, Close: 521.22
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2240, Slow SMA = 521.2490
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.024333, Curr diff: -0.025000
2025-04-17 20:30:15,320 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,320 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,320 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:38:00
2025-04-17 20:30:15,320 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:38:00, Close: 521.13
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2040, Slow SMA = 521.2387
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.025000, Curr diff: -0.034667
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:38:00, Close: 521.13
2025-04-17 20:30:15,320 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1840, Slow SMA = 521.2283
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.034667, Curr diff: -0.044333
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:38:00, Close: 521.13
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1660, Slow SMA = 521.2180
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.044333, Curr diff: -0.052000
2025-04-17 20:30:15,321 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,321 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:39:00
2025-04-17 20:30:15,321 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:39:00, Close: 521.185
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1590, Slow SMA = 521.2137
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.052000, Curr diff: -0.054667
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:39:00, Close: 521.185
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1520, Slow SMA = 521.2093
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.054667, Curr diff: -0.057333
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:39:00, Close: 521.185
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1630, Slow SMA = 521.2050
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.057333, Curr diff: -0.042000
2025-04-17 20:30:15,321 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,321 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:40:00
2025-04-17 20:30:15,321 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:40:00, Close: 521.0999
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1570, Slow SMA = 521.1943
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.042000, Curr diff: -0.037347
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:40:00, Close: 521.0999
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1510, Slow SMA = 521.1837
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.037347, Curr diff: -0.032693
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:40:00, Close: 521.0999
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1339, Slow SMA = 521.1730
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.032693, Curr diff: -0.039040
2025-04-17 20:30:15,321 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,321 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:41:00
2025-04-17 20:30:15,321 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:41:00, Close: 521.23
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1429, Slow SMA = 521.1730
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.039040, Curr diff: -0.030040
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:41:00, Close: 521.23
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1519, Slow SMA = 521.1730
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.030040, Curr diff: -0.021040
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:41:00, Close: 521.23
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1780, Slow SMA = 521.1730
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.021040, Curr diff: 0.004980
2025-04-17 20:30:15,321 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 15:41:00
2025-04-17 20:30:15,321 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,321 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.23
2025-04-17 20:30:15,321 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,321 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,321 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.23
2025-04-17 20:30:15,321 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.23
2025-04-17 20:30:15,321 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,321 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:42:00
2025-04-17 20:30:15,321 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:42:00, Close: 521.21
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2000, Slow SMA = 521.1723
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004980, Curr diff: 0.027667
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:42:00, Close: 521.21
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2220, Slow SMA = 521.1716
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.027667, Curr diff: 0.050353
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:42:00, Close: 521.21
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2180, Slow SMA = 521.1710
2025-04-17 20:30:15,321 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.050353, Curr diff: 0.047020
2025-04-17 20:30:15,321 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,321 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,321 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:43:00
2025-04-17 20:30:15,322 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:43:00, Close: 521.15
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2020, Slow SMA = 521.1723
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.047020, Curr diff: 0.029687
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:43:00, Close: 521.15
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1860, Slow SMA = 521.1736
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.029687, Curr diff: 0.012353
2025-04-17 20:30:15,322 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:43:00, Close: 521.15
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1740, Slow SMA = 521.1750
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.012353, Curr diff: -0.000980
2025-04-17 20:30:15,322 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 15:43:00
2025-04-17 20:30:15,322 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,322 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.15
2025-04-17 20:30:15,322 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,322 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,322 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5211.50, Available: 962.29
2025-04-17 20:30:15,322 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,322 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,322 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.15
2025-04-17 20:30:15,322 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.15
2025-04-17 20:30:15,322 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,322 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,322 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:44:00
2025-04-17 20:30:15,322 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:44:00, Close: 521.19
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1700, Slow SMA = 521.1753
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.000980, Curr diff: -0.005313
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:44:00, Close: 521.19
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1660, Slow SMA = 521.1756
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005313, Curr diff: -0.009647
2025-04-17 20:30:15,322 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:44:00, Close: 521.19
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1740, Slow SMA = 521.1760
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.009647, Curr diff: -0.001980
2025-04-17 20:30:15,322 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,322 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,322 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:45:00
2025-04-17 20:30:15,322 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:45:00, Close: 521.18
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1800, Slow SMA = 521.1813
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.001980, Curr diff: -0.001320
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:45:00, Close: 521.18
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1860, Slow SMA = 521.1867
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.001320, Curr diff: -0.000660
2025-04-17 20:30:15,322 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:45:00, Close: 521.18
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1840, Slow SMA = 521.1920
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.000660, Curr diff: -0.008000
2025-04-17 20:30:15,322 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,322 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,322 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:46:00
2025-04-17 20:30:15,322 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:46:00, Close: 521.14
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1740, Slow SMA = 521.1860
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008000, Curr diff: -0.012000
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:46:00, Close: 521.14
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1640, Slow SMA = 521.1800
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.012000, Curr diff: -0.016000
2025-04-17 20:30:15,322 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:46:00, Close: 521.14
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1560, Slow SMA = 521.1740
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.016000, Curr diff: -0.018000
2025-04-17 20:30:15,322 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,322 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,322 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:47:00
2025-04-17 20:30:15,322 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:47:00, Close: 521.125
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1450, Slow SMA = 521.1683
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.018000, Curr diff: -0.023333
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:47:00, Close: 521.125
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1340, Slow SMA = 521.1627
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.023333, Curr diff: -0.028667
2025-04-17 20:30:15,322 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:47:00, Close: 521.125
2025-04-17 20:30:15,322 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1310, Slow SMA = 521.1570
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.028667, Curr diff: -0.026000
2025-04-17 20:30:15,323 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,323 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,323 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:48:00
2025-04-17 20:30:15,323 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:48:00, Close: 521.18
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1390, Slow SMA = 521.1590
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.026000, Curr diff: -0.020000
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:48:00, Close: 521.18
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1470, Slow SMA = 521.1610
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.020000, Curr diff: -0.014000
2025-04-17 20:30:15,323 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:48:00, Close: 521.18
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1580, Slow SMA = 521.1630
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.014000, Curr diff: -0.005000
2025-04-17 20:30:15,323 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,323 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,323 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:49:00
2025-04-17 20:30:15,323 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:49:00, Close: 521.11
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1550, Slow SMA = 521.1577
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005000, Curr diff: -0.002667
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:49:00, Close: 521.11
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1520, Slow SMA = 521.1523
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.002667, Curr diff: -0.000333
2025-04-17 20:30:15,323 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:49:00, Close: 521.11
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1380, Slow SMA = 521.1470
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.000333, Curr diff: -0.009000
2025-04-17 20:30:15,323 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,323 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,323 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:50:00
2025-04-17 20:30:15,323 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:50:00, Close: 521.28
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1580, Slow SMA = 521.1537
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.009000, Curr diff: 0.004333
2025-04-17 20:30:15,323 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 15:50:00
2025-04-17 20:30:15,323 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,323 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.28
2025-04-17 20:30:15,323 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,323 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,323 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,323 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,323 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.28
2025-04-17 20:30:15,323 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.28
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:50:00, Close: 521.28
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1780, Slow SMA = 521.1603
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004333, Curr diff: 0.017667
2025-04-17 20:30:15,323 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:50:00, Close: 521.28
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2120, Slow SMA = 521.1670
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.017667, Curr diff: 0.045000
2025-04-17 20:30:15,323 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,323 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,323 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:51:00
2025-04-17 20:30:15,323 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:51:00, Close: 521.3601
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2620, Slow SMA = 521.1817
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.045000, Curr diff: 0.080347
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:51:00, Close: 521.3601
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3120, Slow SMA = 521.1963
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.080347, Curr diff: 0.115693
2025-04-17 20:30:15,323 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:51:00, Close: 521.3601
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3281, Slow SMA = 521.2110
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.115693, Curr diff: 0.117040
2025-04-17 20:30:15,323 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,323 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,323 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:52:00
2025-04-17 20:30:15,323 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:52:00, Close: 521.38
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3481, Slow SMA = 521.2280
2025-04-17 20:30:15,323 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.117040, Curr diff: 0.120040
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:52:00, Close: 521.38
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3681, Slow SMA = 521.2450
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.120040, Curr diff: 0.123040
2025-04-17 20:30:15,324 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:52:00, Close: 521.38
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3720, Slow SMA = 521.2620
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.123040, Curr diff: 0.110020
2025-04-17 20:30:15,324 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,324 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,324 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:53:00
2025-04-17 20:30:15,324 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:53:00, Close: 521.34
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3680, Slow SMA = 521.2727
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.110020, Curr diff: 0.095333
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:53:00, Close: 521.34
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3640, Slow SMA = 521.2834
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.095333, Curr diff: 0.080647
2025-04-17 20:30:15,324 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:53:00, Close: 521.34
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3560, Slow SMA = 521.2940
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.080647, Curr diff: 0.061980
2025-04-17 20:30:15,324 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,324 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,324 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:54:00
2025-04-17 20:30:15,324 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:54:00, Close: 521.4
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3600, Slow SMA = 521.3134
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.061980, Curr diff: 0.046647
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:54:00, Close: 521.4
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3640, Slow SMA = 521.3327
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.046647, Curr diff: 0.031313
2025-04-17 20:30:15,324 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:54:00, Close: 521.4
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3760, Slow SMA = 521.3520
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.031313, Curr diff: 0.023980
2025-04-17 20:30:15,324 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,324 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,324 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:55:00
2025-04-17 20:30:15,324 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:55:00, Close: 521.39
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3860, Slow SMA = 521.3594
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.023980, Curr diff: 0.026647
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:55:00, Close: 521.39
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3960, Slow SMA = 521.3667
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.026647, Curr diff: 0.029313
2025-04-17 20:30:15,324 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:55:00, Close: 521.39
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3940, Slow SMA = 521.3740
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.029313, Curr diff: 0.019980
2025-04-17 20:30:15,324 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,324 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,324 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:56:00
2025-04-17 20:30:15,324 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:56:00, Close: 521.405
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3950, Slow SMA = 521.3770
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.019980, Curr diff: 0.017987
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:56:00, Close: 521.405
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3960, Slow SMA = 521.3800
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.017987, Curr diff: 0.015993
2025-04-17 20:30:15,324 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:56:00, Close: 521.405
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3990, Slow SMA = 521.3830
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.015993, Curr diff: 0.016000
2025-04-17 20:30:15,324 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,324 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,324 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:57:00
2025-04-17 20:30:15,324 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:57:00, Close: 521.355
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3920, Slow SMA = 521.3813
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016000, Curr diff: 0.010667
2025-04-17 20:30:15,324 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:57:00, Close: 521.355
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3850, Slow SMA = 521.3797
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.010667, Curr diff: 0.005333
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:57:00, Close: 521.355
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3750, Slow SMA = 521.3780
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.005333, Curr diff: -0.003000
2025-04-17 20:30:15,325 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 15:57:00
2025-04-17 20:30:15,325 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,325 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.355
2025-04-17 20:30:15,325 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,325 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,325 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5213.55, Available: 962.29
2025-04-17 20:30:15,325 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.355
2025-04-17 20:30:15,325 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.355
2025-04-17 20:30:15,325 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,325 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:58:00
2025-04-17 20:30:15,325 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:58:00, Close: 521.3994
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3739, Slow SMA = 521.3820
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.003000, Curr diff: -0.008080
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:58:00, Close: 521.3994
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3728, Slow SMA = 521.3859
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008080, Curr diff: -0.013160
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:58:00, Close: 521.3994
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3816, Slow SMA = 521.3899
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.013160, Curr diff: -0.008240
2025-04-17 20:30:15,325 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,325 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 15:59:00
2025-04-17 20:30:15,325 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:59:00, Close: 521.3969
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3900, Slow SMA = 521.3897
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008240, Curr diff: 0.000347
2025-04-17 20:30:15,325 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 15:59:00
2025-04-17 20:30:15,325 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,325 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.3969
2025-04-17 20:30:15,325 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,325 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,325 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.3969
2025-04-17 20:30:15,325 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.3969
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:59:00, Close: 521.3969
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3984, Slow SMA = 521.3895
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.000347, Curr diff: 0.008933
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 15:59:00, Close: 521.3969
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3979, Slow SMA = 521.3893
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.008933, Curr diff: 0.008640
2025-04-17 20:30:15,325 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,325 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:00:00
2025-04-17 20:30:15,325 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:00:00, Close: 521.42
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4020, Slow SMA = 521.3913
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.008640, Curr diff: 0.010760
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:00:00, Close: 521.42
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4061, Slow SMA = 521.3933
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.010760, Curr diff: 0.012880
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:00:00, Close: 521.42
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4108, Slow SMA = 521.3953
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.012880, Curr diff: 0.015500
2025-04-17 20:30:15,325 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,325 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:01:00
2025-04-17 20:30:15,325 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:01:00, Close: 521.38
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4074, Slow SMA = 521.3936
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.015500, Curr diff: 0.013787
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:01:00, Close: 521.38
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.4040, Slow SMA = 521.3919
2025-04-17 20:30:15,325 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.013787, Curr diff: 0.012073
2025-04-17 20:30:15,325 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:01:00, Close: 521.38
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3960, Slow SMA = 521.3903
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.012073, Curr diff: 0.005740
2025-04-17 20:30:15,326 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,326 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,326 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:02:00
2025-04-17 20:30:15,326 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:02:00, Close: 521.3099
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3740, Slow SMA = 521.3873
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.005740, Curr diff: -0.013273
2025-04-17 20:30:15,326 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 16:02:00
2025-04-17 20:30:15,326 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,326 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.3099
2025-04-17 20:30:15,326 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,326 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,326 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5213.10, Available: 962.29
2025-04-17 20:30:15,326 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,326 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,326 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.3099
2025-04-17 20:30:15,326 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.3099
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:02:00, Close: 521.3099
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3520, Slow SMA = 521.3842
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.013273, Curr diff: -0.032287
2025-04-17 20:30:15,326 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:02:00, Close: 521.3099
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3379, Slow SMA = 521.3812
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.032287, Curr diff: -0.043300
2025-04-17 20:30:15,326 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,326 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,326 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:03:00
2025-04-17 20:30:15,326 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:03:00, Close: 521.28
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.3179, Slow SMA = 521.3733
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.043300, Curr diff: -0.055340
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:03:00, Close: 521.28
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2979, Slow SMA = 521.3653
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.055340, Curr diff: -0.067380
2025-04-17 20:30:15,326 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:03:00, Close: 521.28
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2920, Slow SMA = 521.3574
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.067380, Curr diff: -0.065400
2025-04-17 20:30:15,326 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,326 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,326 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:04:00
2025-04-17 20:30:15,326 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:04:00, Close: 521.23
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2760, Slow SMA = 521.3462
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.065400, Curr diff: -0.070253
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:04:00, Close: 521.23
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2600, Slow SMA = 521.3351
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.070253, Curr diff: -0.075107
2025-04-17 20:30:15,326 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:04:00, Close: 521.23
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2500, Slow SMA = 521.3240
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.075107, Curr diff: -0.073980
2025-04-17 20:30:15,326 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,326 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,326 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:05:00
2025-04-17 20:30:15,326 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:05:00, Close: 521.2
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2340, Slow SMA = 521.3093
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.073980, Curr diff: -0.075313
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:05:00, Close: 521.2
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2180, Slow SMA = 521.2946
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.075313, Curr diff: -0.076647
2025-04-17 20:30:15,326 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:05:00, Close: 521.2
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2120, Slow SMA = 521.2800
2025-04-17 20:30:15,326 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.076647, Curr diff: -0.067980
2025-04-17 20:30:15,326 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,326 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:06:00
2025-04-17 20:30:15,327 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:06:00, Close: 521.1699
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2000, Slow SMA = 521.2660
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.067980, Curr diff: -0.065993
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:06:00, Close: 521.1699
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1880, Slow SMA = 521.2520
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.065993, Curr diff: -0.064007
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:06:00, Close: 521.1699
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1819, Slow SMA = 521.2380
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.064007, Curr diff: -0.056020
2025-04-17 20:30:15,327 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,327 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:07:00
2025-04-17 20:30:15,327 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:07:00, Close: 521.25
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1919, Slow SMA = 521.2340
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.056020, Curr diff: -0.042027
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:07:00, Close: 521.25
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2019, Slow SMA = 521.2300
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.042027, Curr diff: -0.028033
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:07:00, Close: 521.25
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2180, Slow SMA = 521.2260
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.028033, Curr diff: -0.008020
2025-04-17 20:30:15,327 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,327 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:08:00
2025-04-17 20:30:15,327 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:08:00, Close: 521.2085
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2257, Slow SMA = 521.2212
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008020, Curr diff: 0.004467
2025-04-17 20:30:15,327 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 16:08:00
2025-04-17 20:30:15,327 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,327 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.2085
2025-04-17 20:30:15,327 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,327 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,327 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.2085
2025-04-17 20:30:15,327 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.2085
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:08:00, Close: 521.2085
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2334, Slow SMA = 521.2164
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004467, Curr diff: 0.016953
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:08:00, Close: 521.2085
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2251, Slow SMA = 521.2117
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016953, Curr diff: 0.013420
2025-04-17 20:30:15,327 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,327 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:09:00
2025-04-17 20:30:15,327 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:09:00, Close: 521.195
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2141, Slow SMA = 521.2093
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.013420, Curr diff: 0.004753
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:09:00, Close: 521.195
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2031, Slow SMA = 521.2070
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004753, Curr diff: -0.003913
2025-04-17 20:30:15,327 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 16:09:00
2025-04-17 20:30:15,327 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,327 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.195
2025-04-17 20:30:15,327 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,327 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,327 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5211.95, Available: 962.29
2025-04-17 20:30:15,327 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.195
2025-04-17 20:30:15,327 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.195
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:09:00, Close: 521.195
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2004, Slow SMA = 521.2047
2025-04-17 20:30:15,327 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.003913, Curr diff: -0.004280
2025-04-17 20:30:15,327 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,327 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,327 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:10:00
2025-04-17 20:30:15,327 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:10:00, Close: 521.2
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1987, Slow SMA = 521.2047
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.004280, Curr diff: -0.005980
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:10:00, Close: 521.2
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1970, Slow SMA = 521.2047
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005980, Curr diff: -0.007680
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:10:00, Close: 521.2
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1980, Slow SMA = 521.2047
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.007680, Curr diff: -0.006680
2025-04-17 20:30:15,328 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,328 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:11:00
2025-04-17 20:30:15,328 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:11:00, Close: 521.23
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2050, Slow SMA = 521.2087
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.006680, Curr diff: -0.003687
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:11:00, Close: 521.23
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2120, Slow SMA = 521.2127
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.003687, Curr diff: -0.000693
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:11:00, Close: 521.23
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2180, Slow SMA = 521.2167
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.000693, Curr diff: 0.001300
2025-04-17 20:30:15,328 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 16:11:00
2025-04-17 20:30:15,328 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,328 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.23
2025-04-17 20:30:15,328 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,328 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,328 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.23
2025-04-17 20:30:15,328 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.23
2025-04-17 20:30:15,328 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,328 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:12:00
2025-04-17 20:30:15,328 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:12:00, Close: 521.18
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2140, Slow SMA = 521.2120
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001300, Curr diff: 0.001967
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:12:00, Close: 521.18
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2100, Slow SMA = 521.2074
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001967, Curr diff: 0.002633
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:12:00, Close: 521.18
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.2000, Slow SMA = 521.2027
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.002633, Curr diff: -0.002700
2025-04-17 20:30:15,328 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 16:12:00
2025-04-17 20:30:15,328 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,328 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.18
2025-04-17 20:30:15,328 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,328 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,328 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5211.80, Available: 962.29
2025-04-17 20:30:15,328 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.18
2025-04-17 20:30:15,328 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.18
2025-04-17 20:30:15,328 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,328 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:13:00
2025-04-17 20:30:15,328 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:13:00, Close: 521.155
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1850, Slow SMA = 521.1991
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.002700, Curr diff: -0.014133
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:13:00, Close: 521.155
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1700, Slow SMA = 521.1956
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.014133, Curr diff: -0.025567
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:13:00, Close: 521.155
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1650, Slow SMA = 521.1920
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.025567, Curr diff: -0.027000
2025-04-17 20:30:15,328 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,328 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,328 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:14:00
2025-04-17 20:30:15,328 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:14:00, Close: 521.18
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1650, Slow SMA = 521.1910
2025-04-17 20:30:15,328 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.027000, Curr diff: -0.026000
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:14:00, Close: 521.18
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1650, Slow SMA = 521.1900
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.026000, Curr diff: -0.025000
2025-04-17 20:30:15,329 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:14:00, Close: 521.18
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1700, Slow SMA = 521.1890
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.025000, Curr diff: -0.019000
2025-04-17 20:30:15,329 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,329 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,329 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:15:00
2025-04-17 20:30:15,329 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:15:00, Close: 521.17
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1730, Slow SMA = 521.1870
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.019000, Curr diff: -0.014000
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:15:00, Close: 521.17
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1760, Slow SMA = 521.1850
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.014000, Curr diff: -0.009000
2025-04-17 20:30:15,329 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:15:00, Close: 521.17
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1740, Slow SMA = 521.1830
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.009000, Curr diff: -0.009000
2025-04-17 20:30:15,329 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,329 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,329 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:16:00
2025-04-17 20:30:15,329 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:16:00, Close: 521.11
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1600, Slow SMA = 521.1750
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.009000, Curr diff: -0.015000
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:16:00, Close: 521.11
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1460, Slow SMA = 521.1670
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015000, Curr diff: -0.021000
2025-04-17 20:30:15,329 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:16:00, Close: 521.11
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1340, Slow SMA = 521.1590
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.021000, Curr diff: -0.025000
2025-04-17 20:30:15,329 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,329 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,329 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:17:00
2025-04-17 20:30:15,329 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:17:00, Close: 521.1504
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1301, Slow SMA = 521.1570
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.025000, Curr diff: -0.026947
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:17:00, Close: 521.1504
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1262, Slow SMA = 521.1551
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.026947, Curr diff: -0.028893
2025-04-17 20:30:15,329 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:17:00, Close: 521.1504
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1342, Slow SMA = 521.1531
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.028893, Curr diff: -0.018840
2025-04-17 20:30:15,329 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,329 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,329 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:18:00
2025-04-17 20:30:15,329 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:18:00, Close: 521.21
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1542, Slow SMA = 521.1567
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.018840, Curr diff: -0.002507
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:18:00, Close: 521.21
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1742, Slow SMA = 521.1604
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.002507, Curr diff: 0.013827
2025-04-17 20:30:15,329 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 16:18:00
2025-04-17 20:30:15,329 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,329 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.21
2025-04-17 20:30:15,329 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,329 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,329 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,329 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,329 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.21
2025-04-17 20:30:15,329 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.21
2025-04-17 20:30:15,329 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:18:00, Close: 521.21
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1862, Slow SMA = 521.1641
2025-04-17 20:30:15,329 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.013827, Curr diff: 0.022080
2025-04-17 20:30:15,329 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,329 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:19:00
2025-04-17 20:30:15,330 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:19:00, Close: 521.115
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1791, Slow SMA = 521.1597
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.022080, Curr diff: 0.019333
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:19:00, Close: 521.115
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1720, Slow SMA = 521.1554
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.019333, Curr diff: 0.016587
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:19:00, Close: 521.115
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1530, Slow SMA = 521.1511
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016587, Curr diff: 0.001920
2025-04-17 20:30:15,330 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,330 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:20:00
2025-04-17 20:30:15,330 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:20:00, Close: 521.0
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1110, Slow SMA = 521.1397
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001920, Curr diff: -0.028747
2025-04-17 20:30:15,330 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 16:20:00
2025-04-17 20:30:15,330 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,330 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.0
2025-04-17 20:30:15,330 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,330 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,330 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5210.00, Available: 962.29
2025-04-17 20:30:15,330 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.0
2025-04-17 20:30:15,330 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.0
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:20:00, Close: 521.0
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0690, Slow SMA = 521.1284
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.028747, Curr diff: -0.059413
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:20:00, Close: 521.0
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0460, Slow SMA = 521.1171
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.059413, Curr diff: -0.071080
2025-04-17 20:30:15,330 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,330 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:21:00
2025-04-17 20:30:15,330 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:21:00, Close: 521.0
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0230, Slow SMA = 521.1097
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.071080, Curr diff: -0.086747
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:21:00, Close: 521.0
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0000, Slow SMA = 521.1024
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.086747, Curr diff: -0.102413
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:21:00, Close: 521.0
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0000, Slow SMA = 521.0951
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.102413, Curr diff: -0.095080
2025-04-17 20:30:15,330 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,330 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:22:00
2025-04-17 20:30:15,330 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:22:00, Close: 520.9699
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9940, Slow SMA = 521.0830
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.095080, Curr diff: -0.089067
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:22:00, Close: 520.9699
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9880, Slow SMA = 521.0710
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.089067, Curr diff: -0.083053
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:22:00, Close: 520.9699
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9819, Slow SMA = 521.0590
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.083053, Curr diff: -0.077040
2025-04-17 20:30:15,330 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,330 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:23:00
2025-04-17 20:30:15,330 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:23:00, Close: 521.01
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9839, Slow SMA = 521.0456
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.077040, Curr diff: -0.061707
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:23:00, Close: 521.01
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9859, Slow SMA = 521.0323
2025-04-17 20:30:15,330 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.061707, Curr diff: -0.046373
2025-04-17 20:30:15,330 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:23:00, Close: 521.01
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9940, Slow SMA = 521.0190
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.046373, Curr diff: -0.025020
2025-04-17 20:30:15,331 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,331 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:24:00
2025-04-17 20:30:15,331 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:24:00, Close: 521.02
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0040, Slow SMA = 521.0126
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.025020, Curr diff: -0.008667
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:24:00, Close: 521.02
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0140, Slow SMA = 521.0063
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008667, Curr diff: 0.007687
2025-04-17 20:30:15,331 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 16:24:00
2025-04-17 20:30:15,331 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,331 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.02
2025-04-17 20:30:15,331 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,331 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,331 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.02
2025-04-17 20:30:15,331 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.02
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:24:00, Close: 521.02
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0160, Slow SMA = 521.0000
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.007687, Curr diff: 0.016020
2025-04-17 20:30:15,331 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,331 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:25:00
2025-04-17 20:30:15,331 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:25:00, Close: 520.96
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0060, Slow SMA = 520.9973
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016020, Curr diff: 0.008687
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:25:00, Close: 520.96
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9960, Slow SMA = 520.9946
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.008687, Curr diff: 0.001353
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:25:00, Close: 520.96
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9840, Slow SMA = 520.9920
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001353, Curr diff: -0.007980
2025-04-17 20:30:15,331 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 16:25:00
2025-04-17 20:30:15,331 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,331 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.96
2025-04-17 20:30:15,331 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,331 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,331 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5209.60, Available: 962.29
2025-04-17 20:30:15,331 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.96
2025-04-17 20:30:15,331 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.96
2025-04-17 20:30:15,331 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,331 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:26:00
2025-04-17 20:30:15,331 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:26:00, Close: 520.98
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9760, Slow SMA = 520.9906
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.007980, Curr diff: -0.014647
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:26:00, Close: 520.98
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9680, Slow SMA = 520.9893
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.014647, Curr diff: -0.021313
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:26:00, Close: 520.98
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9720, Slow SMA = 520.9880
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.021313, Curr diff: -0.015980
2025-04-17 20:30:15,331 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,331 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:27:00
2025-04-17 20:30:15,331 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:27:00, Close: 520.99
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9780, Slow SMA = 520.9893
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015980, Curr diff: -0.011320
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:27:00, Close: 520.99
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9840, Slow SMA = 520.9907
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.011320, Curr diff: -0.006660
2025-04-17 20:30:15,331 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,331 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:27:00, Close: 520.99
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9860, Slow SMA = 520.9920
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.006660, Curr diff: -0.006000
2025-04-17 20:30:15,332 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,332 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,332 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:28:00
2025-04-17 20:30:15,332 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:28:00, Close: 521.1099
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0120, Slow SMA = 520.9987
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.006000, Curr diff: 0.013320
2025-04-17 20:30:15,332 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 16:28:00
2025-04-17 20:30:15,332 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,332 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.1099
2025-04-17 20:30:15,332 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,332 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,332 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,332 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,332 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.1099
2025-04-17 20:30:15,332 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.1099
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:28:00, Close: 521.1099
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0380, Slow SMA = 521.0053
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.013320, Curr diff: 0.032640
2025-04-17 20:30:15,332 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:28:00, Close: 521.1099
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0619, Slow SMA = 521.0120
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.032640, Curr diff: 0.049960
2025-04-17 20:30:15,332 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,332 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,332 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:29:00
2025-04-17 20:30:15,332 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:29:00, Close: 521.14
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0919, Slow SMA = 521.0200
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.049960, Curr diff: 0.071960
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:29:00, Close: 521.14
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1219, Slow SMA = 521.0280
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.071960, Curr diff: 0.093960
2025-04-17 20:30:15,332 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:29:00, Close: 521.14
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1280, Slow SMA = 521.0360
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.093960, Curr diff: 0.091980
2025-04-17 20:30:15,332 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,332 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,332 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:30:00
2025-04-17 20:30:15,332 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:30:00, Close: 521.09
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1240, Slow SMA = 521.0446
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.091980, Curr diff: 0.079333
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:30:00, Close: 521.09
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1200, Slow SMA = 521.0533
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.079333, Curr diff: 0.066687
2025-04-17 20:30:15,332 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:30:00, Close: 521.09
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.1100, Slow SMA = 521.0620
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.066687, Curr diff: 0.048020
2025-04-17 20:30:15,332 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,332 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,332 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:31:00
2025-04-17 20:30:15,332 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:31:00, Close: 521.0779
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0976, Slow SMA = 521.0685
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.048020, Curr diff: 0.029073
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:31:00, Close: 521.0779
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0852, Slow SMA = 521.0750
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.029073, Curr diff: 0.010127
2025-04-17 20:30:15,332 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:31:00, Close: 521.0779
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0827, Slow SMA = 521.0816
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.010127, Curr diff: 0.001180
2025-04-17 20:30:15,332 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,332 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,332 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:32:00
2025-04-17 20:30:15,332 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:32:00, Close: 521.01
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0667, Slow SMA = 521.0829
2025-04-17 20:30:15,332 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001180, Curr diff: -0.016153
2025-04-17 20:30:15,333 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 16:32:00
2025-04-17 20:30:15,333 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,333 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 521.01
2025-04-17 20:30:15,333 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,333 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,333 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5210.10, Available: 962.29
2025-04-17 20:30:15,333 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 521.01
2025-04-17 20:30:15,333 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 521.01
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:32:00, Close: 521.01
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0507, Slow SMA = 521.0842
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.016153, Curr diff: -0.033487
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:32:00, Close: 521.01
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0372, Slow SMA = 521.0856
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.033487, Curr diff: -0.048400
2025-04-17 20:30:15,333 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,333 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:33:00
2025-04-17 20:30:15,333 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:33:00, Close: 521.0199
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0256, Slow SMA = 521.0796
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.048400, Curr diff: -0.054000
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:33:00, Close: 521.0199
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0140, Slow SMA = 521.0736
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.054000, Curr diff: -0.059600
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:33:00, Close: 521.0199
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0159, Slow SMA = 521.0676
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.059600, Curr diff: -0.051620
2025-04-17 20:30:15,333 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,333 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:34:00
2025-04-17 20:30:15,333 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:34:00, Close: 520.97
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0079, Slow SMA = 521.0562
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.051620, Curr diff: -0.048287
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:34:00, Close: 520.97
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9999, Slow SMA = 521.0449
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.048287, Curr diff: -0.044953
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:34:00, Close: 520.97
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9900, Slow SMA = 521.0336
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.044953, Curr diff: -0.043600
2025-04-17 20:30:15,333 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,333 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:35:00
2025-04-17 20:30:15,333 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:35:00, Close: 521.06
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9980, Slow SMA = 521.0316
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.043600, Curr diff: -0.033580
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:35:00, Close: 521.06
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0060, Slow SMA = 521.0296
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.033580, Curr diff: -0.023560
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:35:00, Close: 521.06
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0240, Slow SMA = 521.0276
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.023560, Curr diff: -0.003560
2025-04-17 20:30:15,333 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,333 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:36:00
2025-04-17 20:30:15,333 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:36:00, Close: 520.99
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0280, Slow SMA = 521.0217
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.003560, Curr diff: 0.006300
2025-04-17 20:30:15,333 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 16:36:00
2025-04-17 20:30:15,333 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,333 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.99
2025-04-17 20:30:15,333 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,333 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,333 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,333 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.99
2025-04-17 20:30:15,333 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.99
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:36:00, Close: 520.99
2025-04-17 20:30:15,333 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0320, Slow SMA = 521.0158
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.006300, Curr diff: 0.016160
2025-04-17 20:30:15,334 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:36:00, Close: 520.99
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0180, Slow SMA = 521.0100
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016160, Curr diff: 0.008020
2025-04-17 20:30:15,334 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,334 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,334 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:37:00
2025-04-17 20:30:15,334 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:37:00, Close: 520.98
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0020, Slow SMA = 521.0080
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.008020, Curr diff: -0.005980
2025-04-17 20:30:15,334 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 16:37:00
2025-04-17 20:30:15,334 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,334 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.98
2025-04-17 20:30:15,334 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,334 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,334 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5209.80, Available: 962.29
2025-04-17 20:30:15,334 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,334 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,334 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.98
2025-04-17 20:30:15,334 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.98
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:37:00, Close: 520.98
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9860, Slow SMA = 521.0060
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005980, Curr diff: -0.019980
2025-04-17 20:30:15,334 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:37:00, Close: 520.98
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9840, Slow SMA = 521.0040
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.019980, Curr diff: -0.019980
2025-04-17 20:30:15,334 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,334 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,334 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:38:00
2025-04-17 20:30:15,334 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:38:00, Close: 520.94
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9740, Slow SMA = 520.9987
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.019980, Curr diff: -0.024653
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:38:00, Close: 520.94
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9640, Slow SMA = 520.9933
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.024653, Curr diff: -0.029327
2025-04-17 20:30:15,334 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:38:00, Close: 520.94
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9560, Slow SMA = 520.9880
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.029327, Curr diff: -0.032000
2025-04-17 20:30:15,334 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,334 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,334 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:39:00
2025-04-17 20:30:15,334 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:39:00, Close: 520.9899
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9580, Slow SMA = 520.9893
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.032000, Curr diff: -0.031347
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:39:00, Close: 520.9899
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9600, Slow SMA = 520.9907
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.031347, Curr diff: -0.030693
2025-04-17 20:30:15,334 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:39:00, Close: 520.9899
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9699, Slow SMA = 520.9920
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.030693, Curr diff: -0.022040
2025-04-17 20:30:15,334 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,334 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,334 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:40:00
2025-04-17 20:30:15,334 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:40:00, Close: 520.935
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9689, Slow SMA = 520.9836
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.022040, Curr diff: -0.014707
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:40:00, Close: 520.935
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9679, Slow SMA = 520.9753
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.014707, Curr diff: -0.007373
2025-04-17 20:30:15,334 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:40:00, Close: 520.935
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9570, Slow SMA = 520.9670
2025-04-17 20:30:15,334 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.007373, Curr diff: -0.010020
2025-04-17 20:30:15,334 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,334 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:41:00
2025-04-17 20:30:15,335 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:41:00, Close: 520.9287
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9447, Slow SMA = 520.9629
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.010020, Curr diff: -0.018173
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:41:00, Close: 520.9287
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9325, Slow SMA = 520.9588
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.018173, Curr diff: -0.026327
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:41:00, Close: 520.9287
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9312, Slow SMA = 520.9547
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.026327, Curr diff: -0.023500
2025-04-17 20:30:15,335 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,335 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:42:00
2025-04-17 20:30:15,335 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:42:00, Close: 520.97
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9382, Slow SMA = 520.9541
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.023500, Curr diff: -0.015833
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:42:00, Close: 520.97
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9452, Slow SMA = 520.9534
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015833, Curr diff: -0.008167
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:42:00, Close: 520.97
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9535, Slow SMA = 520.9527
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008167, Curr diff: 0.000760
2025-04-17 20:30:15,335 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 16:42:00
2025-04-17 20:30:15,335 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,335 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.97
2025-04-17 20:30:15,335 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,335 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,335 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.97
2025-04-17 20:30:15,335 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.97
2025-04-17 20:30:15,335 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,335 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:43:00
2025-04-17 20:30:15,335 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:43:00, Close: 520.95
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9577, Slow SMA = 520.9534
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.000760, Curr diff: 0.004353
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:43:00, Close: 520.95
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9620, Slow SMA = 520.9541
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004353, Curr diff: 0.007947
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:43:00, Close: 520.95
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9580, Slow SMA = 520.9547
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.007947, Curr diff: 0.003280
2025-04-17 20:30:15,335 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,335 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:44:00
2025-04-17 20:30:15,335 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:44:00, Close: 520.92
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9480, Slow SMA = 520.9501
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.003280, Curr diff: -0.002060
2025-04-17 20:30:15,335 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 16:44:00
2025-04-17 20:30:15,335 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,335 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.92
2025-04-17 20:30:15,335 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,335 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,335 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5209.20, Available: 962.29
2025-04-17 20:30:15,335 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.92
2025-04-17 20:30:15,335 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.92
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:44:00, Close: 520.92
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9380, Slow SMA = 520.9454
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.002060, Curr diff: -0.007400
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:44:00, Close: 520.92
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9320, Slow SMA = 520.9407
2025-04-17 20:30:15,335 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.007400, Curr diff: -0.008740
2025-04-17 20:30:15,335 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,335 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,335 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:45:00
2025-04-17 20:30:15,335 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:45:00, Close: 520.885
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9190, Slow SMA = 520.9374
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008740, Curr diff: -0.018407
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:45:00, Close: 520.885
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9060, Slow SMA = 520.9341
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.018407, Curr diff: -0.028073
2025-04-17 20:30:15,336 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:45:00, Close: 520.885
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8990, Slow SMA = 520.9307
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.028073, Curr diff: -0.031740
2025-04-17 20:30:15,336 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,336 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,336 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:46:00
2025-04-17 20:30:15,336 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:46:00, Close: 520.9099
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8970, Slow SMA = 520.9295
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.031740, Curr diff: -0.032507
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:46:00, Close: 520.9099
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8950, Slow SMA = 520.9282
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.032507, Curr diff: -0.033273
2025-04-17 20:30:15,336 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:46:00, Close: 520.9099
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8999, Slow SMA = 520.9270
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.033273, Curr diff: -0.027040
2025-04-17 20:30:15,336 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,336 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,336 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:47:00
2025-04-17 20:30:15,336 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:47:00, Close: 520.96
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9149, Slow SMA = 520.9263
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.027040, Curr diff: -0.011373
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:47:00, Close: 520.96
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9299, Slow SMA = 520.9256
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.011373, Curr diff: 0.004293
2025-04-17 20:30:15,336 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 16:47:00
2025-04-17 20:30:15,336 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,336 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.96
2025-04-17 20:30:15,336 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,336 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,336 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,336 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,336 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.96
2025-04-17 20:30:15,336 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.96
2025-04-17 20:30:15,336 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:47:00, Close: 520.96
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9400, Slow SMA = 520.9250
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004293, Curr diff: 0.014980
2025-04-17 20:30:15,336 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,336 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,336 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:48:00
2025-04-17 20:30:15,336 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:48:00, Close: 521.04
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9660, Slow SMA = 520.9310
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.014980, Curr diff: 0.035000
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:48:00, Close: 521.04
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9920, Slow SMA = 520.9370
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.035000, Curr diff: 0.055020
2025-04-17 20:30:15,336 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:48:00, Close: 521.04
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0080, Slow SMA = 520.9430
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.055020, Curr diff: 0.065020
2025-04-17 20:30:15,336 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,336 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,336 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:49:00
2025-04-17 20:30:15,336 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:49:00, Close: 520.96
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0080, Slow SMA = 520.9456
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.065020, Curr diff: 0.062353
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:49:00, Close: 520.96
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0080, Slow SMA = 520.9483
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.062353, Curr diff: 0.059687
2025-04-17 20:30:15,336 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:49:00, Close: 520.96
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9920, Slow SMA = 520.9510
2025-04-17 20:30:15,336 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.059687, Curr diff: 0.041020
2025-04-17 20:30:15,336 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,337 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,337 - src.engine.backtester - INFO - Processed 200 bars, 0 signals, 0 orders, 36 fills
2025-04-17 20:30:15,337 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:50:00
2025-04-17 20:30:15,337 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:50:00, Close: 521.017
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9874, Slow SMA = 520.9598
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.041020, Curr diff: 0.027620
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:50:00, Close: 521.017
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9828, Slow SMA = 520.9686
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.027620, Curr diff: 0.014220
2025-04-17 20:30:15,337 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:50:00, Close: 521.017
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9942, Slow SMA = 520.9774
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.014220, Curr diff: 0.016820
2025-04-17 20:30:15,337 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,337 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,337 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:51:00
2025-04-17 20:30:15,337 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:51:00, Close: 520.965
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9952, Slow SMA = 520.9811
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016820, Curr diff: 0.014147
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:51:00, Close: 520.965
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9962, Slow SMA = 520.9847
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.014147, Curr diff: 0.011473
2025-04-17 20:30:15,337 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:51:00, Close: 520.965
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9858, Slow SMA = 520.9884
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.011473, Curr diff: -0.002600
2025-04-17 20:30:15,337 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 16:51:00
2025-04-17 20:30:15,337 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,337 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.965
2025-04-17 20:30:15,337 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,337 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,337 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5209.65, Available: 962.29
2025-04-17 20:30:15,337 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,337 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,337 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.965
2025-04-17 20:30:15,337 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.965
2025-04-17 20:30:15,337 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,337 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,337 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:52:00
2025-04-17 20:30:15,337 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:52:00, Close: 520.875
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9574, Slow SMA = 520.9827
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.002600, Curr diff: -0.025333
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:52:00, Close: 520.875
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9290, Slow SMA = 520.9771
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.025333, Curr diff: -0.048067
2025-04-17 20:30:15,337 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:52:00, Close: 520.875
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9110, Slow SMA = 520.9714
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.048067, Curr diff: -0.060400
2025-04-17 20:30:15,337 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,337 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,337 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:53:00
2025-04-17 20:30:15,337 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:53:00, Close: 520.885
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8950, Slow SMA = 520.9611
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.060400, Curr diff: -0.066067
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:53:00, Close: 520.885
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8790, Slow SMA = 520.9507
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.066067, Curr diff: -0.071733
2025-04-17 20:30:15,337 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:53:00, Close: 520.885
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8810, Slow SMA = 520.9404
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.071733, Curr diff: -0.059400
2025-04-17 20:30:15,337 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,337 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,337 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:54:00
2025-04-17 20:30:15,337 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:54:00, Close: 520.865
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8790, Slow SMA = 520.9341
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.059400, Curr diff: -0.055067
2025-04-17 20:30:15,337 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:54:00, Close: 520.865
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8770, Slow SMA = 520.9277
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.055067, Curr diff: -0.050733
2025-04-17 20:30:15,338 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:54:00, Close: 520.865
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8730, Slow SMA = 520.9214
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.050733, Curr diff: -0.048400
2025-04-17 20:30:15,338 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,338 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,338 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:55:00
2025-04-17 20:30:15,338 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:55:00, Close: 520.89
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8740, Slow SMA = 520.9129
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.048400, Curr diff: -0.038933
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:55:00, Close: 520.89
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8750, Slow SMA = 520.9045
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.038933, Curr diff: -0.029467
2025-04-17 20:30:15,338 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:55:00, Close: 520.89
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8800, Slow SMA = 520.8960
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.029467, Curr diff: -0.016000
2025-04-17 20:30:15,338 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,338 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,338 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:56:00
2025-04-17 20:30:15,338 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:56:00, Close: 520.87
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8810, Slow SMA = 520.8897
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.016000, Curr diff: -0.008667
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:56:00, Close: 520.87
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8820, Slow SMA = 520.8833
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008667, Curr diff: -0.001333
2025-04-17 20:30:15,338 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:56:00, Close: 520.87
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8780, Slow SMA = 520.8770
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.001333, Curr diff: 0.001000
2025-04-17 20:30:15,338 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 16:56:00
2025-04-17 20:30:15,338 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,338 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.87
2025-04-17 20:30:15,338 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,338 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,338 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,338 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,338 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.87
2025-04-17 20:30:15,338 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.87
2025-04-17 20:30:15,338 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,338 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,338 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:57:00
2025-04-17 20:30:15,338 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:57:00, Close: 520.905
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8810, Slow SMA = 520.8790
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001000, Curr diff: 0.002000
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:57:00, Close: 520.905
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8840, Slow SMA = 520.8810
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.002000, Curr diff: 0.003000
2025-04-17 20:30:15,338 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:57:00, Close: 520.905
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8910, Slow SMA = 520.8830
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.003000, Curr diff: 0.008000
2025-04-17 20:30:15,338 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,338 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,338 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:58:00
2025-04-17 20:30:15,338 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:58:00, Close: 520.8399
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8850, Slow SMA = 520.8800
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.008000, Curr diff: 0.004987
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:58:00, Close: 520.8399
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8790, Slow SMA = 520.8770
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004987, Curr diff: 0.001973
2025-04-17 20:30:15,338 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:58:00, Close: 520.8399
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8659, Slow SMA = 520.8740
2025-04-17 20:30:15,338 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001973, Curr diff: -0.008040
2025-04-17 20:30:15,338 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 16:58:00
2025-04-17 20:30:15,338 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,338 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.8399
2025-04-17 20:30:15,338 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,338 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,339 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5208.40, Available: 962.29
2025-04-17 20:30:15,339 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,339 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,339 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.8399
2025-04-17 20:30:15,339 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.8399
2025-04-17 20:30:15,339 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,339 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,339 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 16:59:00
2025-04-17 20:30:15,339 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:59:00, Close: 520.88
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8609, Slow SMA = 520.8750
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008040, Curr diff: -0.014040
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:59:00, Close: 520.88
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8559, Slow SMA = 520.8760
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.014040, Curr diff: -0.020040
2025-04-17 20:30:15,339 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 16:59:00, Close: 520.88
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8640, Slow SMA = 520.8770
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.020040, Curr diff: -0.013020
2025-04-17 20:30:15,339 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,339 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,339 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:00:00
2025-04-17 20:30:15,339 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:00:00, Close: 520.795
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8550, Slow SMA = 520.8706
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.013020, Curr diff: -0.015667
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:00:00, Close: 520.795
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8460, Slow SMA = 520.8643
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015667, Curr diff: -0.018313
2025-04-17 20:30:15,339 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:00:00, Close: 520.795
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8290, Slow SMA = 520.8580
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.018313, Curr diff: -0.028980
2025-04-17 20:30:15,339 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,339 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,339 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:01:00
2025-04-17 20:30:15,339 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:01:00, Close: 520.77
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8070, Slow SMA = 520.8513
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.028980, Curr diff: -0.044313
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:01:00, Close: 520.77
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7850, Slow SMA = 520.8446
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.044313, Curr diff: -0.059647
2025-04-17 20:30:15,339 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:01:00, Close: 520.77
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7800, Slow SMA = 520.8380
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.059647, Curr diff: -0.057980
2025-04-17 20:30:15,339 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,339 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,339 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:02:00
2025-04-17 20:30:15,339 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:02:00, Close: 520.805
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7820, Slow SMA = 520.8313
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.057980, Curr diff: -0.049313
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:02:00, Close: 520.805
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7840, Slow SMA = 520.8246
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.049313, Curr diff: -0.040647
2025-04-17 20:30:15,339 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:02:00, Close: 520.805
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7910, Slow SMA = 520.8180
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.040647, Curr diff: -0.026980
2025-04-17 20:30:15,339 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,339 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,339 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:03:00
2025-04-17 20:30:15,339 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:03:00, Close: 520.905
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8180, Slow SMA = 520.8223
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.026980, Curr diff: -0.004320
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:03:00, Close: 520.905
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8450, Slow SMA = 520.8267
2025-04-17 20:30:15,339 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.004320, Curr diff: 0.018340
2025-04-17 20:30:15,339 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 17:03:00
2025-04-17 20:30:15,339 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,340 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.905
2025-04-17 20:30:15,340 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,340 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,340 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.905
2025-04-17 20:30:15,340 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.905
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:03:00, Close: 520.905
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8650, Slow SMA = 520.8310
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.018340, Curr diff: 0.034000
2025-04-17 20:30:15,340 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,340 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:04:00
2025-04-17 20:30:15,340 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:04:00, Close: 520.845
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8730, Slow SMA = 520.8287
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.034000, Curr diff: 0.044333
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:04:00, Close: 520.845
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8810, Slow SMA = 520.8263
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.044333, Curr diff: 0.054667
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:04:00, Close: 520.845
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8690, Slow SMA = 520.8240
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.054667, Curr diff: 0.045000
2025-04-17 20:30:15,340 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,340 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:05:00
2025-04-17 20:30:15,340 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:05:00, Close: 520.9172
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8714, Slow SMA = 520.8321
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.045000, Curr diff: 0.039293
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:05:00, Close: 520.9172
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8739, Slow SMA = 520.8403
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.039293, Curr diff: 0.033587
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:05:00, Close: 520.9172
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8883, Slow SMA = 520.8484
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.033587, Curr diff: 0.039880
2025-04-17 20:30:15,340 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,340 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:06:00
2025-04-17 20:30:15,340 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:06:00, Close: 520.99
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9173, Slow SMA = 520.8631
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.039880, Curr diff: 0.054213
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:06:00, Close: 520.99
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9463, Slow SMA = 520.8778
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.054213, Curr diff: 0.068547
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:06:00, Close: 520.99
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9609, Slow SMA = 520.8924
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.068547, Curr diff: 0.068440
2025-04-17 20:30:15,340 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,340 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:07:00
2025-04-17 20:30:15,340 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:07:00, Close: 520.9901
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9755, Slow SMA = 520.9048
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.068440, Curr diff: 0.070680
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:07:00, Close: 520.9901
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9900, Slow SMA = 520.9171
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.070680, Curr diff: 0.072920
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:07:00, Close: 520.9901
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9901, Slow SMA = 520.9295
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.072920, Curr diff: 0.060600
2025-04-17 20:30:15,340 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,340 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,340 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:08:00
2025-04-17 20:30:15,340 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,340 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:08:00, Close: 520.94
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9801, Slow SMA = 520.9318
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.060600, Curr diff: 0.048267
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:08:00, Close: 520.94
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9701, Slow SMA = 520.9341
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.048267, Curr diff: 0.035933
2025-04-17 20:30:15,341 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:08:00, Close: 520.94
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9600, Slow SMA = 520.9365
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.035933, Curr diff: 0.023580
2025-04-17 20:30:15,341 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,341 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,341 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:09:00
2025-04-17 20:30:15,341 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:09:00, Close: 520.935
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9490, Slow SMA = 520.9425
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.023580, Curr diff: 0.006560
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:09:00, Close: 520.935
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9380, Slow SMA = 520.9485
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.006560, Curr diff: -0.010460
2025-04-17 20:30:15,341 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 17:09:00
2025-04-17 20:30:15,341 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,341 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.935
2025-04-17 20:30:15,341 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,341 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,341 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5209.35, Available: 962.29
2025-04-17 20:30:15,341 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,341 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,341 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.935
2025-04-17 20:30:15,341 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.935
2025-04-17 20:30:15,341 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:09:00, Close: 520.935
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9370, Slow SMA = 520.9545
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.010460, Curr diff: -0.017460
2025-04-17 20:30:15,341 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,341 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,341 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:10:00
2025-04-17 20:30:15,341 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:10:00, Close: 520.884
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9258, Slow SMA = 520.9522
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.017460, Curr diff: -0.026447
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:10:00, Close: 520.884
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9146, Slow SMA = 520.9500
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.026447, Curr diff: -0.035433
2025-04-17 20:30:15,341 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:10:00, Close: 520.884
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9044, Slow SMA = 520.9478
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.035433, Curr diff: -0.043420
2025-04-17 20:30:15,341 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,341 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,341 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:11:00
2025-04-17 20:30:15,341 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:11:00, Close: 520.905
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8984, Slow SMA = 520.9422
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.043420, Curr diff: -0.043753
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:11:00, Close: 520.905
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8924, Slow SMA = 520.9365
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.043753, Curr diff: -0.044087
2025-04-17 20:30:15,341 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:11:00, Close: 520.905
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8966, Slow SMA = 520.9308
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.044087, Curr diff: -0.034220
2025-04-17 20:30:15,341 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,341 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,341 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:12:00
2025-04-17 20:30:15,341 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:12:00, Close: 520.94
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9078, Slow SMA = 520.9275
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.034220, Curr diff: -0.019680
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:12:00, Close: 520.94
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9190, Slow SMA = 520.9241
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.019680, Curr diff: -0.005140
2025-04-17 20:30:15,341 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:12:00, Close: 520.94
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9260, Slow SMA = 520.9208
2025-04-17 20:30:15,341 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005140, Curr diff: 0.005200
2025-04-17 20:30:15,341 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 17:12:00
2025-04-17 20:30:15,342 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,342 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.94
2025-04-17 20:30:15,342 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,342 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,342 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.94
2025-04-17 20:30:15,342 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.94
2025-04-17 20:30:15,342 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,342 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:13:00
2025-04-17 20:30:15,342 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:13:00, Close: 520.94
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9330, Slow SMA = 520.9208
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.005200, Curr diff: 0.012200
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:13:00, Close: 520.94
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9400, Slow SMA = 520.9208
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.012200, Curr diff: 0.019200
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:13:00, Close: 520.94
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9400, Slow SMA = 520.9208
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.019200, Curr diff: 0.019200
2025-04-17 20:30:15,342 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,342 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:14:00
2025-04-17 20:30:15,342 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:14:00, Close: 521.0
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9520, Slow SMA = 520.9251
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.019200, Curr diff: 0.026867
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:14:00, Close: 521.0
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9640, Slow SMA = 520.9295
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.026867, Curr diff: 0.034533
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:14:00, Close: 521.0
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9760, Slow SMA = 520.9338
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.034533, Curr diff: 0.042200
2025-04-17 20:30:15,342 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,342 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:15:00
2025-04-17 20:30:15,342 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:15:00, Close: 520.98
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9840, Slow SMA = 520.9402
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.042200, Curr diff: 0.043800
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:15:00, Close: 520.98
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9920, Slow SMA = 520.9466
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.043800, Curr diff: 0.045400
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:15:00, Close: 520.98
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9880, Slow SMA = 520.9530
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.045400, Curr diff: 0.035000
2025-04-17 20:30:15,342 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,342 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:16:00
2025-04-17 20:30:15,342 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:16:00, Close: 520.89
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9660, Slow SMA = 520.9520
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.035000, Curr diff: 0.014000
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:16:00, Close: 520.89
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9440, Slow SMA = 520.9510
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.014000, Curr diff: -0.007000
2025-04-17 20:30:15,342 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 17:16:00
2025-04-17 20:30:15,342 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,342 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.89
2025-04-17 20:30:15,342 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,342 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,342 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5208.90, Available: 962.29
2025-04-17 20:30:15,342 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.89
2025-04-17 20:30:15,342 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.89
2025-04-17 20:30:15,342 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:16:00, Close: 520.89
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9260, Slow SMA = 520.9500
2025-04-17 20:30:15,342 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.007000, Curr diff: -0.024000
2025-04-17 20:30:15,342 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,342 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,343 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:17:00
2025-04-17 20:30:15,343 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:17:00, Close: 520.825
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8950, Slow SMA = 520.9423
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.024000, Curr diff: -0.047333
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:17:00, Close: 520.825
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8640, Slow SMA = 520.9347
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.047333, Curr diff: -0.070667
2025-04-17 20:30:15,343 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:17:00, Close: 520.825
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8510, Slow SMA = 520.9270
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.070667, Curr diff: -0.076000
2025-04-17 20:30:15,343 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,343 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,343 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:18:00
2025-04-17 20:30:15,343 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:18:00, Close: 520.83
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8390, Slow SMA = 520.9197
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.076000, Curr diff: -0.080667
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:18:00, Close: 520.83
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8270, Slow SMA = 520.9123
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.080667, Curr diff: -0.085333
2025-04-17 20:30:15,343 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:18:00, Close: 520.83
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8280, Slow SMA = 520.9050
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.085333, Curr diff: -0.077000
2025-04-17 20:30:15,343 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,343 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,343 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:19:00
2025-04-17 20:30:15,343 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:19:00, Close: 520.825
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8280, Slow SMA = 520.8933
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.077000, Curr diff: -0.065333
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:19:00, Close: 520.825
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8280, Slow SMA = 520.8817
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.065333, Curr diff: -0.053667
2025-04-17 20:30:15,343 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:19:00, Close: 520.825
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8270, Slow SMA = 520.8700
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.053667, Curr diff: -0.043000
2025-04-17 20:30:15,343 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,343 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,343 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:20:00
2025-04-17 20:30:15,343 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:20:00, Close: 520.82
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8250, Slow SMA = 520.8593
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.043000, Curr diff: -0.034333
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:20:00, Close: 520.82
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8230, Slow SMA = 520.8487
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.034333, Curr diff: -0.025667
2025-04-17 20:30:15,343 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:20:00, Close: 520.82
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8220, Slow SMA = 520.8380
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.025667, Curr diff: -0.016000
2025-04-17 20:30:15,343 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,343 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,343 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:21:00
2025-04-17 20:30:15,343 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:21:00, Close: 520.825
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8220, Slow SMA = 520.8337
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.016000, Curr diff: -0.011667
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:21:00, Close: 520.825
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8220, Slow SMA = 520.8293
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.011667, Curr diff: -0.007333
2025-04-17 20:30:15,343 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:21:00, Close: 520.825
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8230, Slow SMA = 520.8250
2025-04-17 20:30:15,343 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.007333, Curr diff: -0.002000
2025-04-17 20:30:15,343 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,343 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,344 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:22:00
2025-04-17 20:30:15,344 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:22:00, Close: 520.82
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8230, Slow SMA = 520.8247
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.002000, Curr diff: -0.001667
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:22:00, Close: 520.82
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8230, Slow SMA = 520.8243
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.001667, Curr diff: -0.001333
2025-04-17 20:30:15,344 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:22:00, Close: 520.82
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8220, Slow SMA = 520.8240
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.001333, Curr diff: -0.002000
2025-04-17 20:30:15,344 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,344 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,344 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:23:00
2025-04-17 20:30:15,344 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:23:00, Close: 520.775
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8120, Slow SMA = 520.8203
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.002000, Curr diff: -0.008333
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:23:00, Close: 520.775
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8020, Slow SMA = 520.8167
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008333, Curr diff: -0.014667
2025-04-17 20:30:15,344 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:23:00, Close: 520.775
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7930, Slow SMA = 520.8130
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.014667, Curr diff: -0.020000
2025-04-17 20:30:15,344 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,344 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,344 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:24:00
2025-04-17 20:30:15,344 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:24:00, Close: 520.79
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7870, Slow SMA = 520.8107
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.020000, Curr diff: -0.023667
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:24:00, Close: 520.79
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7810, Slow SMA = 520.8083
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.023667, Curr diff: -0.027333
2025-04-17 20:30:15,344 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:24:00, Close: 520.79
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7840, Slow SMA = 520.8060
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.027333, Curr diff: -0.022000
2025-04-17 20:30:15,344 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,344 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,344 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:25:00
2025-04-17 20:30:15,344 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:25:00, Close: 520.76
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7810, Slow SMA = 520.8020
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.022000, Curr diff: -0.021000
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:25:00, Close: 520.76
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7780, Slow SMA = 520.7980
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.021000, Curr diff: -0.020000
2025-04-17 20:30:15,344 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:25:00, Close: 520.76
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7720, Slow SMA = 520.7940
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.020000, Curr diff: -0.022000
2025-04-17 20:30:15,344 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,344 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,344 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:26:00
2025-04-17 20:30:15,344 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:26:00, Close: 520.8
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7740, Slow SMA = 520.7923
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.022000, Curr diff: -0.018333
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:26:00, Close: 520.8
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7760, Slow SMA = 520.7907
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.018333, Curr diff: -0.014667
2025-04-17 20:30:15,344 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:26:00, Close: 520.8
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7840, Slow SMA = 520.7890
2025-04-17 20:30:15,344 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.014667, Curr diff: -0.005000
2025-04-17 20:30:15,344 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,344 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,344 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:27:00
2025-04-17 20:30:15,345 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:27:00, Close: 520.76
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7840, Slow SMA = 520.7850
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.005000, Curr diff: -0.001000
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:27:00, Close: 520.76
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7840, Slow SMA = 520.7810
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.001000, Curr diff: 0.003000
2025-04-17 20:30:15,345 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 17:27:00
2025-04-17 20:30:15,345 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.76
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.76
2025-04-17 20:30:15,345 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.76
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:27:00, Close: 520.76
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7760, Slow SMA = 520.7770
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.003000, Curr diff: -0.001000
2025-04-17 20:30:15,345 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 17:27:00
2025-04-17 20:30:15,345 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.76
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,345 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5207.60, Available: 962.29
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.76
2025-04-17 20:30:15,345 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.76
2025-04-17 20:30:15,345 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,345 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:28:00
2025-04-17 20:30:15,345 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:28:00, Close: 520.82
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7800, Slow SMA = 520.7800
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.001000, Curr diff: -0.000000
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:28:00, Close: 520.82
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7840, Slow SMA = 520.7830
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.000000, Curr diff: 0.001000
2025-04-17 20:30:15,345 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 17:28:00
2025-04-17 20:30:15,345 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.82
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,345 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.82
2025-04-17 20:30:15,345 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.82
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:28:00, Close: 520.82
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7960, Slow SMA = 520.7860
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001000, Curr diff: 0.010000
2025-04-17 20:30:15,345 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,345 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:29:00
2025-04-17 20:30:15,345 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:29:00, Close: 520.86
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8160, Slow SMA = 520.7907
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.010000, Curr diff: 0.025333
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:29:00, Close: 520.86
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8360, Slow SMA = 520.7953
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.025333, Curr diff: 0.040667
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:29:00, Close: 520.86
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8440, Slow SMA = 520.8000
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.040667, Curr diff: 0.044000
2025-04-17 20:30:15,345 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,345 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:30:00
2025-04-17 20:30:15,345 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:30:00, Close: 520.92
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8640, Slow SMA = 520.8107
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.044000, Curr diff: 0.053333
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:30:00, Close: 520.92
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8840, Slow SMA = 520.8213
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.053333, Curr diff: 0.062667
2025-04-17 20:30:15,345 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:30:00, Close: 520.92
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8960, Slow SMA = 520.8320
2025-04-17 20:30:15,345 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.062667, Curr diff: 0.064000
2025-04-17 20:30:15,345 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,346 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,346 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:31:00
2025-04-17 20:30:15,346 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:31:00, Close: 520.9151
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9070, Slow SMA = 520.8397
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.064000, Curr diff: 0.067347
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:31:00, Close: 520.9151
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9180, Slow SMA = 520.8473
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.067347, Curr diff: 0.070693
2025-04-17 20:30:15,346 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:31:00, Close: 520.9151
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9171, Slow SMA = 520.8550
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.070693, Curr diff: 0.062040
2025-04-17 20:30:15,346 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,346 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,346 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:32:00
2025-04-17 20:30:15,346 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:32:00, Close: 520.92
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9171, Slow SMA = 520.8657
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.062040, Curr diff: 0.051373
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:32:00, Close: 520.92
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9171, Slow SMA = 520.8764
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.051373, Curr diff: 0.040707
2025-04-17 20:30:15,346 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:32:00, Close: 520.92
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9180, Slow SMA = 520.8870
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.040707, Curr diff: 0.031020
2025-04-17 20:30:15,346 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,346 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,346 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:33:00
2025-04-17 20:30:15,346 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:33:00, Close: 520.93
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9210, Slow SMA = 520.8944
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.031020, Curr diff: 0.026667
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:33:00, Close: 520.93
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9240, Slow SMA = 520.9017
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.026667, Curr diff: 0.022313
2025-04-17 20:30:15,346 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:33:00, Close: 520.93
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9260, Slow SMA = 520.9090
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.022313, Curr diff: 0.016980
2025-04-17 20:30:15,346 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,346 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,346 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:34:00
2025-04-17 20:30:15,346 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:34:00, Close: 520.98
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9380, Slow SMA = 520.9170
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016980, Curr diff: 0.020980
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:34:00, Close: 520.98
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9500, Slow SMA = 520.9250
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.020980, Curr diff: 0.024980
2025-04-17 20:30:15,346 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:34:00, Close: 520.98
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9600, Slow SMA = 520.9330
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.024980, Curr diff: 0.026980
2025-04-17 20:30:15,346 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,346 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,346 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:35:00
2025-04-17 20:30:15,346 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:35:00, Close: 520.97
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9680, Slow SMA = 520.9364
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.026980, Curr diff: 0.031647
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:35:00, Close: 520.97
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9760, Slow SMA = 520.9397
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.031647, Curr diff: 0.036313
2025-04-17 20:30:15,346 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:35:00, Close: 520.97
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9740, Slow SMA = 520.9430
2025-04-17 20:30:15,346 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.036313, Curr diff: 0.030980
2025-04-17 20:30:15,346 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,346 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,347 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:36:00
2025-04-17 20:30:15,347 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:36:00, Close: 520.92
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9620, Slow SMA = 520.9433
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.030980, Curr diff: 0.018653
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:36:00, Close: 520.92
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9500, Slow SMA = 520.9437
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.018653, Curr diff: 0.006327
2025-04-17 20:30:15,347 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:36:00, Close: 520.92
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9400, Slow SMA = 520.9440
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.006327, Curr diff: -0.004000
2025-04-17 20:30:15,347 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 17:36:00
2025-04-17 20:30:15,347 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,347 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.92
2025-04-17 20:30:15,347 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,347 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,347 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5209.20, Available: 962.29
2025-04-17 20:30:15,347 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,347 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,347 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.92
2025-04-17 20:30:15,347 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.92
2025-04-17 20:30:15,347 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,347 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,347 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:37:00
2025-04-17 20:30:15,347 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:37:00, Close: 520.85
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9160, Slow SMA = 520.9393
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.004000, Curr diff: -0.023333
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:37:00, Close: 520.85
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8920, Slow SMA = 520.9347
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.023333, Curr diff: -0.042667
2025-04-17 20:30:15,347 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:37:00, Close: 520.85
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8780, Slow SMA = 520.9300
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.042667, Curr diff: -0.052000
2025-04-17 20:30:15,347 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,347 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,347 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:38:00
2025-04-17 20:30:15,347 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:38:00, Close: 520.86
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8660, Slow SMA = 520.9253
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.052000, Curr diff: -0.059333
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:38:00, Close: 520.86
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8540, Slow SMA = 520.9207
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.059333, Curr diff: -0.066667
2025-04-17 20:30:15,347 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:38:00, Close: 520.86
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8560, Slow SMA = 520.9160
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.066667, Curr diff: -0.060000
2025-04-17 20:30:15,347 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,347 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,347 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:39:00
2025-04-17 20:30:15,347 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:39:00, Close: 520.804
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8468, Slow SMA = 520.9043
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.060000, Curr diff: -0.057467
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:39:00, Close: 520.804
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8376, Slow SMA = 520.8925
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.057467, Curr diff: -0.054933
2025-04-17 20:30:15,347 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:39:00, Close: 520.804
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8264, Slow SMA = 520.8808
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.054933, Curr diff: -0.054400
2025-04-17 20:30:15,347 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,347 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,347 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:40:00
2025-04-17 20:30:15,347 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:40:00, Close: 520.81
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8164, Slow SMA = 520.8701
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.054400, Curr diff: -0.053733
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:40:00, Close: 520.81
2025-04-17 20:30:15,347 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8064, Slow SMA = 520.8595
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.053733, Curr diff: -0.053067
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:40:00, Close: 520.81
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8076, Slow SMA = 520.8488
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.053067, Curr diff: -0.041200
2025-04-17 20:30:15,348 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,348 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:41:00
2025-04-17 20:30:15,348 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:41:00, Close: 520.83
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8128, Slow SMA = 520.8428
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.041200, Curr diff: -0.030000
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:41:00, Close: 520.83
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8180, Slow SMA = 520.8368
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.030000, Curr diff: -0.018800
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:41:00, Close: 520.83
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8220, Slow SMA = 520.8308
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.018800, Curr diff: -0.008800
2025-04-17 20:30:15,348 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,348 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:42:00
2025-04-17 20:30:15,348 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:42:00, Close: 520.83
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8260, Slow SMA = 520.8295
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008800, Curr diff: -0.003467
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:42:00, Close: 520.83
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8300, Slow SMA = 520.8281
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.003467, Curr diff: 0.001867
2025-04-17 20:30:15,348 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 17:42:00
2025-04-17 20:30:15,348 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,348 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.83
2025-04-17 20:30:15,348 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,348 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,348 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.83
2025-04-17 20:30:15,348 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.83
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:42:00, Close: 520.83
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8300, Slow SMA = 520.8268
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001867, Curr diff: 0.003200
2025-04-17 20:30:15,348 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,348 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:43:00
2025-04-17 20:30:15,348 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:43:00, Close: 520.81
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8260, Slow SMA = 520.8235
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.003200, Curr diff: 0.002533
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:43:00, Close: 520.81
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8220, Slow SMA = 520.8201
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.002533, Curr diff: 0.001867
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:43:00, Close: 520.81
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8180, Slow SMA = 520.8168
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001867, Curr diff: 0.001200
2025-04-17 20:30:15,348 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,348 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:44:00
2025-04-17 20:30:15,348 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:44:00, Close: 520.6887
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7897, Slow SMA = 520.8091
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001200, Curr diff: -0.019373
2025-04-17 20:30:15,348 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 17:44:00
2025-04-17 20:30:15,348 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,348 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.6887
2025-04-17 20:30:15,348 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,348 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,348 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5206.89, Available: 962.29
2025-04-17 20:30:15,348 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.6887
2025-04-17 20:30:15,348 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.6887
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:44:00, Close: 520.6887
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7615, Slow SMA = 520.8014
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.019373, Curr diff: -0.039947
2025-04-17 20:30:15,348 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:44:00, Close: 520.6887
2025-04-17 20:30:15,348 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7372, Slow SMA = 520.7937
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.039947, Curr diff: -0.056520
2025-04-17 20:30:15,349 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,349 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,349 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:45:00
2025-04-17 20:30:15,349 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:45:00, Close: 520.56
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6872, Slow SMA = 520.7771
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.056520, Curr diff: -0.089853
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:45:00, Close: 520.56
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6372, Slow SMA = 520.7604
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.089853, Curr diff: -0.123187
2025-04-17 20:30:15,349 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:45:00, Close: 520.56
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6115, Slow SMA = 520.7437
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.123187, Curr diff: -0.132260
2025-04-17 20:30:15,349 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,349 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,349 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:46:00
2025-04-17 20:30:15,349 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:46:00, Close: 520.63
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.5997, Slow SMA = 520.7304
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.132260, Curr diff: -0.130667
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:46:00, Close: 520.63
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.5880, Slow SMA = 520.7171
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.130667, Curr diff: -0.129073
2025-04-17 20:30:15,349 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:46:00, Close: 520.63
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6020, Slow SMA = 520.7037
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.129073, Curr diff: -0.101740
2025-04-17 20:30:15,349 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,349 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,349 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:47:00
2025-04-17 20:30:15,349 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:47:00, Close: 520.645
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6190, Slow SMA = 520.6914
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.101740, Curr diff: -0.072407
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:47:00, Close: 520.645
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6360, Slow SMA = 520.6791
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.072407, Curr diff: -0.043073
2025-04-17 20:30:15,349 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:47:00, Close: 520.645
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6390, Slow SMA = 520.6667
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.043073, Curr diff: -0.027740
2025-04-17 20:30:15,349 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,349 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,349 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:48:00
2025-04-17 20:30:15,349 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:48:00, Close: 520.595
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6320, Slow SMA = 520.6524
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.027740, Curr diff: -0.020407
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:48:00, Close: 520.595
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6250, Slow SMA = 520.6381
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.020407, Curr diff: -0.013073
2025-04-17 20:30:15,349 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:48:00, Close: 520.595
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6150, Slow SMA = 520.6237
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.013073, Curr diff: -0.008740
2025-04-17 20:30:15,349 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,349 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,349 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:49:00
2025-04-17 20:30:15,349 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:49:00, Close: 520.63
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6120, Slow SMA = 520.6198
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008740, Curr diff: -0.007827
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:49:00, Close: 520.63
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6090, Slow SMA = 520.6159
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.007827, Curr diff: -0.006913
2025-04-17 20:30:15,349 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:49:00, Close: 520.63
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6160, Slow SMA = 520.6120
2025-04-17 20:30:15,349 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.006913, Curr diff: 0.004000
2025-04-17 20:30:15,349 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 17:49:00
2025-04-17 20:30:15,350 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.63
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.63
2025-04-17 20:30:15,350 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.63
2025-04-17 20:30:15,350 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,350 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:50:00
2025-04-17 20:30:15,350 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:50:00, Close: 520.62
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6210, Slow SMA = 520.6160
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004000, Curr diff: 0.005000
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:50:00, Close: 520.62
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6260, Slow SMA = 520.6200
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.005000, Curr diff: 0.006000
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:50:00, Close: 520.62
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6240, Slow SMA = 520.6240
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.006000, Curr diff: 0.000000
2025-04-17 20:30:15,350 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,350 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:51:00
2025-04-17 20:30:15,350 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:51:00, Close: 520.64
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6260, Slow SMA = 520.6247
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.000000, Curr diff: 0.001333
2025-04-17 20:30:15,350 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 17:51:00
2025-04-17 20:30:15,350 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.64
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.64
2025-04-17 20:30:15,350 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.64
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:51:00, Close: 520.64
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6280, Slow SMA = 520.6253
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001333, Curr diff: 0.002667
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:51:00, Close: 520.64
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6320, Slow SMA = 520.6260
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.002667, Curr diff: 0.006000
2025-04-17 20:30:15,350 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,350 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:52:00
2025-04-17 20:30:15,350 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:52:00, Close: 520.57
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6220, Slow SMA = 520.6210
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.006000, Curr diff: 0.001000
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:52:00, Close: 520.57
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6120, Slow SMA = 520.6160
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001000, Curr diff: -0.004000
2025-04-17 20:30:15,350 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 17:52:00
2025-04-17 20:30:15,350 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.57
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,350 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5205.70, Available: 962.29
2025-04-17 20:30:15,350 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.57
2025-04-17 20:30:15,350 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.57
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:52:00, Close: 520.57
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.5980, Slow SMA = 520.6110
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.004000, Curr diff: -0.013000
2025-04-17 20:30:15,350 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,350 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,350 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:53:00
2025-04-17 20:30:15,350 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:53:00, Close: 520.585
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.5870, Slow SMA = 520.6103
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.013000, Curr diff: -0.023333
2025-04-17 20:30:15,350 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:53:00, Close: 520.585
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.5760, Slow SMA = 520.6097
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.023333, Curr diff: -0.033667
2025-04-17 20:30:15,351 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:53:00, Close: 520.585
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.5790, Slow SMA = 520.6090
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.033667, Curr diff: -0.030000
2025-04-17 20:30:15,351 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,351 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,351 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:54:00
2025-04-17 20:30:15,351 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:54:00, Close: 520.72
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6090, Slow SMA = 520.6150
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.030000, Curr diff: -0.006000
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:54:00, Close: 520.72
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6390, Slow SMA = 520.6210
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.006000, Curr diff: 0.018000
2025-04-17 20:30:15,351 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 17:54:00
2025-04-17 20:30:15,351 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,351 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.72
2025-04-17 20:30:15,351 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,351 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,351 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,351 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,351 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.72
2025-04-17 20:30:15,351 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.72
2025-04-17 20:30:15,351 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:54:00, Close: 520.72
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6660, Slow SMA = 520.6270
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.018000, Curr diff: 0.039000
2025-04-17 20:30:15,351 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,351 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,351 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:55:00
2025-04-17 20:30:15,351 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:55:00, Close: 520.785
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7060, Slow SMA = 520.6380
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.039000, Curr diff: 0.068000
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:55:00, Close: 520.785
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7460, Slow SMA = 520.6490
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.068000, Curr diff: 0.097000
2025-04-17 20:30:15,351 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:55:00, Close: 520.785
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7590, Slow SMA = 520.6600
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.097000, Curr diff: 0.099000
2025-04-17 20:30:15,351 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,351 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,351 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:56:00
2025-04-17 20:30:15,351 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:56:00, Close: 520.76
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7670, Slow SMA = 520.6680
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.099000, Curr diff: 0.099000
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:56:00, Close: 520.76
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7750, Slow SMA = 520.6760
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.099000, Curr diff: 0.099000
2025-04-17 20:30:15,351 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:56:00, Close: 520.76
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7700, Slow SMA = 520.6840
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.099000, Curr diff: 0.086000
2025-04-17 20:30:15,351 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,351 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,351 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:57:00
2025-04-17 20:30:15,351 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:57:00, Close: 520.725
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7580, Slow SMA = 520.6943
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.086000, Curr diff: 0.063667
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:57:00, Close: 520.725
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7460, Slow SMA = 520.7047
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.063667, Curr diff: 0.041333
2025-04-17 20:30:15,351 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:57:00, Close: 520.725
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7390, Slow SMA = 520.7150
2025-04-17 20:30:15,351 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.041333, Curr diff: 0.024000
2025-04-17 20:30:15,351 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,351 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:58:00
2025-04-17 20:30:15,352 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:58:00, Close: 520.725
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7320, Slow SMA = 520.7243
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.024000, Curr diff: 0.007667
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:58:00, Close: 520.725
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7250, Slow SMA = 520.7337
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.007667, Curr diff: -0.008667
2025-04-17 20:30:15,352 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 17:58:00
2025-04-17 20:30:15,352 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,352 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.725
2025-04-17 20:30:15,352 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,352 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,352 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5207.25, Available: 962.29
2025-04-17 20:30:15,352 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.725
2025-04-17 20:30:15,352 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.725
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:58:00, Close: 520.725
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7250, Slow SMA = 520.7430
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008667, Curr diff: -0.018000
2025-04-17 20:30:15,352 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,352 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 17:59:00
2025-04-17 20:30:15,352 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:59:00, Close: 520.655
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7110, Slow SMA = 520.7387
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.018000, Curr diff: -0.027667
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:59:00, Close: 520.655
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6970, Slow SMA = 520.7343
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.027667, Curr diff: -0.037333
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 17:59:00, Close: 520.655
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6830, Slow SMA = 520.7300
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.037333, Curr diff: -0.047000
2025-04-17 20:30:15,352 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,352 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:00:00
2025-04-17 20:30:15,352 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:00:00, Close: 520.7175
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6815, Slow SMA = 520.7255
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.047000, Curr diff: -0.044000
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:00:00, Close: 520.7175
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6800, Slow SMA = 520.7210
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.044000, Curr diff: -0.041000
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:00:00, Close: 520.7175
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.6925, Slow SMA = 520.7165
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.041000, Curr diff: -0.024000
2025-04-17 20:30:15,352 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,352 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:01:00
2025-04-17 20:30:15,352 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:01:00, Close: 520.79
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7195, Slow SMA = 520.7185
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.024000, Curr diff: 0.001000
2025-04-17 20:30:15,352 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 18:01:00
2025-04-17 20:30:15,352 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,352 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.79
2025-04-17 20:30:15,352 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,352 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,352 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.79
2025-04-17 20:30:15,352 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.79
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:01:00, Close: 520.79
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7465, Slow SMA = 520.7205
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.001000, Curr diff: 0.026000
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:01:00, Close: 520.79
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7610, Slow SMA = 520.7225
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.026000, Curr diff: 0.038500
2025-04-17 20:30:15,352 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,352 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,352 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:02:00
2025-04-17 20:30:15,352 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,352 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:02:00, Close: 520.8312
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7837, Slow SMA = 520.7296
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.038500, Curr diff: 0.054160
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:02:00, Close: 520.8312
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8065, Slow SMA = 520.7367
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.054160, Curr diff: 0.069820
2025-04-17 20:30:15,353 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:02:00, Close: 520.8312
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8147, Slow SMA = 520.7437
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.069820, Curr diff: 0.070980
2025-04-17 20:30:15,353 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,353 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,353 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:03:00
2025-04-17 20:30:15,353 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:03:00, Close: 520.85
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8267, Slow SMA = 520.7521
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.070980, Curr diff: 0.074647
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:03:00, Close: 520.85
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8387, Slow SMA = 520.7604
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.074647, Curr diff: 0.078313
2025-04-17 20:30:15,353 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:03:00, Close: 520.85
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8425, Slow SMA = 520.7687
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.078313, Curr diff: 0.073740
2025-04-17 20:30:15,353 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,353 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,353 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:04:00
2025-04-17 20:30:15,353 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:04:00, Close: 520.85
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8462, Slow SMA = 520.7817
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.073740, Curr diff: 0.064500
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:04:00, Close: 520.85
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8500, Slow SMA = 520.7947
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.064500, Curr diff: 0.055260
2025-04-17 20:30:15,353 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:04:00, Close: 520.85
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8500, Slow SMA = 520.8077
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.055260, Curr diff: 0.042260
2025-04-17 20:30:15,353 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,353 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,353 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:05:00
2025-04-17 20:30:15,353 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:05:00, Close: 520.86
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8520, Slow SMA = 520.8172
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.042260, Curr diff: 0.034760
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:05:00, Close: 520.86
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8540, Slow SMA = 520.8267
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.034760, Curr diff: 0.027260
2025-04-17 20:30:15,353 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:05:00, Close: 520.86
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8560, Slow SMA = 520.8362
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.027260, Curr diff: 0.019760
2025-04-17 20:30:15,353 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,353 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,353 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:06:00
2025-04-17 20:30:15,353 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:06:00, Close: 520.87
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8600, Slow SMA = 520.8416
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.019760, Curr diff: 0.018427
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:06:00, Close: 520.87
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8640, Slow SMA = 520.8469
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.018427, Curr diff: 0.017093
2025-04-17 20:30:15,353 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:06:00, Close: 520.87
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8660, Slow SMA = 520.8522
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.017093, Curr diff: 0.013760
2025-04-17 20:30:15,353 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,353 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,353 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:07:00
2025-04-17 20:30:15,353 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:07:00, Close: 520.895
2025-04-17 20:30:15,353 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8730, Slow SMA = 520.8565
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.013760, Curr diff: 0.016507
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:07:00, Close: 520.895
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8800, Slow SMA = 520.8607
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016507, Curr diff: 0.019253
2025-04-17 20:30:15,354 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:07:00, Close: 520.895
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8850, Slow SMA = 520.8650
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.019253, Curr diff: 0.020000
2025-04-17 20:30:15,354 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,354 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,354 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:08:00
2025-04-17 20:30:15,354 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:08:00, Close: 520.915
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8940, Slow SMA = 520.8693
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.020000, Curr diff: 0.024667
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:08:00, Close: 520.915
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9030, Slow SMA = 520.8737
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.024667, Curr diff: 0.029333
2025-04-17 20:30:15,354 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:08:00, Close: 520.915
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9070, Slow SMA = 520.8780
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.029333, Curr diff: 0.029000
2025-04-17 20:30:15,354 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,354 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,354 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:09:00
2025-04-17 20:30:15,354 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:09:00, Close: 520.834
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8948, Slow SMA = 520.8769
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.029000, Curr diff: 0.017867
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:09:00, Close: 520.834
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8826, Slow SMA = 520.8759
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.017867, Curr diff: 0.006733
2025-04-17 20:30:15,354 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:09:00, Close: 520.834
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8664, Slow SMA = 520.8748
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.006733, Curr diff: -0.008400
2025-04-17 20:30:15,354 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 18:09:00
2025-04-17 20:30:15,354 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,354 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.834
2025-04-17 20:30:15,354 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,354 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,354 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5208.34, Available: 962.29
2025-04-17 20:30:15,354 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,354 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,354 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.834
2025-04-17 20:30:15,354 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.834
2025-04-17 20:30:15,354 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,354 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,354 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:10:00
2025-04-17 20:30:15,354 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:10:00, Close: 520.76
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8354, Slow SMA = 520.8681
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.008400, Curr diff: -0.032733
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:10:00, Close: 520.76
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8044, Slow SMA = 520.8615
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.032733, Curr diff: -0.057067
2025-04-17 20:30:15,354 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:10:00, Close: 520.76
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7896, Slow SMA = 520.8548
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.057067, Curr diff: -0.065200
2025-04-17 20:30:15,354 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,354 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,354 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:11:00
2025-04-17 20:30:15,354 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:11:00, Close: 520.785
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7798, Slow SMA = 520.8491
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.065200, Curr diff: -0.069333
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:11:00, Close: 520.785
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7700, Slow SMA = 520.8435
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.069333, Curr diff: -0.073467
2025-04-17 20:30:15,354 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:11:00, Close: 520.785
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7750, Slow SMA = 520.8378
2025-04-17 20:30:15,354 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.073467, Curr diff: -0.062800
2025-04-17 20:30:15,354 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,354 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,355 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:12:00
2025-04-17 20:30:15,355 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:12:00, Close: 520.7388
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7708, Slow SMA = 520.8274
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.062800, Curr diff: -0.056627
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:12:00, Close: 520.7388
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7665, Slow SMA = 520.8170
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.056627, Curr diff: -0.050453
2025-04-17 20:30:15,355 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:12:00, Close: 520.7388
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7573, Slow SMA = 520.8066
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.050453, Curr diff: -0.049280
2025-04-17 20:30:15,355 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,355 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,355 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:13:00
2025-04-17 20:30:15,355 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:13:00, Close: 520.81
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7623, Slow SMA = 520.7996
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.049280, Curr diff: -0.037280
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:13:00, Close: 520.81
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7673, Slow SMA = 520.7926
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.037280, Curr diff: -0.025280
2025-04-17 20:30:15,355 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:13:00, Close: 520.81
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7815, Slow SMA = 520.7856
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.025280, Curr diff: -0.004040
2025-04-17 20:30:15,355 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,355 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,355 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:14:00
2025-04-17 20:30:15,355 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:14:00, Close: 520.85
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8038, Slow SMA = 520.7866
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.004040, Curr diff: 0.017133
2025-04-17 20:30:15,355 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 18:14:00
2025-04-17 20:30:15,355 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,355 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.85
2025-04-17 20:30:15,355 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,355 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,355 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,355 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,355 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.85
2025-04-17 20:30:15,355 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.85
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:14:00, Close: 520.85
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8260, Slow SMA = 520.7877
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.017133, Curr diff: 0.038307
2025-04-17 20:30:15,355 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:14:00, Close: 520.85
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8340, Slow SMA = 520.7888
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.038307, Curr diff: 0.045240
2025-04-17 20:30:15,355 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,355 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,355 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:15:00
2025-04-17 20:30:15,355 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:15:00, Close: 520.9099
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8540, Slow SMA = 520.7988
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.045240, Curr diff: 0.055227
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:15:00, Close: 520.9099
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8740, Slow SMA = 520.8087
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.055227, Curr diff: 0.065213
2025-04-17 20:30:15,355 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:15:00, Close: 520.9099
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8859, Slow SMA = 520.8187
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.065213, Curr diff: 0.067200
2025-04-17 20:30:15,355 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,355 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,355 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:16:00
2025-04-17 20:30:15,355 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:16:00, Close: 520.904
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8967, Slow SMA = 520.8267
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.067200, Curr diff: 0.070067
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:16:00, Close: 520.904
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9075, Slow SMA = 520.8346
2025-04-17 20:30:15,355 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.070067, Curr diff: 0.072933
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:16:00, Close: 520.904
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9064, Slow SMA = 520.8425
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.072933, Curr diff: 0.063820
2025-04-17 20:30:15,356 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,356 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:17:00
2025-04-17 20:30:15,356 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:17:00, Close: 520.905
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9054, Slow SMA = 520.8536
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.063820, Curr diff: 0.051760
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:17:00, Close: 520.905
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9044, Slow SMA = 520.8647
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.051760, Curr diff: 0.039700
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:17:00, Close: 520.905
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9046, Slow SMA = 520.8758
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.039700, Curr diff: 0.028820
2025-04-17 20:30:15,356 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,356 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:18:00
2025-04-17 20:30:15,356 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:18:00, Close: 520.94
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9118, Slow SMA = 520.8844
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.028820, Curr diff: 0.027353
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:18:00, Close: 520.94
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9190, Slow SMA = 520.8931
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.027353, Curr diff: 0.025887
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:18:00, Close: 520.94
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9260, Slow SMA = 520.9018
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.025887, Curr diff: 0.024220
2025-04-17 20:30:15,356 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,356 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:19:00
2025-04-17 20:30:15,356 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:19:00, Close: 520.925
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9300, Slow SMA = 520.9068
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.024220, Curr diff: 0.023220
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:19:00, Close: 520.925
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9340, Slow SMA = 520.9118
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.023220, Curr diff: 0.022220
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:19:00, Close: 520.925
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9310, Slow SMA = 520.9168
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.022220, Curr diff: 0.014220
2025-04-17 20:30:15,356 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,356 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:20:00
2025-04-17 20:30:15,356 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:20:00, Close: 520.84
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9110, Slow SMA = 520.9121
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.014220, Curr diff: -0.001120
2025-04-17 20:30:15,356 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 18:20:00
2025-04-17 20:30:15,356 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,356 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.84
2025-04-17 20:30:15,356 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,356 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,356 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5208.40, Available: 962.29
2025-04-17 20:30:15,356 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.84
2025-04-17 20:30:15,356 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.84
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:20:00, Close: 520.84
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8910, Slow SMA = 520.9075
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.001120, Curr diff: -0.016460
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:20:00, Close: 520.84
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8740, Slow SMA = 520.9028
2025-04-17 20:30:15,356 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.016460, Curr diff: -0.028800
2025-04-17 20:30:15,356 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,356 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,356 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:21:00
2025-04-17 20:30:15,357 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:21:00, Close: 520.83
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8550, Slow SMA = 520.8979
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.028800, Curr diff: -0.042867
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:21:00, Close: 520.83
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8360, Slow SMA = 520.8929
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.042867, Curr diff: -0.056933
2025-04-17 20:30:15,357 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:21:00, Close: 520.83
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8340, Slow SMA = 520.8880
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.056933, Curr diff: -0.054000
2025-04-17 20:30:15,357 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,357 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,357 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:22:00
2025-04-17 20:30:15,357 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:22:00, Close: 520.855
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8370, Slow SMA = 520.8847
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.054000, Curr diff: -0.047667
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:22:00, Close: 520.855
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8400, Slow SMA = 520.8813
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.047667, Curr diff: -0.041333
2025-04-17 20:30:15,357 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:22:00, Close: 520.855
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8450, Slow SMA = 520.8780
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.041333, Curr diff: -0.033000
2025-04-17 20:30:15,357 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,357 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,357 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:23:00
2025-04-17 20:30:15,357 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:23:00, Close: 520.91
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8610, Slow SMA = 520.8760
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.033000, Curr diff: -0.015000
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:23:00, Close: 520.91
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8770, Slow SMA = 520.8740
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015000, Curr diff: 0.003000
2025-04-17 20:30:15,357 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 18:23:00
2025-04-17 20:30:15,357 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,357 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 520.91
2025-04-17 20:30:15,357 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,357 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,357 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,357 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,357 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 520.91
2025-04-17 20:30:15,357 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 520.91
2025-04-17 20:30:15,357 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:23:00, Close: 520.91
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8880, Slow SMA = 520.8720
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.003000, Curr diff: 0.016000
2025-04-17 20:30:15,357 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,357 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,357 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:24:00
2025-04-17 20:30:15,357 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:24:00, Close: 520.92
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9010, Slow SMA = 520.8717
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.016000, Curr diff: 0.029333
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:24:00, Close: 520.92
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9140, Slow SMA = 520.8713
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.029333, Curr diff: 0.042667
2025-04-17 20:30:15,357 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:24:00, Close: 520.92
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9160, Slow SMA = 520.8710
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.042667, Curr diff: 0.045000
2025-04-17 20:30:15,357 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,357 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,357 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:25:00
2025-04-17 20:30:15,357 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:25:00, Close: 520.87
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9080, Slow SMA = 520.8730
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.045000, Curr diff: 0.035000
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:25:00, Close: 520.87
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9000, Slow SMA = 520.8750
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.035000, Curr diff: 0.025000
2025-04-17 20:30:15,357 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:25:00, Close: 520.87
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8900, Slow SMA = 520.8770
2025-04-17 20:30:15,357 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.025000, Curr diff: 0.013000
2025-04-17 20:30:15,358 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,358 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,358 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:26:00
2025-04-17 20:30:15,358 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:26:00, Close: 520.934
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8928, Slow SMA = 520.8839
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.013000, Curr diff: 0.008867
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:26:00, Close: 520.934
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8956, Slow SMA = 520.8909
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.008867, Curr diff: 0.004733
2025-04-17 20:30:15,358 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:26:00, Close: 520.934
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9084, Slow SMA = 520.8978
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.004733, Curr diff: 0.010600
2025-04-17 20:30:15,358 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,358 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,358 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:27:00
2025-04-17 20:30:15,358 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:27:00, Close: 520.9897
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9323, Slow SMA = 520.9068
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.010600, Curr diff: 0.025560
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:27:00, Close: 520.9897
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9563, Slow SMA = 520.9158
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.025560, Curr diff: 0.040520
2025-04-17 20:30:15,358 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:27:00, Close: 520.9897
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9674, Slow SMA = 520.9247
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.040520, Curr diff: 0.042680
2025-04-17 20:30:15,358 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,358 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,358 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:28:00
2025-04-17 20:30:15,358 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:28:00, Close: 520.97
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9746, Slow SMA = 520.9287
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.042680, Curr diff: 0.045880
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:28:00, Close: 520.97
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9818, Slow SMA = 520.9327
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.045880, Curr diff: 0.049080
2025-04-17 20:30:15,358 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:28:00, Close: 520.97
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9779, Slow SMA = 520.9367
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.049080, Curr diff: 0.041140
2025-04-17 20:30:15,358 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,358 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,358 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:29:00
2025-04-17 20:30:15,358 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:29:00, Close: 520.965
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9729, Slow SMA = 520.9397
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.041140, Curr diff: 0.033200
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:29:00, Close: 520.965
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9680, Slow SMA = 520.9427
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.033200, Curr diff: 0.025260
2025-04-17 20:30:15,358 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:29:00, Close: 520.965
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9670, Slow SMA = 520.9457
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.025260, Curr diff: 0.021260
2025-04-17 20:30:15,358 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,358 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,358 - src.engine.backtester - INFO - Processed 300 bars, 0 signals, 0 orders, 36 fills
2025-04-17 20:30:15,358 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:30:00
2025-04-17 20:30:15,358 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:30:00, Close: 520.935
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9600, Slow SMA = 520.9501
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.021260, Curr diff: 0.009927
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:30:00, Close: 520.935
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9530, Slow SMA = 520.9544
2025-04-17 20:30:15,358 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.009927, Curr diff: -0.001407
2025-04-17 20:30:15,358 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 18:30:00
2025-04-17 20:30:15,358 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,358 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.935
2025-04-17 20:30:15,358 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,358 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,359 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5209.35, Available: 962.29
2025-04-17 20:30:15,359 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.935
2025-04-17 20:30:15,359 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.935
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:30:00, Close: 520.935
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9470, Slow SMA = 520.9587
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.001407, Curr diff: -0.011740
2025-04-17 20:30:15,359 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,359 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:31:00
2025-04-17 20:30:15,359 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:31:00, Close: 521.0
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9540, Slow SMA = 520.9631
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.011740, Curr diff: -0.009140
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:31:00, Close: 521.0
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9610, Slow SMA = 520.9675
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.009140, Curr diff: -0.006540
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:31:00, Close: 521.0
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9740, Slow SMA = 520.9719
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.006540, Curr diff: 0.002060
2025-04-17 20:30:15,359 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bullish crossover for SPY @ 2024-03-26 18:31:00
2025-04-17 20:30:15,359 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,359 - src.position_management.position_manager - INFO - Position manager received BUY signal for SPY at price 521.0
2025-04-17 20:30:15,359 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 1 in same direction, 0 in opposite direction
2025-04-17 20:30:15,359 - src.position_management.position_manager - INFO - Already have position in LONG direction - skipping entry
2025-04-17 20:30:15,359 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - Signal details: BUY for SPY @ 521.0
2025-04-17 20:30:15,359 - src.rules.rule_base - INFO - Generated BUY signal for SPY @ 521.0
2025-04-17 20:30:15,359 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,359 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:32:00
2025-04-17 20:30:15,359 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:32:00, Close: 520.98
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9830, Slow SMA = 520.9713
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.002060, Curr diff: 0.011707
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:32:00, Close: 520.98
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9920, Slow SMA = 520.9706
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.011707, Curr diff: 0.021353
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:32:00, Close: 520.98
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9880, Slow SMA = 520.9700
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.021353, Curr diff: 0.018000
2025-04-17 20:30:15,359 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,359 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:33:00
2025-04-17 20:30:15,359 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:33:00, Close: 520.995
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9870, Slow SMA = 520.9717
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.018000, Curr diff: 0.015333
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:33:00, Close: 520.995
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9860, Slow SMA = 520.9733
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.015333, Curr diff: 0.012667
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:33:00, Close: 520.995
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9890, Slow SMA = 520.9750
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.012667, Curr diff: 0.014000
2025-04-17 20:30:15,359 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,359 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:34:00
2025-04-17 20:30:15,359 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:34:00, Close: 521.01
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9950, Slow SMA = 520.9780
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.014000, Curr diff: 0.017000
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:34:00, Close: 521.01
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0010, Slow SMA = 520.9810
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.017000, Curr diff: 0.020000
2025-04-17 20:30:15,359 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:34:00, Close: 521.01
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0040, Slow SMA = 520.9840
2025-04-17 20:30:15,359 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.020000, Curr diff: 0.020000
2025-04-17 20:30:15,359 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,359 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,360 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:35:00
2025-04-17 20:30:15,360 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:35:00, Close: 520.99
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0030, Slow SMA = 520.9877
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.020000, Curr diff: 0.015333
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:35:00, Close: 520.99
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 521.0020, Slow SMA = 520.9913
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.015333, Curr diff: 0.010667
2025-04-17 20:30:15,360 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:35:00, Close: 520.99
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9980, Slow SMA = 520.9950
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.010667, Curr diff: 0.003000
2025-04-17 20:30:15,360 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,360 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,360 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:36:00
2025-04-17 20:30:15,360 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:36:00, Close: 520.9581
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9876, Slow SMA = 520.9922
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: 0.003000, Curr diff: -0.004587
2025-04-17 20:30:15,360 - src.rules.crossover_rules - INFO - SMA Rule sma_crossover: Bearish crossover for SPY @ 2024-03-26 18:36:00
2025-04-17 20:30:15,360 - src.events.event_bus - DEBUG - Emitting SIGNAL event
2025-04-17 20:30:15,360 - src.position_management.position_manager - INFO - Position manager received SELL signal for SPY at price 520.9581
2025-04-17 20:30:15,360 - src.position_management.position_manager - INFO - Current positions for SPY: 1 total, 0 in same direction, 1 in opposite direction
2025-04-17 20:30:15,360 - src.position_management.position_manager - INFO - Using position sizer for position sizing
2025-04-17 20:30:15,360 - src.position_management.position_manager - WARNING - Insufficient capital for new position. Required: 5209.58, Available: 962.29
2025-04-17 20:30:15,360 - src.position_management.position_manager - INFO - No position actions created from signal
2025-04-17 20:30:15,360 - src.engine.backtester - DEBUG - Event flow: SIGNAL event received
2025-04-17 20:30:15,360 - src.engine.backtester - DEBUG - Signal details: SELL for SPY @ 520.9581
2025-04-17 20:30:15,360 - src.rules.rule_base - INFO - Generated SELL signal for SPY @ 520.9581
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:36:00, Close: 520.9581
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9772, Slow SMA = 520.9894
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.004587, Curr diff: -0.012173
2025-04-17 20:30:15,360 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:36:00, Close: 520.9581
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9709, Slow SMA = 520.9866
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.012173, Curr diff: -0.015760
2025-04-17 20:30:15,360 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,360 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,360 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:37:00
2025-04-17 20:30:15,360 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:37:00, Close: 521.0
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9729, Slow SMA = 520.9880
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015760, Curr diff: -0.015093
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:37:00, Close: 521.0
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9749, Slow SMA = 520.9893
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.015093, Curr diff: -0.014427
2025-04-17 20:30:15,360 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:37:00, Close: 521.0
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9832, Slow SMA = 520.9906
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.014427, Curr diff: -0.007380
2025-04-17 20:30:15,360 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,360 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,360 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:38:00
2025-04-17 20:30:15,360 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:38:00, Close: 520.9201
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9756, Slow SMA = 520.9856
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.007380, Curr diff: -0.009987
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:38:00, Close: 520.9201
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9680, Slow SMA = 520.9806
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.009987, Curr diff: -0.012593
2025-04-17 20:30:15,360 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:38:00, Close: 520.9201
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9521, Slow SMA = 520.9756
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.012593, Curr diff: -0.023580
2025-04-17 20:30:15,360 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,360 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,360 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:39:00
2025-04-17 20:30:15,360 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:39:00, Close: 520.7999
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.9120, Slow SMA = 520.9616
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.023580, Curr diff: -0.049593
2025-04-17 20:30:15,360 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:39:00, Close: 520.7999
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8720, Slow SMA = 520.9476
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.049593, Curr diff: -0.075607
2025-04-17 20:30:15,361 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:39:00, Close: 520.7999
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8480, Slow SMA = 520.9336
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.075607, Curr diff: -0.085640
2025-04-17 20:30:15,361 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,361 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,361 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:40:00
2025-04-17 20:30:15,361 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:40:00, Close: 520.8
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8240, Slow SMA = 520.9210
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.085640, Curr diff: -0.096993
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:40:00, Close: 520.8
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7999, Slow SMA = 520.9083
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.096993, Curr diff: -0.108347
2025-04-17 20:30:15,361 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:40:00, Close: 520.8
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.8000, Slow SMA = 520.8956
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.108347, Curr diff: -0.095660
2025-04-17 20:30:15,361 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,361 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,361 - src.engine.backtester - DEBUG - EMITTING BAR: SPY @ 2024-03-26 18:41:00
2025-04-17 20:30:15,361 - src.events.event_bus - DEBUG - Emitting BAR event
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:41:00, Close: 520.75
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7900, Slow SMA = 520.8817
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.095660, Curr diff: -0.091767
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:41:00, Close: 520.75
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7800, Slow SMA = 520.8679
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.091767, Curr diff: -0.087873
2025-04-17 20:30:15,361 - src.engine.backtester - DEBUG - Event flow: BAR event received
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Processing bar for SPY @ 2024-03-26 18:41:00, Close: 520.75
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - SMA Rule sma_crossover: Fast SMA = 520.7700, Slow SMA = 520.8540
2025-04-17 20:30:15,361 - src.rules.crossover_rules - DEBUG - Rule sma_crossover: Crossover check - Prev diff: -0.087873, Curr diff: -0.084000
2025-04-17 20:30:15,361 - src.events.event_bus - DEBUG - Emitting PORTFOLIO_UPDATE event
2025-04-17 20:30:15,361 - __main__ - DEBUG - Event trace: PORTFOLIO_UPDATE received
2025-04-17 20:30:15,361 - src.engine.backtester - INFO - Backtest completed. Collecting results...
2025-04-17 20:30:15,361 - src.engine.backtester - INFO - Final counts: 624 bars, 160 signals, 0 orders, 36 fills, 52 position actions
2025-04-17 20:30:15,361 - src.engine.backtester - ERROR - EVENT FLOW BREAK: POSITION_ACTION events not generating ORDER events
2025-04-17 20:30:15,361 - src.engine.backtester - INFO - Backtest results: 0 trades, 0.00% return, Sharpe: -0.99
2025-04-17 20:30:15,361 - __main__ - INFO - Backtest completed
2025-04-17 20:30:15,361 - __main__ - INFO - Initial capital: $100000.00
2025-04-17 20:30:15,361 - __main__ - INFO - Final equity: $21792.29
2025-04-17 20:30:15,361 - __main__ - INFO - Final cash: $962.29
2025-04-17 20:30:15,361 - __main__ - INFO - Return: -78.21%
2025-04-17 20:30:15,361 - __main__ - INFO - Total trades: 0
2025-04-17 20:30:15,361 - __main__ - INFO - Open positions at end: 1
2025-04-17 20:30:15,361 - __main__ - INFO -   LONG SPY 40 @ 521.03 (PnL: $-11.20)
2025-04-17 20:30:15,361 - __main__ - INFO - Event statistics:
2025-04-17 20:30:15,361 - __main__ - INFO -   PORTFOLIO_UPDATE: 840 events
2025-04-17 20:30:15,361 - __main__ - INFO -   ORDER: 36 events
2025-04-17 20:30:15,361 - __main__ - INFO -   POSITION_OPENED: 36 events
2025-04-17 20:30:15,361 - __main__ - INFO -   FILL: 72 events
2025-04-17 20:30:15,361 - __main__ - INFO -   POSITION_CLOSED: 16 events
2025-04-17 20:30:15,362 - __main__ - INFO - Backtest Summary:
2025-04-17 20:30:15,362 - __main__ - INFO - Initial Equity: $100000.00
2025-04-17 20:30:15,362 - __main__ - INFO - Final Equity: $21792.29
2025-04-17 20:30:15,362 - __main__ - INFO - Return: -78.21%
2025-04-17 20:30:15,362 - __main__ - INFO - Trades Executed: 0
2025-04-17 20:30:15,362 - __main__ - INFO - Event Statistics:
2025-04-17 20:30:15,362 - __main__ - INFO -   PORTFOLIO_UPDATE: 840
2025-04-17 20:30:15,362 - __main__ - INFO -   ORDER: 36
2025-04-17 20:30:15,362 - __main__ - INFO -   POSITION_OPENED: 36
2025-04-17 20:30:15,362 - __main__ - INFO -   FILL: 72
2025-04-17 20:30:15,362 - __main__ - INFO -   POSITION_CLOSED: 16
